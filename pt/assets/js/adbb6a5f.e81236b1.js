"use strict";(self.webpackChunktemp_docusaurus=self.webpackChunktemp_docusaurus||[]).push([[686],{5521:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>d});var a=o(6672);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}},7907:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"for-engineers/katago-source/commands","title":"Comandos Comuns","description":"Este artigo apresenta os dois modos principais de operacao do KataGo: protocolo GTP e Analysis Engine, alem de explicacao detalhada de comandos comuns.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/current/for-engineers/katago-source/commands.md","sourceDirName":"for-engineers/katago-source","slug":"/for-engineers/katago-source/commands","permalink":"/www.weiqi.kids/pt/docs/for-engineers/katago-source/commands","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/for-engineers/katago-source/commands.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Comandos Comuns"},"sidebar":"tutorialSidebar","previous":{"title":"Instalacao e Configuracao","permalink":"/www.weiqi.kids/pt/docs/for-engineers/katago-source/setup"},"next":{"title":"Arquitetura do Codigo-fonte","permalink":"/www.weiqi.kids/pt/docs/for-engineers/katago-source/architecture"}}');var s=o(3420),r=o(5521);const i={sidebar_position:2,title:"Comandos Comuns"},d="Comandos Comuns do KataGo",c={},l=[{value:"Introducao ao Protocolo GTP",id:"introducao-ao-protocolo-gtp",level:2},{value:"Iniciar Modo GTP",id:"iniciar-modo-gtp",level:3},{value:"Formato Basico do Protocolo GTP",id:"formato-basico-do-protocolo-gtp",level:3},{value:"Exemplo Basico",id:"exemplo-basico",level:3},{value:"Comandos GTP Comuns",id:"comandos-gtp-comuns",level:2},{value:"Informacao do Programa",id:"informacao-do-programa",level:3},{value:"Configuracao do Tabuleiro",id:"configuracao-do-tabuleiro",level:3},{value:"Relacionados a Jogar",id:"relacionados-a-jogar",level:3},{value:"Consulta de Posicao",id:"consulta-de-posicao",level:3},{value:"Relacionados a Regras",id:"relacionados-a-regras",level:3},{value:"Comandos de Extensao KataGo",id:"comandos-de-extensao-katago",level:2},{value:"kata-analyze",id:"kata-analyze",level:3},{value:"kata-raw-nn",id:"kata-raw-nn",level:3},{value:"kata-debug-print",id:"kata-debug-print",level:3},{value:"Ajuste de Forca",id:"ajuste-de-forca",level:3},{value:"Uso do Analysis Engine",id:"uso-do-analysis-engine",level:2},{value:"Iniciar Analysis Engine",id:"iniciar-analysis-engine",level:3},{value:"Fluxo de Uso Basico",id:"fluxo-de-uso-basico",level:3},{value:"Formato de Requisicao",id:"formato-de-requisicao",level:3},{value:"Descricao dos Campos de Requisicao",id:"descricao-dos-campos-de-requisicao",level:3},{value:"Formato de Resposta",id:"formato-de-resposta",level:3},{value:"Descricao dos Campos de Resposta",id:"descricao-dos-campos-de-resposta",level:3},{value:"Campos moveInfos",id:"campos-moveinfos",level:4},{value:"Campos rootInfo",id:"campos-rootinfo",level:4},{value:"Campo ownership",id:"campo-ownership",level:4},{value:"Opcoes de Consulta Avancadas",id:"opcoes-de-consulta-avancadas",level:3},{value:"Obter Mapa de Territorio",id:"obter-mapa-de-territorio",level:4},{value:"Obter Distribuicao Policy",id:"obter-distribuicao-policy",level:4},{value:"Limitar Numero de Jogadas Reportadas",id:"limitar-numero-de-jogadas-reportadas",level:4},{value:"Analisar Jogadas Especificas",id:"analisar-jogadas-especificas",level:4},{value:"Exemplo Completo: Integracao Python",id:"exemplo-completo-integracao-python",level:3},{value:"Exemplo Completo: Integracao Node.js",id:"exemplo-completo-integracao-nodejs",level:3},{value:"Sistema de Coordenadas",id:"sistema-de-coordenadas",level:2},{value:"Coordenadas por Letras",id:"coordenadas-por-letras",level:3},{value:"Conversao de Coordenadas",id:"conversao-de-coordenadas",level:3},{value:"Padroes de Uso Comuns",id:"padroes-de-uso-comuns",level:2},{value:"Modo de Jogo",id:"modo-de-jogo",level:3},{value:"Modo de Analise em Lote",id:"modo-de-analise-em-lote",level:3},{value:"Modo de Analise em Tempo Real",id:"modo-de-analise-em-tempo-real",level:3},{value:"Otimizacao de Desempenho",id:"otimizacao-de-desempenho",level:2},{value:"Configuracao de Busca",id:"configuracao-de-busca",level:3},{value:"Configuracao Multi-thread",id:"configuracao-multi-thread",level:3},{value:"Configuracao de Memoria",id:"configuracao-de-memoria",level:3},{value:"Proximos Passos",id:"proximos-passos",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"comandos-comuns-do-katago",children:"Comandos Comuns do KataGo"})}),"\n",(0,s.jsx)(n.p,{children:"Este artigo apresenta os dois modos principais de operacao do KataGo: protocolo GTP e Analysis Engine, alem de explicacao detalhada de comandos comuns."}),"\n",(0,s.jsx)(n.h2,{id:"introducao-ao-protocolo-gtp",children:"Introducao ao Protocolo GTP"}),"\n",(0,s.jsx)(n.p,{children:"GTP (Go Text Protocol) e o protocolo padrao de comunicacao entre programas de Go. A maioria das GUIs de Go (como Sabaki, Lizzie) usa GTP para se comunicar com motores de IA."}),"\n",(0,s.jsx)(n.h3,{id:"iniciar-modo-gtp",children:"Iniciar Modo GTP"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"katago gtp -model /path/to/model.bin.gz -config /path/to/config.cfg\n"})}),"\n",(0,s.jsx)(n.h3,{id:"formato-basico-do-protocolo-gtp",children:"Formato Basico do Protocolo GTP"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[id] command_name [arguments]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id"}),": Numero de comando opcional, usado para rastrear respostas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"command_name"}),": Nome do comando"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"arguments"}),": Argumentos do comando"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Formato de resposta:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"=[id] response_data     # Sucesso\n?[id] error_message     # Falha\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exemplo-basico",children:"Exemplo Basico"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1 name\n=1 KataGo\n\n2 version\n=2 1.15.3\n\n3 boardsize 19\n=3\n\n4 komi 7.5\n=4\n\n5 play black Q16\n=5\n\n6 genmove white\n=6 D4\n"})}),"\n",(0,s.jsx)(n.h2,{id:"comandos-gtp-comuns",children:"Comandos GTP Comuns"}),"\n",(0,s.jsx)(n.h3,{id:"informacao-do-programa",children:"Informacao do Programa"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Comando"}),(0,s.jsx)(n.th,{children:"Descricao"}),(0,s.jsx)(n.th,{children:"Exemplo"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"Obter nome do programa"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"name"})," \u2192 ",(0,s.jsx)(n.code,{children:"= KataGo"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"version"})}),(0,s.jsx)(n.td,{children:"Obter numero de versao"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"version"})," \u2192 ",(0,s.jsx)(n.code,{children:"= 1.15.3"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"list_commands"})}),(0,s.jsx)(n.td,{children:"Listar todos os comandos suportados"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"list_commands"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"protocol_version"})}),(0,s.jsx)(n.td,{children:"Versao do protocolo GTP"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"protocol_version"})," \u2192 ",(0,s.jsx)(n.code,{children:"= 2"})]})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"configuracao-do-tabuleiro",children:"Configuracao do Tabuleiro"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Definir tamanho do tabuleiro (9, 13, 19)\nboardsize 19\n\n# Definir komi\nkomi 7.5\n\n# Limpar tabuleiro\nclear_board\n\n# Definir regras (extensao KataGo)\nkata-set-rules chinese    # Regras chinesas\nkata-set-rules japanese   # Regras japonesas\nkata-set-rules tromp-taylor\n"})}),"\n",(0,s.jsx)(n.h3,{id:"relacionados-a-jogar",children:"Relacionados a Jogar"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Fazer jogada\nplay black Q16    # Preto joga em Q16\nplay white D4     # Branco joga em D4\nplay black pass   # Preto passa\n\n# Deixar IA fazer uma jogada\ngenmove black     # Gerar jogada para preto\ngenmove white     # Gerar jogada para branco\n\n# Desfazer\nundo              # Desfazer uma jogada\n\n# Definir limite de jogadas\nkata-set-param maxVisits 1000    # Definir numero maximo de buscas\n"})}),"\n",(0,s.jsx)(n.h3,{id:"consulta-de-posicao",children:"Consulta de Posicao"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Mostrar tabuleiro\nshowboard\n\n# Obter jogador atual\nkata-get-player\n\n# Obter resultado de analise\nkata-analyze black 100    # Analisar preto, buscar 100 vezes\n"})}),"\n",(0,s.jsx)(n.h3,{id:"relacionados-a-regras",children:"Relacionados a Regras"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Obter regras atuais\nkata-get-rules\n\n# Definir regras\nkata-set-rules chinese\n\n# Definir handicap\nfixed_handicap 4     # Posicoes padrao de 4 pedras de handicap\nplace_free_handicap 4  # Handicap livre\n"})}),"\n",(0,s.jsx)(n.h2,{id:"comandos-de-extensao-katago",children:"Comandos de Extensao KataGo"}),"\n",(0,s.jsx)(n.p,{children:"KataGo fornece muitos comandos de extensao alem do GTP padrao:"}),"\n",(0,s.jsx)(n.h3,{id:"kata-analyze",children:"kata-analyze"}),"\n",(0,s.jsx)(n.p,{children:"Analise em tempo real da posicao atual:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kata-analyze [player] [visits] [interval]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Parametros:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"player"}),": Analisar qual lado (black/white)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"visits"}),": Numero de buscas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"interval"}),": Intervalo de relatorio (centissegundos, 1/100 segundo)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Exemplo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kata-analyze black 1000 100\n"})}),"\n",(0,s.jsx)(n.p,{children:"Saida:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"info move Q3 visits 523 winrate 0.5432 scoreMean 2.31 scoreSelfplay 2.45 prior 0.1234 order 0 pv Q3 R4 Q5 ...\ninfo move D4 visits 312 winrate 0.5123 scoreMean 1.82 scoreSelfplay 1.95 prior 0.0987 order 1 pv D4 C6 E3 ...\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:"Descricao dos campos de saida:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Campo"}),(0,s.jsx)(n.th,{children:"Descricao"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"move"})}),(0,s.jsx)(n.td,{children:"Posicao da jogada"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"visits"})}),(0,s.jsx)(n.td,{children:"Numero de visitas de busca"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"winrate"})}),(0,s.jsx)(n.td,{children:"Taxa de vitoria (0-1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreMean"})}),(0,s.jsx)(n.td,{children:"Diferenca de pontos esperada"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreSelfplay"})}),(0,s.jsx)(n.td,{children:"Pontos esperados em self-play"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"prior"})}),(0,s.jsx)(n.td,{children:"Probabilidade prior da rede neural"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"order"})}),(0,s.jsx)(n.td,{children:"Ordem de ranking"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pv"})}),(0,s.jsx)(n.td,{children:"Principal Variation (variacao principal)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"kata-raw-nn",children:"kata-raw-nn"}),"\n",(0,s.jsx)(n.p,{children:"Obter saida bruta da rede neural:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kata-raw-nn [symmetry]\n"})}),"\n",(0,s.jsx)(n.p,{children:"Saida inclui:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Distribuicao de probabilidade Policy"}),"\n",(0,s.jsx)(n.li,{children:"Predicao Value"}),"\n",(0,s.jsx)(n.li,{children:"Predicao de territorio, etc."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"kata-debug-print",children:"kata-debug-print"}),"\n",(0,s.jsx)(n.p,{children:"Mostrar informacao detalhada de busca, para depuracao:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kata-debug-print move Q16\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ajuste-de-forca",children:"Ajuste de Forca"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# Definir numero maximo de visitas\nkata-set-param maxVisits 100      # Mais fraco\nkata-set-param maxVisits 10000    # Mais forte\n\n# Definir tempo de pensamento\nkata-time-settings main 60 0      # 60 segundos por lado\nkata-time-settings byoyomi 30 5   # Byoyomi 30 segundos 5 periodos\n"})}),"\n",(0,s.jsx)(n.h2,{id:"uso-do-analysis-engine",children:"Uso do Analysis Engine"}),"\n",(0,s.jsx)(n.p,{children:"Analysis Engine e outro modo de operacao fornecido pelo KataGo, usando formato JSON para comunicacao, mais adequado para uso programatico."}),"\n",(0,s.jsx)(n.h3,{id:"iniciar-analysis-engine",children:"Iniciar Analysis Engine"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"katago analysis -model /path/to/model.bin.gz -config /path/to/config.cfg\n"})}),"\n",(0,s.jsx)(n.h3,{id:"fluxo-de-uso-basico",children:"Fluxo de Uso Basico"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Seu programa \u2500\u2500Requisicao JSON\u2500\u2500> KataGo Analysis Engine \u2500\u2500Resposta JSON\u2500\u2500> Seu programa\n"})}),"\n",(0,s.jsx)(n.h3,{id:"formato-de-requisicao",children:"Formato de Requisicao"}),"\n",(0,s.jsx)(n.p,{children:"Cada requisicao e um objeto JSON, deve ocupar uma linha:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "query1",\n  "moves": [["B","Q16"],["W","D4"],["B","Q4"]],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [2]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"descricao-dos-campos-de-requisicao",children:"Descricao dos Campos de Requisicao"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Campo"}),(0,s.jsx)(n.th,{children:"Obrigatorio"}),(0,s.jsx)(n.th,{children:"Descricao"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"id"})}),(0,s.jsx)(n.td,{children:"Sim"}),(0,s.jsx)(n.td,{children:"ID da consulta, usado para corresponder resposta"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"moves"})}),(0,s.jsx)(n.td,{children:"Nao"}),(0,s.jsxs)(n.td,{children:["Sequencia de jogadas ",(0,s.jsx)(n.code,{children:'[["B","Q16"],["W","D4"]]'})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"initialStones"})}),(0,s.jsx)(n.td,{children:"Nao"}),(0,s.jsxs)(n.td,{children:["Pedras iniciais ",(0,s.jsx)(n.code,{children:'[["B","Q16"],["W","D4"]]'})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"rules"})}),(0,s.jsx)(n.td,{children:"Sim"}),(0,s.jsx)(n.td,{children:"Nome das regras"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"komi"})}),(0,s.jsx)(n.td,{children:"Sim"}),(0,s.jsx)(n.td,{children:"Komi"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boardXSize"})}),(0,s.jsx)(n.td,{children:"Sim"}),(0,s.jsx)(n.td,{children:"Largura do tabuleiro"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boardYSize"})}),(0,s.jsx)(n.td,{children:"Sim"}),(0,s.jsx)(n.td,{children:"Altura do tabuleiro"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"analyzeTurns"})}),(0,s.jsx)(n.td,{children:"Nao"}),(0,s.jsx)(n.td,{children:"Numero de jogadas a analisar (0-indexed)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"maxVisits"})}),(0,s.jsx)(n.td,{children:"Nao"}),(0,s.jsx)(n.td,{children:"Sobrescreve maxVisits do arquivo de configuracao"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"formato-de-resposta",children:"Formato de Resposta"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "query1",\n  "turnNumber": 2,\n  "moveInfos": [\n    {\n      "move": "D16",\n      "visits": 1234,\n      "winrate": 0.5678,\n      "scoreMean": 3.21,\n      "scoreStdev": 15.4,\n      "scoreLead": 3.21,\n      "prior": 0.0892,\n      "order": 0,\n      "pv": ["D16", "Q10", "R14"]\n    }\n  ],\n  "rootInfo": {\n    "visits": 5000,\n    "winrate": 0.5234,\n    "scoreLead": 2.1,\n    "scoreSelfplay": 2.3\n  },\n  "ownership": [...],\n  "policy": [...]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"descricao-dos-campos-de-resposta",children:"Descricao dos Campos de Resposta"}),"\n",(0,s.jsx)(n.h4,{id:"campos-moveinfos",children:"Campos moveInfos"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Campo"}),(0,s.jsx)(n.th,{children:"Descricao"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"move"})}),(0,s.jsx)(n.td,{children:"Coordenada da jogada"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"visits"})}),(0,s.jsx)(n.td,{children:"Numero de visitas de busca para esta jogada"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"winrate"})}),(0,s.jsx)(n.td,{children:"Taxa de vitoria (0-1, para jogador atual)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreMean"})}),(0,s.jsx)(n.td,{children:"Diferenca de pontos final esperada"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreStdev"})}),(0,s.jsx)(n.td,{children:"Desvio padrao de pontos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreLead"})}),(0,s.jsx)(n.td,{children:"Pontos de lideranca atual"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"prior"})}),(0,s.jsx)(n.td,{children:"Probabilidade prior da rede neural"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"order"})}),(0,s.jsx)(n.td,{children:"Ranking (0 = melhor)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"pv"})}),(0,s.jsx)(n.td,{children:"Sequencia de variacao principal"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"campos-rootinfo",children:"Campos rootInfo"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Campo"}),(0,s.jsx)(n.th,{children:"Descricao"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"visits"})}),(0,s.jsx)(n.td,{children:"Numero total de visitas de busca"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"winrate"})}),(0,s.jsx)(n.td,{children:"Taxa de vitoria da posicao atual"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreLead"})}),(0,s.jsx)(n.td,{children:"Pontos de lideranca atual"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"scoreSelfplay"})}),(0,s.jsx)(n.td,{children:"Pontos esperados em self-play"})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"campo-ownership",children:"Campo ownership"}),"\n",(0,s.jsx)(n.p,{children:"Array unidimensional, comprimento boardXSize x boardYSize, cada valor entre -1 e 1:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-1: Previsto como territorio branco"}),"\n",(0,s.jsx)(n.li,{children:"+1: Previsto como territorio preto"}),"\n",(0,s.jsx)(n.li,{children:"0: Indefinido/fronteira"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"opcoes-de-consulta-avancadas",children:"Opcoes de Consulta Avancadas"}),"\n",(0,s.jsx)(n.h4,{id:"obter-mapa-de-territorio",children:"Obter Mapa de Territorio"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "ownership_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "includeOwnership": true\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"obter-distribuicao-policy",children:"Obter Distribuicao Policy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "policy_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "includePolicy": true\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"limitar-numero-de-jogadas-reportadas",children:"Limitar Numero de Jogadas Reportadas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "limited_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "maxMoves": 5\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"analisar-jogadas-especificas",children:"Analisar Jogadas Especificas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "specific_moves",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "allowMoves": [["B","Q16"],["B","D4"],["B","Q4"]]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"exemplo-completo-integracao-python",children:"Exemplo Completo: Integracao Python"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import subprocess\nimport json\n\nclass KataGoEngine:\n    def __init__(self, katago_path, model_path, config_path):\n        self.process = subprocess.Popen(\n            [katago_path, 'analysis', '-model', model_path, '-config', config_path],\n            stdin=subprocess.PIPE,\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE,\n            text=True\n        )\n        self.query_id = 0\n\n    def analyze(self, moves, rules='chinese', komi=7.5):\n        self.query_id += 1\n\n        query = {\n            'id': f'query_{self.query_id}',\n            'moves': moves,\n            'rules': rules,\n            'komi': komi,\n            'boardXSize': 19,\n            'boardYSize': 19,\n            'analyzeTurns': [len(moves)],\n            'maxVisits': 500,\n            'includeOwnership': True\n        }\n\n        # Enviar consulta\n        self.process.stdin.write(json.dumps(query) + '\\n')\n        self.process.stdin.flush()\n\n        # Ler resposta\n        response_line = self.process.stdout.readline()\n        return json.loads(response_line)\n\n    def close(self):\n        self.process.terminate()\n\n\n# Exemplo de uso\nengine = KataGoEngine(\n    '/usr/local/bin/katago',\n    '/path/to/model.bin.gz',\n    '/path/to/config.cfg'\n)\n\n# Analisar uma posicao\nresult = engine.analyze([\n    ['B', 'Q16'],\n    ['W', 'D4'],\n    ['B', 'Q4'],\n    ['W', 'D16']\n])\n\n# Imprimir melhor jogada\nbest_move = result['moveInfos'][0]\nprint(f\"Melhor jogada: {best_move['move']}\")\nprint(f\"Taxa de vitoria: {best_move['winrate']:.1%}\")\nprint(f\"Pontos de lideranca: {best_move['scoreLead']:.1f}\")\n\nengine.close()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"exemplo-completo-integracao-nodejs",children:"Exemplo Completo: Integracao Node.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const { spawn } = require('child_process');\nconst readline = require('readline');\n\nclass KataGoEngine {\n  constructor(katagoPath, modelPath, configPath) {\n    this.process = spawn(katagoPath, [\n      'analysis',\n      '-model', modelPath,\n      '-config', configPath\n    ]);\n\n    this.rl = readline.createInterface({\n      input: this.process.stdout,\n      crlfDelay: Infinity\n    });\n\n    this.queryId = 0;\n    this.callbacks = new Map();\n\n    this.rl.on('line', (line) => {\n      try {\n        const response = JSON.parse(line);\n        const callback = this.callbacks.get(response.id);\n        if (callback) {\n          callback(response);\n          this.callbacks.delete(response.id);\n        }\n      } catch (e) {\n        console.error('Parse error:', e);\n      }\n    });\n  }\n\n  analyze(moves, options = {}) {\n    return new Promise((resolve) => {\n      this.queryId++;\n      const id = `query_${this.queryId}`;\n\n      const query = {\n        id,\n        moves,\n        rules: options.rules || 'chinese',\n        komi: options.komi || 7.5,\n        boardXSize: 19,\n        boardYSize: 19,\n        analyzeTurns: [moves.length],\n        maxVisits: options.maxVisits || 500,\n        includeOwnership: true\n      };\n\n      this.callbacks.set(id, resolve);\n      this.process.stdin.write(JSON.stringify(query) + '\\n');\n    });\n  }\n\n  close() {\n    this.process.kill();\n  }\n}\n\n// Exemplo de uso\nasync function main() {\n  const engine = new KataGoEngine(\n    '/usr/local/bin/katago',\n    '/path/to/model.bin.gz',\n    '/path/to/config.cfg'\n  );\n\n  const result = await engine.analyze([\n    ['B', 'Q16'],\n    ['W', 'D4'],\n    ['B', 'Q4']\n  ]);\n\n  console.log('Melhor jogada:', result.moveInfos[0].move);\n  console.log('Taxa de vitoria:', (result.moveInfos[0].winrate * 100).toFixed(1) + '%');\n\n  engine.close();\n}\n\nmain();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sistema-de-coordenadas",children:"Sistema de Coordenadas"}),"\n",(0,s.jsx)(n.p,{children:"KataGo usa o sistema de coordenadas padrao de Go:"}),"\n",(0,s.jsx)(n.h3,{id:"coordenadas-por-letras",children:"Coordenadas por Letras"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"   A B C D E F G H J K L M N O P Q R S T\n19 . . . . . . . . . . . . . . . . . . . 19\n18 . . . . . . . . . . . . . . . . . . . 18\n17 . . . . . . . . . . . . . . . . . . . 17\n16 . . . + . . . . . + . . . . . + . . . 16\n15 . . . . . . . . . . . . . . . . . . . 15\n...\n 4 . . . + . . . . . + . . . . . + . . .  4\n 3 . . . . . . . . . . . . . . . . . . .  3\n 2 . . . . . . . . . . . . . . . . . . .  2\n 1 . . . . . . . . . . . . . . . . . . .  1\n   A B C D E F G H J K L M N O P Q R S T\n"})}),"\n",(0,s.jsx)(n.p,{children:"Nota: Nao ha letra I (para evitar confusao com numero 1)."}),"\n",(0,s.jsx)(n.h3,{id:"conversao-de-coordenadas",children:"Conversao de Coordenadas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def coord_to_gtp(x, y, board_size=19):\n    """Converter coordenadas (x, y) para formato GTP"""\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    return f"{letters[x]}{board_size - y}"\n\ndef gtp_to_coord(gtp_coord, board_size=19):\n    """Converter coordenadas GTP para (x, y)"""\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    x = letters.index(gtp_coord[0].upper())\n    y = board_size - int(gtp_coord[1:])\n    return (x, y)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"padroes-de-uso-comuns",children:"Padroes de Uso Comuns"}),"\n",(0,s.jsx)(n.h3,{id:"modo-de-jogo",children:"Modo de Jogo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Iniciar modo GTP\nkatago gtp -model model.bin.gz -config gtp.cfg\n\n# Sequencia de comandos GTP\nboardsize 19\nkomi 7.5\nplay black Q16\ngenmove white\nplay black Q4\ngenmove white\n...\n"})}),"\n",(0,s.jsx)(n.h3,{id:"modo-de-analise-em-lote",children:"Modo de Analise em Lote"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Analisar todas as jogadas de um jogo\nsgf_moves = parse_sgf('game.sgf')\n\nfor i in range(len(sgf_moves)):\n    result = engine.analyze(sgf_moves[:i+1])\n    winrate = result['rootInfo']['winrate']\n    print(f\"Jogada {i+1}: Taxa de vitoria {winrate:.1%}\")\n"})}),"\n",(0,s.jsx)(n.h3,{id:"modo-de-analise-em-tempo-real",children:"Modo de Analise em Tempo Real"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"kata-analyze"})," para analise em tempo real:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kata-analyze black 1000 50\n"})}),"\n",(0,s.jsx)(n.p,{children:"Mostrara resultados de analise a cada 0.5 segundos, ate atingir 1000 visitas."}),"\n",(0,s.jsx)(n.h2,{id:"otimizacao-de-desempenho",children:"Otimizacao de Desempenho"}),"\n",(0,s.jsx)(n.h3,{id:"configuracao-de-busca",children:"Configuracao de Busca"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Aumentar volume de busca para melhorar precisao\nmaxVisits = 1000\n\n# Ou usar controle de tempo\nmaxTime = 10  # Pensar no maximo 10 segundos por jogada\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configuracao-multi-thread",children:"Configuracao Multi-thread"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Numero de threads CPU\nnumSearchThreads = 8\n\n# Processamento em lote GPU\nnumNNServerThreadsPerModel = 2\nnnMaxBatchSize = 16\n"})}),"\n",(0,s.jsx)(n.h3,{id:"configuracao-de-memoria",children:"Configuracao de Memoria"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Reduzir uso de memoria\nnnCacheSizePowerOfTwo = 20  # Padrao 23\n"})}),"\n",(0,s.jsx)(n.h2,{id:"proximos-passos",children:"Proximos Passos"}),"\n",(0,s.jsxs)(n.p,{children:["Apos entender o uso de comandos, se voce quiser pesquisar profundamente a implementacao do KataGo, continue lendo ",(0,s.jsx)(n.a,{href:"/www.weiqi.kids/pt/docs/for-engineers/katago-source/architecture",children:"Arquitetura do Codigo-fonte"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}}}]);