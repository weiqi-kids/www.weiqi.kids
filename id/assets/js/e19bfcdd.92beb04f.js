"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[4621],{97522(n,e,a){a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"tech/deep-dive/distributed-training","title":"Arsitektur Pelatihan Terdistribusi","description":"Arsitektur sistem pelatihan terdistribusi KataGo, Self-play Worker, dan alur rilis model","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/tech/deep-dive/distributed-training.md","sourceDirName":"tech/deep-dive","slug":"/tech/deep-dive/distributed-training","permalink":"/id/docs/tech/deep-dive/distributed-training","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tech/deep-dive/distributed-training.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Arsitektur Pelatihan Terdistribusi","description":"Arsitektur sistem pelatihan terdistribusi KataGo, Self-play Worker, dan alur rilis model"},"sidebar":"tutorialSidebar","previous":{"title":"Backend GPU dan Optimasi","permalink":"/id/docs/tech/deep-dive/gpu-optimization"},"next":{"title":"Kuantisasi Model dan Deployment","permalink":"/id/docs/tech/deep-dive/quantization-deploy"}}');var s=a(62615),r=a(30416);const t={sidebar_position:7,title:"Arsitektur Pelatihan Terdistribusi",description:"Arsitektur sistem pelatihan terdistribusi KataGo, Self-play Worker, dan alur rilis model"},l="Arsitektur Pelatihan Terdistribusi",d={},o=[{value:"Gambaran Arsitektur Sistem",id:"gambaran-arsitektur-sistem",level:2},{value:"Self-play Worker",id:"self-play-worker",level:2},{value:"Alur Kerja",id:"alur-kerja",level:3},{value:"Pembuatan Pertandingan",id:"pembuatan-pertandingan",level:3},{value:"Format Data",id:"format-data",level:3},{value:"Server Pengumpulan Data",id:"server-pengumpulan-data",level:2},{value:"Fungsi",id:"fungsi",level:3},{value:"Validasi Data",id:"validasi-data",level:3},{value:"Struktur Penyimpanan Data",id:"struktur-penyimpanan-data",level:3},{value:"Alur Pelatihan",id:"alur-pelatihan",level:2},{value:"Loop Pelatihan",id:"loop-pelatihan",level:3},{value:"Fungsi Loss",id:"fungsi-loss",level:3},{value:"Evaluasi dan Rilis Model",id:"evaluasi-dan-rilis-model",level:2},{value:"Evaluasi Elo",id:"evaluasi-elo",level:3},{value:"Kondisi Rilis",id:"kondisi-rilis",level:3},{value:"Penamaan Versi Model",id:"penamaan-versi-model",level:3},{value:"Panduan Partisipasi KataGo Training",id:"panduan-partisipasi-katago-training",level:2},{value:"Kebutuhan Sistem",id:"kebutuhan-sistem",level:3},{value:"Instalasi Worker",id:"instalasi-worker",level:3},{value:"File Konfigurasi",id:"file-konfigurasi",level:3},{value:"Monitoring Kontribusi",id:"monitoring-kontribusi",level:3},{value:"Statistik Pelatihan",id:"statistik-pelatihan",level:2},{value:"Milestone Pelatihan KataGo",id:"milestone-pelatihan-katago",level:3},{value:"Kontributor Komunitas",id:"kontributor-komunitas",level:3},{value:"Topik Lanjutan",id:"topik-lanjutan",level:2},{value:"Curriculum Learning",id:"curriculum-learning",level:3},{value:"Augmentasi Data",id:"augmentasi-data",level:3},{value:"Bacaan Lanjutan",id:"bacaan-lanjutan",level:2}];function u(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"arsitektur-pelatihan-terdistribusi",children:"Arsitektur Pelatihan Terdistribusi"})}),"\n",(0,s.jsx)(e.p,{children:"Artikel ini memperkenalkan arsitektur sistem pelatihan terdistribusi KataGo, menjelaskan bagaimana model terus ditingkatkan melalui daya komputasi komunitas global."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"gambaran-arsitektur-sistem",children:"Gambaran Arsitektur Sistem"}),"\n",(0,s.jsx)(e.mermaid,{value:'flowchart TB\n    subgraph Workers["Self-play Workers"]\n        W1["Worker 1<br/>(Self-play)"]\n        W2["Worker 2<br/>(Self-play)"]\n        WN["Worker N<br/>(Self-play)"]\n    end\n\n    W1 --\x3e Server\n    W2 --\x3e Server\n    WN --\x3e Server\n\n    Server["Server Pelatihan<br/>(Data Collection)"]\n    Server --\x3e Training["Proses Pelatihan<br/>(Model Training)"]\n    Training --\x3e Release["Rilis Model Baru<br/>(Model Release)"]'}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"self-play-worker",children:"Self-play Worker"}),"\n",(0,s.jsx)(e.h3,{id:"alur-kerja",children:"Alur Kerja"}),"\n",(0,s.jsx)(e.p,{children:"Setiap Worker menjalankan loop berikut:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def self_play_worker():\n    while True:\n        # 1. Unduh model terbaru\n        model = download_latest_model()\n\n        # 2. Jalankan self-play\n        games = []\n        for _ in range(batch_size):\n            game = play_game(model)\n            games.append(game)\n\n        # 3. Upload data pertandingan\n        upload_games(games)\n\n        # 4. Periksa model baru\n        if new_model_available():\n            model = download_latest_model()\n"})}),"\n",(0,s.jsx)(e.h3,{id:"pembuatan-pertandingan",children:"Pembuatan Pertandingan"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def play_game(model):\n    \"\"\"Jalankan satu pertandingan self-play\"\"\"\n    game = Game()\n    positions = []\n\n    while not game.is_terminal():\n        # Pencarian MCTS\n        mcts = MCTS(model, num_simulations=800)\n        policy = mcts.get_policy(game.state)\n\n        # Tambahkan noise Dirichlet (meningkatkan eksplorasi)\n        if game.move_count < 30:\n            policy = add_dirichlet_noise(policy)\n\n        # Pilih aksi berdasarkan policy\n        if game.move_count < 30:\n            # 30 langkah pertama gunakan sampling temperatur\n            action = sample_with_temperature(policy, temp=1.0)\n        else:\n            # Setelahnya pilihan greedy\n            action = np.argmax(policy)\n\n        # Catat data pelatihan\n        positions.append({\n            'state': game.state.copy(),\n            'policy': policy,\n            'player': game.current_player\n        })\n\n        game.play(action)\n\n    # Tandai menang/kalah\n    winner = game.get_winner()\n    for pos in positions:\n        pos['value'] = 1.0 if pos['player'] == winner else -1.0\n\n    return positions\n"})}),"\n",(0,s.jsx)(e.h3,{id:"format-data",children:"Format Data"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "version": 1,\n  "rules": "chinese",\n  "komi": 7.5,\n  "board_size": 19,\n  "positions": [\n    {\n      "move_number": 0,\n      "board": "...",\n      "policy": [0.01, 0.02, ...],\n      "value": 1.0,\n      "score": 2.5\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"server-pengumpulan-data",children:"Server Pengumpulan Data"}),"\n",(0,s.jsx)(e.h3,{id:"fungsi",children:"Fungsi"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Menerima data pertandingan"}),": Kumpulkan pertandingan dari Workers"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Validasi data"}),": Periksa format, filter anomali"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Penyimpanan data"}),": Tulis ke dataset pelatihan"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Monitoring statistik"}),": Lacak jumlah pertandingan, status Worker"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"validasi-data",children:"Validasi Data"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def validate_game(game_data):\n    \"\"\"Validasi data pertandingan\"\"\"\n    checks = [\n        len(game_data['positions']) > 10,  # Minimal langkah\n        len(game_data['positions']) < 500,  # Maksimal langkah\n        all(is_valid_policy(p['policy']) for p in game_data['positions']),\n        game_data['rules'] in SUPPORTED_RULES,\n    ]\n    return all(checks)\n"})}),"\n",(0,s.jsx)(e.h3,{id:"struktur-penyimpanan-data",children:"Struktur Penyimpanan Data"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"training_data/\n\u251c\u2500\u2500 run_001/\n\u2502   \u251c\u2500\u2500 games_00001.npz\n\u2502   \u251c\u2500\u2500 games_00002.npz\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 run_002/\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 current/\n    \u2514\u2500\u2500 latest_games.npz\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"alur-pelatihan",children:"Alur Pelatihan"}),"\n",(0,s.jsx)(e.h3,{id:"loop-pelatihan",children:"Loop Pelatihan"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def training_loop():\n    model = load_model()\n    optimizer = Adam(model.parameters(), lr=1e-4)\n\n    for epoch in range(num_epochs):\n        # Muat data pertandingan terbaru\n        dataset = load_recent_games(num_games=100000)\n        dataloader = DataLoader(dataset, batch_size=256, shuffle=True)\n\n        for batch in dataloader:\n            states = batch['states']\n            target_policies = batch['policies']\n            target_values = batch['values']\n\n            # Forward pass\n            pred_policies, pred_values = model(states)\n\n            # Hitung loss\n            policy_loss = cross_entropy(pred_policies, target_policies)\n            value_loss = mse_loss(pred_values, target_values)\n            loss = policy_loss + value_loss\n\n            # Backward pass\n            optimizer.zero_grad()\n            loss.backward()\n            optimizer.step()\n\n        # Evaluasi berkala\n        if epoch % 100 == 0:\n            evaluate_model(model)\n"})}),"\n",(0,s.jsx)(e.h3,{id:"fungsi-loss",children:"Fungsi Loss"}),"\n",(0,s.jsx)(e.p,{children:"KataGo menggunakan beberapa komponen loss:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def compute_loss(predictions, targets):\n    # Policy loss (cross entropy)\n    policy_loss = F.cross_entropy(\n        predictions['policy'],\n        targets['policy']\n    )\n\n    # Value loss (MSE)\n    value_loss = F.mse_loss(\n        predictions['value'],\n        targets['value']\n    )\n\n    # Score loss (MSE)\n    score_loss = F.mse_loss(\n        predictions['score'],\n        targets['score']\n    )\n\n    # Ownership loss (MSE)\n    ownership_loss = F.mse_loss(\n        predictions['ownership'],\n        targets['ownership']\n    )\n\n    # Weighted sum\n    total_loss = (\n        1.0 * policy_loss +\n        1.0 * value_loss +\n        0.5 * score_loss +\n        0.5 * ownership_loss\n    )\n\n    return total_loss\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"evaluasi-dan-rilis-model",children:"Evaluasi dan Rilis Model"}),"\n",(0,s.jsx)(e.h3,{id:"evaluasi-elo",children:"Evaluasi Elo"}),"\n",(0,s.jsx)(e.p,{children:"Model baru perlu bertanding melawan model lama untuk mengevaluasi kekuatan:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def evaluate_new_model(new_model, baseline_model, num_games=400):\n    \"\"\"Evaluasi Elo model baru\"\"\"\n    wins = 0\n    losses = 0\n    draws = 0\n\n    for _ in range(num_games // 2):\n        # Model baru main Hitam\n        result = play_game(new_model, baseline_model)\n        if result == 'black_wins':\n            wins += 1\n        elif result == 'white_wins':\n            losses += 1\n        else:\n            draws += 1\n\n        # Model baru main Putih\n        result = play_game(baseline_model, new_model)\n        if result == 'white_wins':\n            wins += 1\n        elif result == 'black_wins':\n            losses += 1\n        else:\n            draws += 1\n\n    # Hitung selisih Elo\n    win_rate = (wins + 0.5 * draws) / num_games\n    elo_diff = 400 * math.log10(win_rate / (1 - win_rate))\n\n    return elo_diff\n"})}),"\n",(0,s.jsx)(e.h3,{id:"kondisi-rilis",children:"Kondisi Rilis"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'def should_release_model(new_model, current_best):\n    """Tentukan apakah merilis model baru"""\n    elo_diff = evaluate_new_model(new_model, current_best)\n\n    # Kondisi: Peningkatan Elo melebihi threshold\n    if elo_diff > 20:\n        return True\n\n    # Atau: Mencapai jumlah langkah pelatihan tertentu\n    if training_steps % 10000 == 0:\n        return True\n\n    return False\n'})}),"\n",(0,s.jsx)(e.h3,{id:"penamaan-versi-model",children:"Penamaan Versi Model"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"kata1-b18c384nbt-s{steps}-d{data}.bin.gz\n\nContoh:\nkata1-b18c384nbt-s9996604416-d4316597426.bin.gz\n\u251c\u2500\u2500 kata1: Seri pelatihan\n\u251c\u2500\u2500 b18c384nbt: Arsitektur (18 blok residual, 384 channel)\n\u251c\u2500\u2500 s9996604416: Langkah pelatihan\n\u2514\u2500\u2500 d4316597426: Jumlah data pelatihan\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"panduan-partisipasi-katago-training",children:"Panduan Partisipasi KataGo Training"}),"\n",(0,s.jsx)(e.h3,{id:"kebutuhan-sistem",children:"Kebutuhan Sistem"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Item"}),(0,s.jsx)(e.th,{children:"Kebutuhan Minimum"}),(0,s.jsx)(e.th,{children:"Kebutuhan yang Disarankan"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"GPU"}),(0,s.jsx)(e.td,{children:"GTX 1060"}),(0,s.jsx)(e.td,{children:"RTX 3060+"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"VRAM"}),(0,s.jsx)(e.td,{children:"4 GB"}),(0,s.jsx)(e.td,{children:"8 GB+"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Jaringan"}),(0,s.jsx)(e.td,{children:"10 Mbps"}),(0,s.jsx)(e.td,{children:"50 Mbps+"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Waktu operasi"}),(0,s.jsx)(e.td,{children:"Berjalan terus"}),(0,s.jsx)(e.td,{children:"24/7"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"instalasi-worker",children:"Instalasi Worker"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Unduh Worker\nwget https://katagotraining.org/download/worker\n\n# Konfigurasi\n./katago contribute -config contribute.cfg\n\n# Mulai berkontribusi\n./katago contribute\n"})}),"\n",(0,s.jsx)(e.h3,{id:"file-konfigurasi",children:"File Konfigurasi"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# contribute.cfg\n\n# Pengaturan server\nserverUrl = https://katagotraining.org/\n\n# Username (untuk statistik)\nusername = your_username\n\n# Pengaturan GPU\nnumNNServerThreadsPerModel = 1\nnnMaxBatchSize = 16\n\n# Pengaturan pertandingan\ngamesPerBatch = 25\n"})}),"\n",(0,s.jsx)(e.h3,{id:"monitoring-kontribusi",children:"Monitoring Kontribusi"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Lihat statistik\nhttps://katagotraining.org/contributions/\n\n# Log lokal\ntail -f katago_contribute.log\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"statistik-pelatihan",children:"Statistik Pelatihan"}),"\n",(0,s.jsx)(e.h3,{id:"milestone-pelatihan-katago",children:"Milestone Pelatihan KataGo"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Waktu"}),(0,s.jsx)(e.th,{children:"Jumlah Pertandingan"}),(0,s.jsx)(e.th,{children:"Elo"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"2019.06"}),(0,s.jsx)(e.td,{children:"10M"}),(0,s.jsx)(e.td,{children:"Awal"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"2020.01"}),(0,s.jsx)(e.td,{children:"100M"}),(0,s.jsx)(e.td,{children:"+500"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"2021.01"}),(0,s.jsx)(e.td,{children:"500M"}),(0,s.jsx)(e.td,{children:"+800"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"2022.01"}),(0,s.jsx)(e.td,{children:"1B"}),(0,s.jsx)(e.td,{children:"+1000"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"2024.01"}),(0,s.jsx)(e.td,{children:"5B+"}),(0,s.jsx)(e.td,{children:"+1200"})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"kontributor-komunitas",children:"Kontributor Komunitas"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Ratusan kontributor global"}),"\n",(0,s.jsx)(e.li,{children:"Total ribuan GPU-tahun daya komputasi"}),"\n",(0,s.jsx)(e.li,{children:"Berjalan terus 24/7"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"topik-lanjutan",children:"Topik Lanjutan"}),"\n",(0,s.jsx)(e.h3,{id:"curriculum-learning",children:"Curriculum Learning"}),"\n",(0,s.jsx)(e.p,{children:"Tingkatkan kesulitan pelatihan secara bertahap:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"def get_training_config(training_step):\n    if training_step < 100000:\n        return {'board_size': 9, 'visits': 200}\n    elif training_step < 500000:\n        return {'board_size': 13, 'visits': 400}\n    else:\n        return {'board_size': 19, 'visits': 800}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"augmentasi-data",children:"Augmentasi Data"}),"\n",(0,s.jsx)(e.p,{children:"Gunakan simetri papan untuk meningkatkan jumlah data:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'def augment_position(state, policy):\n    """8 transformasi simetri"""\n    augmented = []\n\n    for rotation in [0, 90, 180, 270]:\n        for flip in [False, True]:\n            aug_state = transform(state, rotation, flip)\n            aug_policy = transform_policy(policy, rotation, flip)\n            augmented.append((aug_state, aug_policy))\n\n    return augmented\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"bacaan-lanjutan",children:"Bacaan Lanjutan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../training",children:"Analisis Mekanisme Pelatihan KataGo"})," \u2014 Detail alur pelatihan"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../contributing",children:"Berkontribusi ke Komunitas Open Source"})," \u2014 Cara berkontribusi kode"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../evaluation",children:"Evaluasi dan Benchmark"})," \u2014 Metode evaluasi model"]}),"\n"]})]})}function c(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},30416(n,e,a){a.d(e,{R:()=>t,x:()=>l});var i=a(59471);const s={},r=i.createContext(s);function t(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);