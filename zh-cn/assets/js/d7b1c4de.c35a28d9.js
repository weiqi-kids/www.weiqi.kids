"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[1131],{92879(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"for-engineers/deep-dive/evaluation","title":"\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5","description":"\u56f4\u68cb AI \u7684 Elo \u8bc4\u5206\u7cfb\u7edf\u3001\u5bf9\u5c40\u6d4b\u8bd5\u4e0e\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u65b9\u6cd5","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/for-engineers/deep-dive/evaluation.md","sourceDirName":"for-engineers/deep-dive","slug":"/for-engineers/deep-dive/evaluation","permalink":"/zh-cn/docs/for-engineers/deep-dive/evaluation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/for-engineers/deep-dive/evaluation.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5","description":"\u56f4\u68cb AI \u7684 Elo \u8bc4\u5206\u7cfb\u7edf\u3001\u5bf9\u5c40\u6d4b\u8bd5\u4e0e\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u65b9\u6cd5"},"sidebar":"tutorialSidebar","previous":{"title":"\u6a21\u578b\u91cf\u5316\u4e0e\u90e8\u7f72","permalink":"/zh-cn/docs/for-engineers/deep-dive/quantization-deploy"},"next":{"title":"\u81ea\u5b9a\u4e49\u89c4\u5219\u4e0e\u53d8\u4f53","permalink":"/zh-cn/docs/for-engineers/deep-dive/custom-rules"}}');var r=s(62615),i=s(30416);const t={sidebar_position:9,title:"\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5",description:"\u56f4\u68cb AI \u7684 Elo \u8bc4\u5206\u7cfb\u7edf\u3001\u5bf9\u5c40\u6d4b\u8bd5\u4e0e\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\u65b9\u6cd5"},d="\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5",c={},a=[{value:"Elo \u8bc4\u5206\u7cfb\u7edf",id:"elo-\u8bc4\u5206\u7cfb\u7edf",level:2},{value:"\u57fa\u672c\u6982\u5ff5",id:"\u57fa\u672c\u6982\u5ff5",level:3},{value:"Elo \u5dee\u8ddd\u4e0e\u80dc\u7387\u5bf9\u7167",id:"elo-\u5dee\u8ddd\u4e0e\u80dc\u7387\u5bf9\u7167",level:3},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",level:3},{value:"\u5bf9\u5c40\u6d4b\u8bd5",id:"\u5bf9\u5c40\u6d4b\u8bd5",level:2},{value:"\u6d4b\u8bd5\u6846\u67b6",id:"\u6d4b\u8bd5\u6846\u67b6",level:3},{value:"\u7edf\u8ba1\u663e\u8457\u6027",id:"\u7edf\u8ba1\u663e\u8457\u6027",level:3},{value:"\u5efa\u8bae\u6d4b\u8bd5\u5c40\u6570",id:"\u5efa\u8bae\u6d4b\u8bd5\u5c40\u6570",level:3},{value:"SPRT\uff08\u5e8f\u8d2f\u6982\u7387\u6bd4\u68c0\u9a8c\uff09",id:"sprt\u5e8f\u8d2f\u6982\u7387\u6bd4\u68c0\u9a8c",level:2},{value:"\u6982\u5ff5",id:"\u6982\u5ff5",level:3},{value:"KataGo \u57fa\u51c6\u6d4b\u8bd5",id:"katago-\u57fa\u51c6\u6d4b\u8bd5",level:2},{value:"\u6267\u884c\u57fa\u51c6\u6d4b\u8bd5",id:"\u6267\u884c\u57fa\u51c6\u6d4b\u8bd5",level:3},{value:"\u8f93\u51fa\u89e3\u8bfb",id:"\u8f93\u51fa\u89e3\u8bfb",level:3},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807",level:3},{value:"\u68cb\u529b\u8bc4\u4f30",id:"\u68cb\u529b\u8bc4\u4f30",level:2},{value:"\u4eba\u7c7b\u68cb\u529b\u5bf9\u7167",id:"\u4eba\u7c7b\u68cb\u529b\u5bf9\u7167",level:3},{value:"\u4e3b\u8981 AI \u7684 Elo",id:"\u4e3b\u8981-ai-\u7684-elo",level:3},{value:"\u6d4b\u8bd5\u5bf9\u7167",id:"\u6d4b\u8bd5\u5bf9\u7167",level:3},{value:"\u6027\u80fd\u76d1\u63a7",id:"\u6027\u80fd\u76d1\u63a7",level:2},{value:"\u6301\u7eed\u76d1\u63a7",id:"\u6301\u7eed\u76d1\u63a7",level:3},{value:"\u6027\u80fd\u74f6\u9888\u8bca\u65ad",id:"\u6027\u80fd\u74f6\u9888\u8bca\u65ad",level:3},{value:"\u81ea\u52a8\u5316\u6d4b\u8bd5",id:"\u81ea\u52a8\u5316\u6d4b\u8bd5",level:2},{value:"CI/CD \u96c6\u6210",id:"cicd-\u96c6\u6210",level:3},{value:"\u56de\u5f52\u6d4b\u8bd5",id:"\u56de\u5f52\u6d4b\u8bd5",level:3},{value:"\u5ef6\u4f38\u9605\u8bfb",id:"\u5ef6\u4f38\u9605\u8bfb",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5",children:"\u8bc4\u4f30\u4e0e\u57fa\u51c6\u6d4b\u8bd5"})}),"\n",(0,r.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u8bc4\u4f30\u56f4\u68cb AI \u7684\u68cb\u529b\u4e0e\u6027\u80fd\uff0c\u5305\u62ec Elo \u8bc4\u5206\u7cfb\u7edf\u3001\u5bf9\u5c40\u6d4b\u8bd5\u65b9\u6cd5\u4e0e\u6807\u51c6\u57fa\u51c6\u6d4b\u8bd5\u3002"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"elo-\u8bc4\u5206\u7cfb\u7edf",children:"Elo \u8bc4\u5206\u7cfb\u7edf"}),"\n",(0,r.jsx)(n.h3,{id:"\u57fa\u672c\u6982\u5ff5",children:"\u57fa\u672c\u6982\u5ff5"}),"\n",(0,r.jsx)(n.p,{children:"Elo \u8bc4\u5206\u662f\u8861\u91cf\u76f8\u5bf9\u68cb\u529b\u7684\u6807\u51c6\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u9884\u671f\u80dc\u7387 E_A = 1 / (1 + 10^((R_B - R_A) / 400))\n\n\u65b0 Elo = \u65e7 Elo + K \xd7 (\u5b9e\u9645\u7ed3\u679c - \u9884\u671f\u7ed3\u679c)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"elo-\u5dee\u8ddd\u4e0e\u80dc\u7387\u5bf9\u7167",children:"Elo \u5dee\u8ddd\u4e0e\u80dc\u7387\u5bf9\u7167"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Elo \u5dee\u8ddd"}),(0,r.jsx)(n.th,{children:"\u5f3a\u8005\u80dc\u7387"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"0"}),(0,r.jsx)(n.td,{children:"50%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"100"}),(0,r.jsx)(n.td,{children:"64%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"200"}),(0,r.jsx)(n.td,{children:"76%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"400"}),(0,r.jsx)(n.td,{children:"91%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"800"}),(0,r.jsx)(n.td,{children:"99%"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u5b9e\u73b0",children:"\u5b9e\u73b0"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def expected_score(rating_a, rating_b):\n    """\u8ba1\u7b97 A \u5bf9 B \u7684\u9884\u671f\u5f97\u5206"""\n    return 1 / (1 + 10 ** ((rating_b - rating_a) / 400))\n\ndef update_elo(rating, expected, actual, k=32):\n    """\u66f4\u65b0 Elo \u8bc4\u5206"""\n    return rating + k * (actual - expected)\n\ndef calculate_elo_diff(wins, losses, draws):\n    """\u4ece\u5bf9\u6218\u7ed3\u679c\u8ba1\u7b97 Elo \u5dee\u8ddd"""\n    total = wins + losses + draws\n    win_rate = (wins + 0.5 * draws) / total\n\n    if win_rate <= 0 or win_rate >= 1:\n        return float(\'inf\') if win_rate >= 1 else float(\'-inf\')\n\n    return 400 * math.log10(win_rate / (1 - win_rate))\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\u5bf9\u5c40\u6d4b\u8bd5",children:"\u5bf9\u5c40\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.h3,{id:"\u6d4b\u8bd5\u6846\u67b6",children:"\u6d4b\u8bd5\u6846\u67b6"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"class MatchTester:\n    def __init__(self, engine_a, engine_b):\n        self.engine_a = engine_a\n        self.engine_b = engine_b\n        self.results = {'a_wins': 0, 'b_wins': 0, 'draws': 0}\n\n    def run_match(self, num_games=400):\n        \"\"\"\u6267\u884c\u5bf9\u6218\u6d4b\u8bd5\"\"\"\n        for i in range(num_games):\n            # \u4ea4\u66ff\u5148\u540e\u624b\n            if i % 2 == 0:\n                black, white = self.engine_a, self.engine_b\n                a_is_black = True\n            else:\n                black, white = self.engine_b, self.engine_a\n                a_is_black = False\n\n            # \u8fdb\u884c\u5bf9\u5c40\n            result = self.play_game(black, white)\n\n            # \u8bb0\u5f55\u7ed3\u679c\n            if result == 'black':\n                if a_is_black:\n                    self.results['a_wins'] += 1\n                else:\n                    self.results['b_wins'] += 1\n            elif result == 'white':\n                if a_is_black:\n                    self.results['b_wins'] += 1\n                else:\n                    self.results['a_wins'] += 1\n            else:\n                self.results['draws'] += 1\n\n        return self.results\n\n    def play_game(self, black_engine, white_engine):\n        \"\"\"\u8fdb\u884c\u4e00\u5c40\u5bf9\u5c40\"\"\"\n        game = Game()\n\n        while not game.is_terminal():\n            if game.current_player == 'black':\n                move = black_engine.get_move(game.state)\n            else:\n                move = white_engine.get_move(game.state)\n\n            game.play(move)\n\n        return game.get_winner()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7edf\u8ba1\u663e\u8457\u6027",children:"\u7edf\u8ba1\u663e\u8457\u6027"}),"\n",(0,r.jsx)(n.p,{children:"\u786e\u4fdd\u6d4b\u8bd5\u7ed3\u679c\u5177\u6709\u7edf\u8ba1\u610f\u4e49\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from scipy import stats\n\ndef calculate_confidence_interval(wins, total, confidence=0.95):\n    """\u8ba1\u7b97\u80dc\u7387\u7684\u7f6e\u4fe1\u533a\u95f4"""\n    p = wins / total\n    z = stats.norm.ppf((1 + confidence) / 2)\n    margin = z * math.sqrt(p * (1 - p) / total)\n\n    return (p - margin, p + margin)\n\n# \u793a\u4f8b\nwins, total = 220, 400\nci_low, ci_high = calculate_confidence_interval(wins, total)\nprint(f"\u80dc\u7387: {wins/total:.1%}, 95% CI: [{ci_low:.1%}, {ci_high:.1%}]")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5efa\u8bae\u6d4b\u8bd5\u5c40\u6570",children:"\u5efa\u8bae\u6d4b\u8bd5\u5c40\u6570"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u9884\u671f Elo \u5dee"}),(0,r.jsx)(n.th,{children:"\u5efa\u8bae\u5c40\u6570"}),(0,r.jsx)(n.th,{children:"\u7f6e\u4fe1\u5ea6"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:">100"}),(0,r.jsx)(n.td,{children:"100"}),(0,r.jsx)(n.td,{children:"95%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"50-100"}),(0,r.jsx)(n.td,{children:"200"}),(0,r.jsx)(n.td,{children:"95%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"20-50"}),(0,r.jsx)(n.td,{children:"400"}),(0,r.jsx)(n.td,{children:"95%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"<20"}),(0,r.jsx)(n.td,{children:"1000+"}),(0,r.jsx)(n.td,{children:"95%"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sprt\u5e8f\u8d2f\u6982\u7387\u6bd4\u68c0\u9a8c",children:"SPRT\uff08\u5e8f\u8d2f\u6982\u7387\u6bd4\u68c0\u9a8c\uff09"}),"\n",(0,r.jsx)(n.h3,{id:"\u6982\u5ff5",children:"\u6982\u5ff5"}),"\n",(0,r.jsx)(n.p,{children:"\u65e0\u9700\u56fa\u5b9a\u5c40\u6570\uff0c\u6839\u636e\u7d2f\u79ef\u7ed3\u679c\u52a8\u6001\u51b3\u5b9a\u662f\u5426\u505c\u6b62\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def sprt(wins, losses, elo0=0, elo1=10, alpha=0.05, beta=0.05):\n    \"\"\"\n    \u5e8f\u8d2f\u6982\u7387\u6bd4\u68c0\u9a8c\n\n    elo0: \u96f6\u5047\u8bbe\u7684 Elo \u5dee\uff08\u901a\u5e38\u4e3a 0\uff09\n    elo1: \u5907\u62e9\u5047\u8bbe\u7684 Elo \u5dee\uff08\u901a\u5e38\u4e3a 5-20\uff09\n    alpha: \u5047\u9633\u6027\u7387\n    beta: \u5047\u9634\u6027\u7387\n    \"\"\"\n    if wins + losses == 0:\n        return 'continue'\n\n    # \u8ba1\u7b97\u5bf9\u6570\u4f3c\u7136\u6bd4\n    p0 = expected_score(elo1, 0)  # H1 \u4e0b\u7684\u9884\u671f\u80dc\u7387\n    p1 = expected_score(elo0, 0)  # H0 \u4e0b\u7684\u9884\u671f\u80dc\u7387\n\n    llr = (\n        wins * math.log(p0 / p1) +\n        losses * math.log((1 - p0) / (1 - p1))\n    )\n\n    # \u51b3\u7b56\u8fb9\u754c\n    lower = math.log(beta / (1 - alpha))\n    upper = math.log((1 - beta) / alpha)\n\n    if llr <= lower:\n        return 'reject'  # H0 \u88ab\u62d2\u7edd\uff0c\u65b0\u6a21\u578b\u8f83\u5dee\n    elif llr >= upper:\n        return 'accept'  # H0 \u88ab\u63a5\u53d7\uff0c\u65b0\u6a21\u578b\u8f83\u597d\n    else:\n        return 'continue'  # \u7ee7\u7eed\u6d4b\u8bd5\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"katago-\u57fa\u51c6\u6d4b\u8bd5",children:"KataGo \u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.h3,{id:"\u6267\u884c\u57fa\u51c6\u6d4b\u8bd5",children:"\u6267\u884c\u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u57fa\u672c\u6d4b\u8bd5\nkatago benchmark -model model.bin.gz\n\n# \u6307\u5b9a\u8bbf\u95ee\u6b21\u6570\nkatago benchmark -model model.bin.gz -v 1000\n\n# \u8be6\u7ec6\u8f93\u51fa\nkatago benchmark -model model.bin.gz -v 1000 -t 8\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u8f93\u51fa\u89e3\u8bfb",children:"\u8f93\u51fa\u89e3\u8bfb"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"KataGo Benchmark Results\n========================\n\nConfiguration:\n  Model: kata-b18c384.bin.gz\n  Backend: CUDA\n  Threads: 8\n  Visits: 1000\n\nPerformance:\n  NN evals/second: 2847.3\n  Playouts/second: 4521.8\n  Avg time per move: 0.221 seconds\n\nMemory:\n  GPU memory usage: 2.1 GB\n  System memory: 1.3 GB\n\nQuality metrics:\n  Policy accuracy: 0.612\n  Value accuracy: 0.891\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u6307\u6807"}),(0,r.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(n.th,{children:"\u826f\u597d\u6570\u503c"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"NN evals/sec"}),(0,r.jsx)(n.td,{children:"\u795e\u7ecf\u7f51\u7edc\u8bc4\u4f30\u901f\u5ea6"}),(0,r.jsx)(n.td,{children:">1000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Playouts/sec"}),(0,r.jsx)(n.td,{children:"MCTS \u6a21\u62df\u901f\u5ea6"}),(0,r.jsx)(n.td,{children:">2000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GPU \u5229\u7528\u7387"}),(0,r.jsx)(n.td,{children:"GPU \u4f7f\u7528\u6548\u7387"}),(0,r.jsx)(n.td,{children:">80%"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\u68cb\u529b\u8bc4\u4f30",children:"\u68cb\u529b\u8bc4\u4f30"}),"\n",(0,r.jsx)(n.h3,{id:"\u4eba\u7c7b\u68cb\u529b\u5bf9\u7167",children:"\u4eba\u7c7b\u68cb\u529b\u5bf9\u7167"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"AI Elo"}),(0,r.jsx)(n.th,{children:"\u4eba\u7c7b\u68cb\u529b"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~1500"}),(0,r.jsx)(n.td,{children:"\u4e1a\u4f59 1 \u6bb5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~2000"}),(0,r.jsx)(n.td,{children:"\u4e1a\u4f59 5 \u6bb5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~2500"}),(0,r.jsx)(n.td,{children:"\u804c\u4e1a\u521d\u6bb5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~3000"}),(0,r.jsx)(n.td,{children:"\u804c\u4e1a\u4e94\u6bb5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~3500"}),(0,r.jsx)(n.td,{children:"\u4e16\u754c\u51a0\u519b\u7ea7"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"~4000+"}),(0,r.jsx)(n.td,{children:"\u8d85\u8d8a\u4eba\u7c7b"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u4e3b\u8981-ai-\u7684-elo",children:"\u4e3b\u8981 AI \u7684 Elo"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"AI"}),(0,r.jsx)(n.th,{children:"Elo\uff08\u4f30\u8ba1\uff09"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"KataGo (\u6700\u65b0)"}),(0,r.jsx)(n.td,{children:"~5000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AlphaGo Zero"}),(0,r.jsx)(n.td,{children:"~5000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Leela Zero"}),(0,r.jsx)(n.td,{children:"~4500"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u7edd\u827a"}),(0,r.jsx)(n.td,{children:"~4800"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u6d4b\u8bd5\u5bf9\u7167",children:"\u6d4b\u8bd5\u5bf9\u7167"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def estimate_human_rank(ai_model, test_positions):\n    """\u4f30\u8ba1 AI \u76f8\u5f53\u4e8e\u7684\u4eba\u7c7b\u68cb\u529b"""\n    # \u4f7f\u7528\u6807\u51c6\u6d4b\u8bd5\u9898\u76ee\n    correct = 0\n    for pos in test_positions:\n        ai_move = ai_model.get_best_move(pos[\'state\'])\n        if ai_move == pos[\'best_move\']:\n            correct += 1\n\n    accuracy = correct / len(test_positions)\n\n    # \u51c6\u786e\u7387\u5bf9\u7167\u8868\n    if accuracy > 0.9:\n        return "\u804c\u4e1a\u7ea7"\n    elif accuracy > 0.7:\n        return "\u4e1a\u4f59 5 \u6bb5+"\n    elif accuracy > 0.5:\n        return "\u4e1a\u4f59 1-5 \u6bb5"\n    else:\n        return "\u4e1a\u4f59\u7ea7\u4ee5\u4e0b"\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\u6027\u80fd\u76d1\u63a7",children:"\u6027\u80fd\u76d1\u63a7"}),"\n",(0,r.jsx)(n.h3,{id:"\u6301\u7eed\u76d1\u63a7",children:"\u6301\u7eed\u76d1\u63a7"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import time\nimport psutil\nimport GPUtil\n\nclass PerformanceMonitor:\n    def __init__(self):\n        self.metrics = []\n\n    def sample(self):\n        """\u91c7\u6837\u5f53\u524d\u6027\u80fd\u6307\u6807"""\n        gpus = GPUtil.getGPUs()\n\n        self.metrics.append({\n            \'timestamp\': time.time(),\n            \'cpu_percent\': psutil.cpu_percent(),\n            \'memory_percent\': psutil.virtual_memory().percent,\n            \'gpu_util\': gpus[0].load * 100 if gpus else 0,\n            \'gpu_memory\': gpus[0].memoryUsed if gpus else 0,\n        })\n\n    def report(self):\n        """\u751f\u6210\u62a5\u544a"""\n        if not self.metrics:\n            return\n\n        avg_cpu = sum(m[\'cpu_percent\'] for m in self.metrics) / len(self.metrics)\n        avg_gpu = sum(m[\'gpu_util\'] for m in self.metrics) / len(self.metrics)\n\n        print(f"\u5e73\u5747 CPU \u4f7f\u7528\u7387: {avg_cpu:.1f}%")\n        print(f"\u5e73\u5747 GPU \u4f7f\u7528\u7387: {avg_gpu:.1f}%")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u6027\u80fd\u74f6\u9888\u8bca\u65ad",children:"\u6027\u80fd\u74f6\u9888\u8bca\u65ad"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u75c7\u72b6"}),(0,r.jsx)(n.th,{children:"\u53ef\u80fd\u539f\u56e0"}),(0,r.jsx)(n.th,{children:"\u89e3\u51b3\u65b9\u6848"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CPU 100%\uff0cGPU \u4f4e"}),(0,r.jsx)(n.td,{children:"\u641c\u7d22\u7ebf\u7a0b\u4e0d\u8db3"}),(0,r.jsx)(n.td,{children:"\u589e\u52a0 numSearchThreads"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GPU 100%\uff0c\u8f93\u51fa\u6162"}),(0,r.jsx)(n.td,{children:"\u6279\u91cf\u592a\u5c0f"}),(0,r.jsx)(n.td,{children:"\u589e\u52a0 nnMaxBatchSize"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u5185\u5b58\u4e0d\u8db3"}),(0,r.jsx)(n.td,{children:"\u6a21\u578b\u592a\u5927"}),(0,r.jsx)(n.td,{children:"\u4f7f\u7528\u8f83\u5c0f\u6a21\u578b"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u901f\u5ea6\u4e0d\u7a33\u5b9a"}),(0,r.jsx)(n.td,{children:"\u6e29\u5ea6\u8fc7\u9ad8"}),(0,r.jsx)(n.td,{children:"\u6539\u5584\u6563\u70ed"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\u81ea\u52a8\u5316\u6d4b\u8bd5",children:"\u81ea\u52a8\u5316\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.h3,{id:"cicd-\u96c6\u6210",children:"CI/CD \u96c6\u6210"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# .github/workflows/benchmark.yml\nname: Benchmark\n\non:\n  push:\n    branches: [main]\n\njobs:\n  benchmark:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Run benchmark\n        run: |\n          ./katago benchmark -model model.bin.gz -v 500 > results.txt\n\n      - name: Check performance\n        run: |\n          playouts=$(grep "Playouts/second" results.txt | awk \'{print $2}\')\n          if (( $(echo "$playouts < 1000" | bc -l) )); then\n            echo "Performance regression detected!"\n            exit 1\n          fi\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u56de\u5f52\u6d4b\u8bd5",children:"\u56de\u5f52\u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def regression_test(new_model, baseline_model, threshold=0.95):\n    """\u68c0\u67e5\u65b0\u6a21\u578b\u662f\u5426\u6709\u6027\u80fd\u56de\u5f52"""\n    # \u6d4b\u8bd5\u51c6\u786e\u7387\n    new_accuracy = test_accuracy(new_model)\n    baseline_accuracy = test_accuracy(baseline_model)\n\n    if new_accuracy < baseline_accuracy * threshold:\n        raise Exception(f"\u51c6\u786e\u7387\u56de\u5f52: {new_accuracy:.3f} < {baseline_accuracy:.3f}")\n\n    # \u6d4b\u8bd5\u901f\u5ea6\n    new_speed = benchmark_speed(new_model)\n    baseline_speed = benchmark_speed(baseline_model)\n\n    if new_speed < baseline_speed * threshold:\n        raise Exception(f"\u901f\u5ea6\u56de\u5f52: {new_speed:.1f} < {baseline_speed:.1f}")\n\n    print("\u56de\u5f52\u6d4b\u8bd5\u901a\u8fc7")\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"\u5ef6\u4f38\u9605\u8bfb",children:"\u5ef6\u4f38\u9605\u8bfb"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../training",children:"KataGo \u8bad\u7ec3\u673a\u5236\u89e3\u6790"})," \u2014 \u6a21\u578b\u662f\u5982\u4f55\u8bad\u7ec3\u7684"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../distributed-training",children:"\u5206\u5e03\u5f0f\u8bad\u7ec3\u67b6\u6784"})," \u2014 \u5927\u89c4\u6a21\u8bc4\u4f30"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../gpu-optimization",children:"GPU \u540e\u7aef\u4e0e\u4f18\u5316"})," \u2014 \u6027\u80fd\u8c03\u4f18"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},30416(e,n,s){s.d(n,{R:()=>t,x:()=>d});var l=s(59471);const r={},i=l.createContext(r);function t(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);