"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[6637],{7550(e,n,a){a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"alphago/board-representation","title":"Representacion del Estado del Tablero","description":"Desde matrices bidimensionales hasta planos de caracteristicas de redes neuronales, una comprension profunda de como la IA de Go \\"ve\\" el tablero","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/alphago/06-board-representation.mdx","sourceDirName":"alphago","slug":"/alphago/board-representation","permalink":"/es/docs/alphago/board-representation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alphago/06-board-representation.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Representacion del Estado del Tablero","description":"Desde matrices bidimensionales hasta planos de caracteristicas de redes neuronales, una comprension profunda de como la IA de Go \\"ve\\" el tablero","keywords":["Representacion del tablero","Zobrist Hashing","Union-Find","Codificacion de caracteristicas","Planos de caracteristicas de AlphaGo"]},"sidebar":"tutorialSidebar","previous":{"title":"Los Limites de los Metodos Tradicionales","permalink":"/es/docs/alphago/traditional-limits"},"next":{"title":"Policy Network en detalle","permalink":"/es/docs/alphago/policy-network"}}');var s=a(62615),i=a(30416),t=a(45695);const o={sidebar_position:7,title:"Representacion del Estado del Tablero",description:'Desde matrices bidimensionales hasta planos de caracteristicas de redes neuronales, una comprension profunda de como la IA de Go "ve" el tablero',keywords:["Representacion del tablero","Zobrist Hashing","Union-Find","Codificacion de caracteristicas","Planos de caracteristicas de AlphaGo"]},l="Representacion del Estado del Tablero",d={},c=[{value:"Representacion con Matriz Bidimensional: La Forma Mas Intuitiva",id:"representacion-con-matriz-bidimensional-la-forma-mas-intuitiva",level:2},{value:"Concepto Basico",id:"concepto-basico",level:3},{value:"Sistema de Coordenadas",id:"sistema-de-coordenadas",level:3},{value:"1. Coordenadas Numericas (para programacion)",id:"1-coordenadas-numericas-para-programacion",level:4},{value:"2. Coordenadas Letra-Numero (para registros de partidas)",id:"2-coordenadas-letra-numero-para-registros-de-partidas",level:4},{value:"Funciones de Conversion de Coordenadas",id:"funciones-de-conversion-de-coordenadas",level:3},{value:"Analisis de Complejidad Espacial",id:"analisis-de-complejidad-espacial",level:3},{value:"Operaciones Basicas",id:"operaciones-basicas",level:3},{value:"Zobrist Hashing: Identificacion Rapida de Posiciones Duplicadas",id:"zobrist-hashing-identificacion-rapida-de-posiciones-duplicadas",level:2},{value:"Contexto del Problema",id:"contexto-del-problema",level:3},{value:"Principio de Zobrist Hashing",id:"principio-de-zobrist-hashing",level:3},{value:"Tabla de Numeros Aleatorios",id:"tabla-de-numeros-aleatorios",level:3},{value:"Propiedades de la Operacion XOR",id:"propiedades-de-la-operacion-xor",level:3},{value:"Implementacion",id:"implementacion",level:3},{value:"Ventaja de la Actualizacion Incremental",id:"ventaja-de-la-actualizacion-incremental",level:3},{value:"Probabilidad de Colision",id:"probabilidad-de-colision",level:3},{value:"Representacion de Cadenas (Union-Find): Problema de Conectividad",id:"representacion-de-cadenas-union-find-problema-de-conectividad",level:2},{value:"Concepto de Cadena",id:"concepto-de-cadena",level:3},{value:"\xbfPor Que Se Necesita Gestion Eficiente de Cadenas?",id:"por-que-se-necesita-gestion-eficiente-de-cadenas",level:3},{value:"Estructura de Datos Union-Find",id:"estructura-de-datos-union-find",level:3},{value:"Complejidad Temporal",id:"complejidad-temporal",level:3},{value:"Aplicacion de Union-Find en Go",id:"aplicacion-de-union-find-en-go",level:3},{value:"Calculo de Libertades",id:"calculo-de-libertades",level:3},{value:"Evolucion de la Codificacion de Caracteristicas",id:"evolucion-de-la-codificacion-de-caracteristicas",level:2},{value:"Caracteristicas Manuales de GNU Go",id:"caracteristicas-manuales-de-gnu-go",level:3},{value:"Los 48 Planos de Caracteristicas de AlphaGo",id:"los-48-planos-de-caracteristicas-de-alphago",level:3},{value:"Clasificacion de los 48 Planos",id:"clasificacion-de-los-48-planos",level:3},{value:"Los 17 Planos de Caracteristicas de AlphaGo Zero",id:"los-17-planos-de-caracteristicas-de-alphago-zero",level:3},{value:"La Simplicidad de los 17 Planos",id:"la-simplicidad-de-los-17-planos",level:3},{value:"Visualizacion de Planos de Caracteristicas",id:"visualizacion-de-planos-de-caracteristicas",level:3},{value:"Procesamiento de Simetria: 8 Transformaciones",id:"procesamiento-de-simetria-8-transformaciones",level:2},{value:"Simetrias del Go",id:"simetrias-del-go",level:3},{value:"Representacion Matematica",id:"representacion-matematica",level:3},{value:"Implementacion del Codigo",id:"implementacion-del-codigo",level:3},{value:"Aumento de Datos",id:"aumento-de-datos",level:3},{value:"Uso de Simetria en Inferencia",id:"uso-de-simetria-en-inferencia",level:3},{value:"Resumen de Metodos de Representacion del Tablero",id:"resumen-de-metodos-de-representacion-del-tablero",level:2},{value:"Correspondencia con Animaciones",id:"correspondencia-con-animaciones",level:2},{value:"Lecturas Adicionales",id:"lecturas-adicionales",level:2},{value:"Referencias",id:"referencias",level:2}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"representacion-del-estado-del-tablero",children:"Representacion del Estado del Tablero"})}),"\n",(0,s.jsxs)(n.p,{children:["Antes de disenar una IA de Go, primero debemos resolver un problema fundamental: ",(0,s.jsx)(n.strong,{children:'\xbfComo hacer que la computadora "entienda" el tablero?'})]}),"\n",(0,s.jsx)(n.p,{children:"Este problema parece simple, pero involucra estructuras de datos, algoritmos y diseno de entrada para redes neuronales en multiples niveles. Este articulo comenzara desde la matriz bidimensional mas basica, introduciendo gradualmente varios metodos de representacion del tablero utilizados en IA de Go, y finalmente explicara como AlphaGo codifica el tablero en un formato que las redes neuronales pueden procesar."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"representacion-con-matriz-bidimensional-la-forma-mas-intuitiva",children:"Representacion con Matriz Bidimensional: La Forma Mas Intuitiva"}),"\n",(0,s.jsx)(n.h3,{id:"concepto-basico",children:"Concepto Basico"}),"\n",(0,s.jsxs)(n.p,{children:["El tablero de Go es una cuadricula de 19\xd719, y la forma mas intuitiva de representarlo es usando una ",(0,s.jsx)(n.strong,{children:"matriz bidimensional"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import numpy as np\n\n# Constantes del tablero\nBOARD_SIZE = 19\nEMPTY = 0\nBLACK = 1\nWHITE = 2\n\n# Inicializar tablero vacio\nboard = np.zeros((BOARD_SIZE, BOARD_SIZE), dtype=np.int8)\n\n# Colocar piedra: negra en D4 (3, 3)\nboard[3, 3] = BLACK\n\n# Colocar piedra: blanca en Q16 (15, 3)\nboard[15, 3] = WHITE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sistema-de-coordenadas",children:"Sistema de Coordenadas"}),"\n",(0,s.jsx)(n.p,{children:"El Go usa dos sistemas de coordenadas comunes:"}),"\n",(0,s.jsx)(n.h4,{id:"1-coordenadas-numericas-para-programacion",children:"1. Coordenadas Numericas (para programacion)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18\n0   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n1   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n2   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n3   .  .  .  \u25cf  .  .  .  .  .  +  .  .  .  .  .  \u25cb  .  .  .\n...\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-coordenadas-letra-numero-para-registros-de-partidas",children:"2. Coordenadas Letra-Numero (para registros de partidas)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    A  B  C  D  E  F  G  H  J  K  L  M  N  O  P  Q  R  S  T\n19  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n18  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n17  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n16  .  .  .  \u25cf  .  .  .  .  .  +  .  .  .  .  .  \u25cb  .  .  .\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:'Nota: Las coordenadas de letras omiten "I" (para evitar confusion con el numero 1).'}),"\n",(0,s.jsx)(n.h3,{id:"funciones-de-conversion-de-coordenadas",children:"Funciones de Conversion de Coordenadas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def coord_to_index(coord):\n    """\n    Convertir coordenadas de partida a indices de matriz\n    Ejemplo: \'D4\' -> (3, 15)\n    """\n    letters = \'ABCDEFGHJKLMNOPQRST\'  # Omite I\n    col = letters.index(coord[0].upper())\n    row = BOARD_SIZE - int(coord[1:])\n    return row, col\n\n\ndef index_to_coord(row, col):\n    """\n    Convertir indices de matriz a coordenadas de partida\n    Ejemplo: (3, 15) -> \'Q16\'\n    """\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    return f"{letters[col]}{BOARD_SIZE - row}"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"analisis-de-complejidad-espacial",children:"Analisis de Complejidad Espacial"}),"\n",(0,s.jsx)(n.p,{children:"Complejidad espacial de la representacion con matriz bidimensional:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Representacion"}),(0,s.jsx)(n.th,{children:"Tamano por celda"}),(0,s.jsx)(n.th,{children:"Espacio total"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int8"})}),(0,s.jsx)(n.td,{children:"1 byte"}),(0,s.jsx)(n.td,{children:"361 bytes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32"})}),(0,s.jsx)(n.td,{children:"4 bytes"}),(0,s.jsx)(n.td,{children:"1.4 KB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"float64"})}),(0,s.jsx)(n.td,{children:"8 bytes"}),(0,s.jsx)(n.td,{children:"2.9 KB"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Para las computadoras modernas, esta memoria no es un problema. Sin embargo, cuando se necesita almacenar muchos estados del tablero (como en el arbol de busqueda MCTS), usar ",(0,s.jsx)(n.code,{children:"int8"})," puede reducir significativamente el uso de memoria."]}),"\n",(0,s.jsx)(n.h3,{id:"operaciones-basicas",children:"Operaciones Basicas"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class Board:\n    def __init__(self, size=19):\n        self.size = size\n        self.board = np.zeros((size, size), dtype=np.int8)\n        self.current_player = BLACK\n        self.ko_point = None  # Punto de ko prohibido\n        self.move_history = []\n\n    def is_valid_move(self, row, col):\n        """Verificar si un movimiento es legal"""\n        # 1. La posicion esta dentro del tablero\n        if not (0 <= row < self.size and 0 <= col < self.size):\n            return False\n\n        # 2. La posicion esta vacia\n        if self.board[row, col] != EMPTY:\n            return False\n\n        # 3. No es un punto de ko prohibido\n        if self.ko_point == (row, col):\n            return False\n\n        # 4. No es suicidio (a menos que pueda capturar)\n        # ... necesita verificacion mas compleja\n\n        return True\n\n    def place_stone(self, row, col):\n        """Colocar piedra"""\n        if not self.is_valid_move(row, col):\n            return False\n\n        self.board[row, col] = self.current_player\n        self.move_history.append((row, col))\n\n        # Procesar capturas\n        captures = self._remove_captured_stones(row, col)\n\n        # Actualizar punto de ko\n        self._update_ko(row, col, captures)\n\n        # Cambiar jugador\n        self.current_player = WHITE if self.current_player == BLACK else BLACK\n\n        return True\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"zobrist-hashing-identificacion-rapida-de-posiciones-duplicadas",children:"Zobrist Hashing: Identificacion Rapida de Posiciones Duplicadas"}),"\n",(0,s.jsx)(n.h3,{id:"contexto-del-problema",children:"Contexto del Problema"}),"\n",(0,s.jsx)(n.p,{children:'En la IA de Go, frecuentemente necesitamos determinar "si dos posiciones son iguales":'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Regla de ko"}),": No se puede devolver la posicion al estado del movimiento anterior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Triple ko"}),": Manejo de reglas especiales"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tabla de transposicion"}),": Recordar posiciones ya buscadas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cache de red neuronal"}),": Evitar calculos repetidos"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Si comparamos celda por celda cada vez, necesitamos tiempo O(361). \xbfHay un metodo mas rapido?"}),"\n",(0,s.jsx)(n.h3,{id:"principio-de-zobrist-hashing",children:"Principio de Zobrist Hashing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Zobrist Hashing"})," (tambien llamado Zobrist Keys) es un metodo de hash ingenioso, propuesto por Albert Zobrist en 1970. Su idea central es:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Pregenerar un ",(0,s.jsx)(n.strong,{children:"numero aleatorio"}),' para cada combinacion de "posicion \xd7 color"']}),"\n",(0,s.jsxs)(n.li,{children:["El valor hash del tablero = ",(0,s.jsx)(n.strong,{children:"XOR"})," de los numeros aleatorios de todas las posiciones con piedras"]}),"\n",(0,s.jsx)(n.li,{children:"Colocar/capturar piedras solo requiere una operacion XOR para actualizar el valor hash"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tabla-de-numeros-aleatorios",children:"Tabla de Numeros Aleatorios"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import numpy as np\n\n# Generar tabla de numeros aleatorios\n# Usar semilla fija para reproducibilidad\nnp.random.seed(42)\n\n# Un numero aleatorio para cada posicion, cada color\n# zobrist[color][row][col]\nzobrist_table = np.random.randint(\n    0, 2**64,\n    size=(3, BOARD_SIZE, BOARD_SIZE),  # 3: EMPTY, BLACK, WHITE\n    dtype=np.uint64\n)\n\n# Numero aleatorio para quien juega\nzobrist_player = np.random.randint(0, 2**64, dtype=np.uint64)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"propiedades-de-la-operacion-xor",children:"Propiedades de la Operacion XOR"}),"\n",(0,s.jsx)(n.p,{children:"La operacion XOR tiene varias propiedades importantes que la hacen muy adecuada para esta aplicacion:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reflexividad"}),": A \u2295 A = 0 (el mismo numero XOR consigo mismo es 0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reversibilidad"}),": A \u2295 B \u2295 B = A (XOR dos veces es igual a nada)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Conmutatividad"}),": A \u2295 B = B \u2295 A"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Asociatividad"}),": (A \u2295 B) \u2295 C = A \u2295 (B \u2295 C)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Esto significa:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Colocar piedra: ",(0,s.jsx)(n.code,{children:"hash ^= zobrist[color][row][col]"})]}),"\n",(0,s.jsxs)(n.li,{children:["Capturar piedra: ",(0,s.jsx)(n.code,{children:"hash ^= zobrist[color][row][col]"})," (\xa1la misma operacion!)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"implementacion",children:"Implementacion"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class ZobristBoard:\n    def __init__(self, size=19):\n        self.size = size\n        self.board = np.zeros((size, size), dtype=np.int8)\n        self.current_player = BLACK\n        self.hash = np.uint64(0)\n\n        # Inicializar tabla de numeros aleatorios\n        self._init_zobrist_table()\n\n    def _init_zobrist_table(self):\n        np.random.seed(12345)\n        self.zobrist = np.random.randint(\n            0, 2**64,\n            size=(3, self.size, self.size),\n            dtype=np.uint64\n        )\n        self.zobrist_player = np.random.randint(0, 2**64, dtype=np.uint64)\n\n    def place_stone(self, row, col, color):\n        """Colocar piedra y actualizar valor hash"""\n        # Remover estado anterior (si hay piedra)\n        old_color = self.board[row, col]\n        if old_color != EMPTY:\n            self.hash ^= self.zobrist[old_color, row, col]\n\n        # Agregar nueva piedra\n        self.board[row, col] = color\n        self.hash ^= self.zobrist[color, row, col]\n\n    def remove_stone(self, row, col):\n        """Capturar piedra y actualizar valor hash"""\n        color = self.board[row, col]\n        if color != EMPTY:\n            self.hash ^= self.zobrist[color, row, col]\n            self.board[row, col] = EMPTY\n\n    def switch_player(self):\n        """Cambiar jugador y actualizar valor hash"""\n        self.hash ^= self.zobrist_player\n        self.current_player = WHITE if self.current_player == BLACK else BLACK\n\n    def get_hash(self):\n        """Obtener valor hash de la posicion actual"""\n        return self.hash\n'})}),"\n",(0,s.jsx)(n.h3,{id:"ventaja-de-la-actualizacion-incremental",children:"Ventaja de la Actualizacion Incremental"}),"\n",(0,s.jsx)(n.p,{children:"Usando Zobrist Hashing, actualizar el valor hash solo requiere tiempo O(1):"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operacion"}),(0,s.jsx)(n.th,{children:"Comparacion tradicional"}),(0,s.jsx)(n.th,{children:"Zobrist"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Comparar dos posiciones"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Actualizar despues de colocar"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Actualizar despues de capturar"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(k), k es el numero de capturas"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"probabilidad-de-colision",children:"Probabilidad de Colision"}),"\n",(0,s.jsx)(n.p,{children:"Usando hash de 64 bits, la probabilidad de colision es extremadamente baja:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"P(colision) \u2248 n\xb2 / 2^65"})}),"\n",(0,s.jsx)(n.p,{children:"Donde n es el numero de posiciones diferentes. Incluso con mil millones de posiciones, la probabilidad de colision es solo aproximadamente 10^-3."}),"\n",(0,s.jsx)(n.p,{children:"En la practica, muchos programas de Go usan Zobrist Hashing de 64 bits sin verificar colisiones, porque la probabilidad de colision es lo suficientemente baja como para ignorarla."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"representacion-de-cadenas-union-find-problema-de-conectividad",children:"Representacion de Cadenas (Union-Find): Problema de Conectividad"}),"\n",(0,s.jsx)(n.h3,{id:"concepto-de-cadena",children:"Concepto de Cadena"}),"\n",(0,s.jsxs)(n.p,{children:["En Go, una ",(0,s.jsx)(n.strong,{children:"cadena"}),' (String o Chain) se refiere a un grupo de piedras del mismo color conectadas. Las "libertades" de la cadena determinan su vida o muerte.']}),"\n",(0,s.jsx)(t.tO,{size:200,stones:[{x:3,y:3,color:"black"},{x:4,y:3,color:"black"},{x:5,y:3,color:"black"},{x:4,y:4,color:"black"},{x:6,y:3,color:"white"},{x:6,y:4,color:"white"}],labels:[{x:4,y:3,text:"A"}]}),"\n",(0,s.jsx)(n.p,{children:"En la figura anterior, cuatro piedras negras forman una cadena, y el numero de libertades de esta cadena determina su vida o muerte."}),"\n",(0,s.jsx)(n.h3,{id:"por-que-se-necesita-gestion-eficiente-de-cadenas",children:"\xbfPor Que Se Necesita Gestion Eficiente de Cadenas?"}),"\n",(0,s.jsx)(n.p,{children:"Cada movimiento puede:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Crear"})," una nueva cadena"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fusionar"})," multiples cadenas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reducir"})," las libertades de cadenas enemigas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Capturar"})," cadenas sin libertades"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Estas operaciones necesitan ejecutarse eficientemente, porque en MCTS, pueden necesitarse decenas de miles de simulaciones de movimientos por segundo."}),"\n",(0,s.jsx)(n.h3,{id:"estructura-de-datos-union-find",children:"Estructura de Datos Union-Find"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Union-Find"}),' (tambien llamado Disjoint Set Union, DSU) es una estructura de datos clasica para manejar problemas de "conectividad":']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class UnionFind:\n    def __init__(self, size):\n        # parent[i] apunta al padre de i\n        # Si parent[i] = i, entonces i es raiz\n        self.parent = list(range(size))\n        self.rank = [0] * size\n\n    def find(self, x):\n        """\n        Encontrar el nodo raiz del conjunto al que pertenece x (con compresion de camino)\n        """\n        if self.parent[x] != x:\n            self.parent[x] = self.find(self.parent[x])  # Compresion de camino\n        return self.parent[x]\n\n    def union(self, x, y):\n        """\n        Fusionar los conjuntos de x e y (con union por rango)\n        """\n        root_x = self.find(x)\n        root_y = self.find(y)\n\n        if root_x == root_y:\n            return  # Ya estan en el mismo conjunto\n\n        # Union por rango: conectar el arbol mas pequeno al mas grande\n        if self.rank[root_x] < self.rank[root_y]:\n            self.parent[root_x] = root_y\n        elif self.rank[root_x] > self.rank[root_y]:\n            self.parent[root_y] = root_x\n        else:\n            self.parent[root_y] = root_x\n            self.rank[root_x] += 1\n'})}),"\n",(0,s.jsx)(n.h3,{id:"complejidad-temporal",children:"Complejidad Temporal"}),"\n",(0,s.jsxs)(n.p,{children:["La complejidad temporal de Union-Find se expresa usando la ",(0,s.jsx)(n.strong,{children:"funcion de Ackermann inversa"})," \u03b1(n):"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operacion"}),(0,s.jsx)(n.th,{children:"Complejidad temporal"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"find"}),(0,s.jsx)(n.td,{children:"O(\u03b1(n)) \u2248 O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"union"}),(0,s.jsx)(n.td,{children:"O(\u03b1(n)) \u2248 O(1)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\u03b1(n) crece extremadamente lento, para cualquier n practico, \u03b1(n) \u2264 4. Por lo tanto, puede considerarse tiempo constante."}),"\n",(0,s.jsx)(n.h3,{id:"aplicacion-de-union-find-en-go",children:"Aplicacion de Union-Find en Go"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class GoStringManager:\n    def __init__(self, size=19):\n        self.size = size\n        num_points = size * size\n\n        # Estructura Union-Find\n        self.parent = list(range(num_points))\n        self.rank = [0] * num_points\n\n        # Libertades de cada cadena (indexado por raiz)\n        self.liberties = [set() for _ in range(num_points)]\n\n        # Piedras de cada cadena (indexado por raiz)\n        self.stones = [set() for _ in range(num_points)]\n\n    def _index(self, row, col):\n        return row * self.size + col\n\n    def _neighbors(self, row, col):\n        """Obtener los cuatro vecinos"""\n        neighbors = []\n        if row > 0: neighbors.append((row - 1, col))\n        if row < self.size - 1: neighbors.append((row + 1, col))\n        if col > 0: neighbors.append((row, col - 1))\n        if col < self.size - 1: neighbors.append((row, col + 1))\n        return neighbors\n\n    def find(self, idx):\n        if self.parent[idx] != idx:\n            self.parent[idx] = self.find(self.parent[idx])\n        return self.parent[idx]\n\n    def add_stone(self, row, col, color, board):\n        """\n        Agregar una piedra, manejar conexiones y capturas\n        """\n        idx = self._index(row, col)\n\n        # Crear nueva cadena\n        self.stones[idx] = {idx}\n        self.liberties[idx] = set()\n\n        # Calcular libertades de esta piedra\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == 0:  # Punto vacio es libertad\n                self.liberties[idx].add(nidx)\n\n        # Fusionar con vecinos del mismo color\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == color:\n                self._merge_strings(idx, nidx)\n\n        # Reducir libertades de cadenas enemigas\n        opponent = 3 - color  # BLACK=1, WHITE=2\n        captured = []\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == opponent:\n                root = self.find(nidx)\n                self.liberties[root].discard(idx)\n                if len(self.liberties[root]) == 0:\n                    captured.append(root)\n\n        return captured\n\n    def _merge_strings(self, idx1, idx2):\n        """Fusionar dos cadenas"""\n        root1 = self.find(idx1)\n        root2 = self.find(idx2)\n\n        if root1 == root2:\n            return\n\n        # Union por rango\n        if self.rank[root1] < self.rank[root2]:\n            root1, root2 = root2, root1\n\n        self.parent[root2] = root1\n        if self.rank[root1] == self.rank[root2]:\n            self.rank[root1] += 1\n\n        # Fusionar conjuntos de libertades y piedras\n        self.liberties[root1] |= self.liberties[root2]\n        self.stones[root1] |= self.stones[root2]\n\n        # Remover su propia posicion de libertades (uno no es su propia libertad)\n        for stone_idx in self.stones[root2]:\n            self.liberties[root1].discard(stone_idx)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"calculo-de-libertades",children:"Calculo de Libertades"}),"\n",(0,s.jsx)(n.p,{children:"Calcular el numero de libertades de una cadena es una de las operaciones mas comunes en Go:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def count_liberties(self, row, col, board):\n    """Calcular el numero de libertades de la cadena a la que pertenece una piedra"""\n    idx = self._index(row, col)\n    root = self.find(idx)\n    return len(self.liberties[root])\n'})}),"\n",(0,s.jsx)(n.p,{children:"Usando Union-Find, esta operacion es O(1) (asumiendo que find es O(1))."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"evolucion-de-la-codificacion-de-caracteristicas",children:"Evolucion de la Codificacion de Caracteristicas"}),"\n",(0,s.jsx)(n.p,{children:"Desde caracteristicas manuales tradicionales hasta las caracteristicas simplificadas de AlphaGo Zero, la codificacion de caracteristicas de la IA de Go ha experimentado una evolucion significativa."}),"\n",(0,s.jsx)(n.h3,{id:"caracteristicas-manuales-de-gnu-go",children:"Caracteristicas Manuales de GNU Go"}),"\n",(0,s.jsx)(n.p,{children:"Los primeros programas de Go (como GNU Go) usaban muchas caracteristicas disenadas manualmente:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def extract_features_gnugo(board, point):\n    \"\"\"\n    Extraccion de caracteristicas estilo GNU Go\n    \"\"\"\n    features = {}\n\n    # 1. Patrones de forma (formas locales predefinidas)\n    features['pattern'] = match_pattern(board, point)\n\n    # 2. Caracteristicas tacticas\n    features['can_capture'] = check_capture(board, point)\n    features['can_connect'] = check_connect(board, point)\n    features['creates_eye'] = check_eye_creation(board, point)\n\n    # 3. Caracteristicas locales\n    features['liberties_after'] = count_liberties_after_move(board, point)\n    features['enemy_liberties'] = count_enemy_liberties(board, point)\n\n    # 4. Caracteristicas globales\n    features['distance_to_edge'] = min(\n        point[0], point[1],\n        18 - point[0], 18 - point[1]\n    )\n\n    # ... mas caracteristicas\n\n    return features\n"})}),"\n",(0,s.jsx)(n.p,{children:"Problemas con este enfoque:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Requiere mucho conocimiento de expertos humanos"}),"\n",(0,s.jsx)(n.li,{children:"Las caracteristicas pueden estar incompletas"}),"\n",(0,s.jsx)(n.li,{children:"Dificil descubrir nuevos patrones"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"los-48-planos-de-caracteristicas-de-alphago",children:"Los 48 Planos de Caracteristicas de AlphaGo"}),"\n",(0,s.jsxs)(n.p,{children:["AlphaGo (version Nature 2016) uso ",(0,s.jsx)(n.strong,{children:"48 planos de caracteristicas"})," como entrada de la red neuronal:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def encode_alphago_features(board, player, history):\n    """\n    48 planos de caracteristicas de AlphaGo 2016\n\n    Returns:\n        Tensor de (19, 19, 48)\n    """\n    features = np.zeros((19, 19, 48), dtype=np.float32)\n\n    # Plano 1: Posiciones de piedras negras\n    features[:, :, 0] = (board == BLACK)\n\n    # Plano 2: Posiciones de piedras blancas\n    features[:, :, 1] = (board == WHITE)\n\n    # Plano 3: Puntos vacios\n    features[:, :, 2] = (board == EMPTY)\n\n    # Plano 4: Todo unos (termino de sesgo)\n    features[:, :, 3] = 1\n\n    # Planos 5-12: Codificacion del numero de libertades (un plano para 1-8 libertades)\n    for i, num_libs in enumerate(range(1, 9)):\n        for r in range(19):\n            for c in range(19):\n                if board[r, c] != EMPTY:\n                    libs = count_liberties(board, r, c)\n                    if libs == num_libs:\n                        features[r, c, 4 + i] = 1\n\n    # Planos 13-20: Libertades del oponente despues de captura\n    # ...\n\n    # Planos 21-28: Nuestras libertades despues de jugar\n    # ...\n\n    # Planos 29-36: Historial de los ultimos 8 movimientos (un plano por movimiento)\n    for i, (r, c) in enumerate(history[-8:]):\n        features[r, c, 28 + i] = 1\n\n    # Planos 37-44: Juicio de escalera\n    # ...\n\n    # Planos 45-48: Relacionados con simetria\n    # ...\n\n    # Plano 49: A quien le toca jugar (todo 1 para negro, todo 0 para blanco)\n    if player == BLACK:\n        features[:, :, 47] = 1\n\n    return features\n'})}),"\n",(0,s.jsx)(n.h3,{id:"clasificacion-de-los-48-planos",children:"Clasificacion de los 48 Planos"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Categoria"}),(0,s.jsx)(n.th,{children:"Numero de planos"}),(0,s.jsx)(n.th,{children:"Descripcion"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Posiciones de piedras"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"Piedras negras, piedras blancas, puntos vacios"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constante"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"Todo unos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Numero de libertades"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"1-8 libertades"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Libertades despues de captura"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Libertades asumiendo que jugamos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Libertades despues de jugar"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Libertades asumiendo que jugamos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Historial"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Ultimos 8 movimientos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Escalera"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Analisis complejo de escalera"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Otros"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"Turno, simetria, etc."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"los-17-planos-de-caracteristicas-de-alphago-zero",children:"Los 17 Planos de Caracteristicas de AlphaGo Zero"}),"\n",(0,s.jsxs)(n.p,{children:["AlphaGo Zero (2017) simplifico drasticamente la codificacion de caracteristicas, usando solo ",(0,s.jsx)(n.strong,{children:"17 planos"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def encode_alphago_zero_features(board_history, player):\n    """\n    17 planos de caracteristicas de AlphaGo Zero\n\n    Args:\n        board_history: Ultimas 8 posiciones (incluyendo la actual)\n        player: Jugador actual\n\n    Returns:\n        Tensor de (19, 19, 17)\n    """\n    features = np.zeros((19, 19, 17), dtype=np.float32)\n\n    # Planos 1-8: Historial de piedras negras (ultimos 8 pasos)\n    for i, board in enumerate(board_history[-8:]):\n        features[:, :, i] = (board == BLACK)\n\n    # Planos 9-16: Historial de piedras blancas (ultimos 8 pasos)\n    for i, board in enumerate(board_history[-8:]):\n        features[:, :, 8 + i] = (board == WHITE)\n\n    # Plano 17: A quien le toca jugar (todo 1 para negro, todo 0 para blanco)\n    if player == BLACK:\n        features[:, :, 16] = 1\n\n    return features\n'})}),"\n",(0,s.jsx)(n.h3,{id:"la-simplicidad-de-los-17-planos",children:"La Simplicidad de los 17 Planos"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Categoria"}),(0,s.jsx)(n.th,{children:"Numero de planos"}),(0,s.jsx)(n.th,{children:"Descripcion"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Historial de piedras negras"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Posiciones de piedras negras en los ultimos 8 pasos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Historial de piedras blancas"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Posiciones de piedras blancas en los ultimos 8 pasos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Jugador actual"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"Todo unos o todo ceros"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"\xbfPor que puede ser tan simple?"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Idea clave: Dejar que la red neuronal aprenda las caracteristicas por si misma."})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"AlphaGo Zero demostro que:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No se necesita calcular manualmente el numero de libertades (la red puede inferirlo de las posiciones de las piedras)"}),"\n",(0,s.jsx)(n.li,{children:"No se necesita analisis de escalera (la red puede aprender a reconocer escaleras)"}),"\n",(0,s.jsx)(n.li,{children:"No se necesita prediccion compleja de capturas (la red puede entender las consecuencias de los movimientos)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Esto refleja la ventaja central del aprendizaje profundo: ",(0,s.jsx)(n.strong,{children:"aprendizaje de extremo a extremo"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"visualizacion-de-planos-de-caracteristicas",children:"Visualizacion de Planos de Caracteristicas"}),"\n",(0,s.jsx)(n.p,{children:"Veamos como lucen realmente estos planos de caracteristicas:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Tablero original:         Plano de negras:        Plano de blancas:\n. . . . . .            0 0 0 0 0 0            0 0 0 0 0 0\n. \u25cf \u25cb . . .            0 1 0 0 0 0            0 0 1 0 0 0\n. . \u25cf \u25cb . .    ->      0 0 1 0 0 0     +      0 0 0 1 0 0\n. . . \u25cf . .            0 0 0 1 0 0            0 0 0 0 0 0\n. . . . . .            0 0 0 0 0 0            0 0 0 0 0 0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Cada plano es una matriz binaria (0 o 1), la red neuronal puede extraer patrones de estos planos a traves de operaciones de convolucion."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"procesamiento-de-simetria-8-transformaciones",children:"Procesamiento de Simetria: 8 Transformaciones"}),"\n",(0,s.jsx)(n.h3,{id:"simetrias-del-go",children:"Simetrias del Go"}),"\n",(0,s.jsxs)(n.p,{children:["El tablero de Go tiene ",(0,s.jsx)(n.strong,{children:"8 simetrias"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 rotaciones"}),": 0\xb0, 90\xb0, 180\xb0, 270\xb0"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 reflexiones con rotacion"}),": Reflexion horizontal + 4 rotaciones"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Esto forma un ",(0,s.jsx)(n.strong,{children:"grupo diedrico D4"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"representacion-matematica",children:"Representacion Matematica"}),"\n",(0,s.jsx)(n.p,{children:"Sea (x, y) una coordenada en el tablero (centro en (9, 9)), las 8 transformaciones pueden expresarse como:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Transformacion"}),(0,s.jsx)(n.th,{children:"Formula"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Identidad"}),(0,s.jsx)(n.td,{children:"(x, y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotacion 90\xb0"}),(0,s.jsx)(n.td,{children:"(-y, x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotacion 180\xb0"}),(0,s.jsx)(n.td,{children:"(-x, -y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotacion 270\xb0"}),(0,s.jsx)(n.td,{children:"(y, -x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Reflexion horizontal"}),(0,s.jsx)(n.td,{children:"(-x, y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Reflexion vertical"}),(0,s.jsx)(n.td,{children:"(x, -y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Reflexion diagonal"}),(0,s.jsx)(n.td,{children:"(y, x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Reflexion anti-diagonal"}),(0,s.jsx)(n.td,{children:"(-y, -x)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"implementacion-del-codigo",children:"Implementacion del Codigo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def get_symmetries(board):\n    """\n    Obtener las 8 transformaciones simetricas del tablero\n\n    Returns:\n        Lista de 8 tableros\n    """\n    symmetries = []\n\n    # Original\n    symmetries.append(board.copy())\n\n    # Rotacion 90\xb0\n    symmetries.append(np.rot90(board, k=1))\n\n    # Rotacion 180\xb0\n    symmetries.append(np.rot90(board, k=2))\n\n    # Rotacion 270\xb0\n    symmetries.append(np.rot90(board, k=3))\n\n    # Reflexion horizontal\n    symmetries.append(np.fliplr(board))\n\n    # Reflexion vertical\n    symmetries.append(np.flipud(board))\n\n    # Reflexion diagonal\n    symmetries.append(board.T)\n\n    # Reflexion anti-diagonal\n    symmetries.append(np.rot90(board.T, k=2))\n\n    return symmetries\n\n\ndef apply_symmetry(board, sym_index):\n    """\n    Aplicar la transformacion de simetria sym_index\n    """\n    return get_symmetries(board)[sym_index]\n\n\ndef inverse_symmetry(move, sym_index, board_size=19):\n    """\n    Convertir coordenadas de movimiento transformadas de vuelta a coordenadas originales\n    """\n    row, col = move\n\n    if sym_index == 0:  # Identidad\n        return row, col\n    elif sym_index == 1:  # Rotacion 90\xb0\n        return col, board_size - 1 - row\n    elif sym_index == 2:  # Rotacion 180\xb0\n        return board_size - 1 - row, board_size - 1 - col\n    elif sym_index == 3:  # Rotacion 270\xb0\n        return board_size - 1 - col, row\n    elif sym_index == 4:  # Reflexion horizontal\n        return row, board_size - 1 - col\n    elif sym_index == 5:  # Reflexion vertical\n        return board_size - 1 - row, col\n    elif sym_index == 6:  # Reflexion diagonal\n        return col, row\n    elif sym_index == 7:  # Reflexion anti-diagonal\n        return board_size - 1 - col, board_size - 1 - row\n'})}),"\n",(0,s.jsx)(n.h3,{id:"aumento-de-datos",children:"Aumento de Datos"}),"\n",(0,s.jsxs)(n.p,{children:["Al entrenar redes neuronales, se puede usar la simetria para ",(0,s.jsx)(n.strong,{children:"aumento de datos"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def augment_training_data(board, policy, value):\n    """\n    Expandir una muestra de entrenamiento a 8\n    """\n    augmented = []\n\n    for sym_index in range(8):\n        # Transformar tablero\n        aug_board = apply_symmetry(board, sym_index)\n\n        # Transformar politica (vector de 361 dimensiones)\n        policy_2d = policy.reshape(19, 19)\n        aug_policy_2d = apply_symmetry(policy_2d, sym_index)\n        aug_policy = aug_policy_2d.flatten()\n\n        # El valor no cambia\n        aug_value = value\n\n        augmented.append((aug_board, aug_policy, aug_value))\n\n    return augmented\n'})}),"\n",(0,s.jsx)(n.p,{children:"Esto aumenta los datos de entrenamiento 8 veces, y es completamente gratis (no necesita recopilar nuevos datos)."}),"\n",(0,s.jsx)(n.h3,{id:"uso-de-simetria-en-inferencia",children:"Uso de Simetria en Inferencia"}),"\n",(0,s.jsx)(n.p,{children:"AlphaGo tambien usa simetria en partidas reales:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def predict_with_symmetry(model, board):\n    """\n    Usar simetria para mejorar la prediccion\n    """\n    policies = []\n    values = []\n\n    for sym_index in range(8):\n        # Transformar entrada\n        aug_board = apply_symmetry(board, sym_index)\n\n        # Prediccion de red neuronal\n        policy, value = model.predict(aug_board)\n\n        # Transformar politica de vuelta al sistema de coordenadas original\n        policy_2d = policy.reshape(19, 19)\n        original_policy = inverse_symmetry_2d(policy_2d, sym_index)\n        policies.append(original_policy.flatten())\n\n        values.append(value)\n\n    # Promediar todas las predicciones\n    avg_policy = np.mean(policies, axis=0)\n    avg_value = np.mean(values)\n\n    return avg_policy, avg_value\n'})}),"\n",(0,s.jsx)(n.p,{children:"Este enfoque puede mejorar ligeramente la precision y estabilidad de las predicciones."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resumen-de-metodos-de-representacion-del-tablero",children:"Resumen de Metodos de Representacion del Tablero"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metodo"}),(0,s.jsx)(n.th,{children:"Uso"}),(0,s.jsx)(n.th,{children:"Complejidad"}),(0,s.jsx)(n.th,{children:"Caracteristicas"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Matriz bidimensional"})}),(0,s.jsx)(n.td,{children:"Almacenamiento basico"}),(0,s.jsx)(n.td,{children:"Espacio O(361)"}),(0,s.jsx)(n.td,{children:"Simple e intuitivo"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Zobrist Hashing"})}),(0,s.jsx)(n.td,{children:"Identificacion de posiciones"}),(0,s.jsx)(n.td,{children:"Consulta O(1)"}),(0,s.jsx)(n.td,{children:"Hash eficiente"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Union-Find"})}),(0,s.jsx)(n.td,{children:"Gestion de cadenas"}),(0,s.jsx)(n.td,{children:"Operacion O(\u03b1(n))"}),(0,s.jsx)(n.td,{children:"Maneja conectividad"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Planos de caracteristicas"})}),(0,s.jsx)(n.td,{children:"Entrada de red neuronal"}),(0,s.jsx)(n.td,{children:"O(361\xd7num_planos)"}),(0,s.jsx)(n.td,{children:"Codifica informacion rica"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Transformaciones de simetria"})}),(0,s.jsx)(n.td,{children:"Aumento de datos"}),(0,s.jsx)(n.td,{children:"8\xd7 volumen de datos"}),(0,s.jsx)(n.td,{children:"Ampliacion gratuita"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Estas tecnicas trabajan juntas para formar la infraestructura de la IA de Go moderna."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"correspondencia-con-animaciones",children:"Correspondencia con Animaciones"}),"\n",(0,s.jsx)(n.p,{children:"Conceptos centrales cubiertos en este articulo y numeros de animacion:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Numero"}),(0,s.jsx)(n.th,{children:"Concepto"}),(0,s.jsx)(n.th,{children:"Correspondencia Fisica/Matematica"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\ud83c\udfac A1"}),(0,s.jsx)(n.td,{children:"Representacion con matriz bidimensional"}),(0,s.jsx)(n.td,{children:"Matrices, datos dispersos"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\ud83c\udfac A2"}),(0,s.jsx)(n.td,{children:"Zobrist Hashing"}),(0,s.jsx)(n.td,{children:"Funciones hash, operacion XOR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\ud83c\udfac A8"}),(0,s.jsx)(n.td,{children:"Codificacion de planos de caracteristicas"}),(0,s.jsx)(n.td,{children:"Tensores, entrada multicanal"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\ud83c\udfac A5"}),(0,s.jsx)(n.td,{children:"Procesamiento de simetria"}),(0,s.jsx)(n.td,{children:"Teoria de grupos, grupo diedrico"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"lecturas-adicionales",children:"Lecturas Adicionales"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Articulo anterior"}),": ",(0,s.jsx)(n.a,{href:"../traditional-limits",children:"Los Limites de los Metodos Tradicionales"})," - De Minimax a MCTS"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Articulo siguiente"}),": ",(0,s.jsx)(n.a,{href:"../policy-network",children:"Explicacion Detallada de la Policy Network"})," - Como las redes neuronales predicen movimientos"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ejercicio practico"}),": ",(0,s.jsx)(n.a,{href:"/docs/tech/hands-on/",children:"Ejecuta tu primera IA de Go en 30 minutos"})," - Experiencia practica"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"referencias",children:"Referencias"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Zobrist, A. L. (1970). "A new hashing method with application for game playing." ICCA journal.'}),"\n",(0,s.jsx)(n.li,{children:'Tarjan, R. E. (1975). "Efficiency of a Good But Not Linear Set Union Algorithm." Journal of the ACM, 22(2), 215-225.'}),"\n",(0,s.jsx)(n.li,{children:'Silver, D., et al. (2016). "Mastering the game of Go with deep neural networks and tree search." Nature, 529, 484-489. - 48 planos de caracteristicas de AlphaGo'}),"\n",(0,s.jsx)(n.li,{children:'Silver, D., et al. (2017). "Mastering the game of Go without human knowledge." Nature, 550, 354-359. - 17 planos de caracteristicas de AlphaGo Zero'}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},42948(e,n,a){a.d(n,{A:()=>i});a(59471);var r=a(61785),s=a(62615);function i({children:e,fallback:n}){return(0,r.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):n??null}},45695(e,n,a){a.d(n,{$W:()=>C,tO:()=>l,u8:()=>j,dW:()=>x});var r=a(59471),s=a(90989),i=a(62615);const t=19,o=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]];function l({size:e=400,stones:n=[],highlights:a=[],labels:l=[],onCellClick:d=null,showCoordinates:c=!0}){const p=(0,r.useRef)(null),h=c?30:15,u=e-2*h,x=u/18;return(0,r.useEffect)(()=>{if(!p.current)return;const e=s.Ltv(p.current);e.selectAll("*").remove();const r=e.append("g").attr("transform",`translate(${h}, ${h})`);r.append("rect").attr("x",-x/2).attr("y",-x/2).attr("width",u+x).attr("height",u+x).attr("fill","#dcb35c").attr("rx",4);const i=r.append("g").attr("class","grid");for(let n=0;n<t;n++)i.append("line").attr("class","grid-line").attr("x1",0).attr("y1",n*x).attr("x2",18*x).attr("y2",n*x);for(let n=0;n<t;n++)i.append("line").attr("class","grid-line").attr("x1",n*x).attr("y1",0).attr("x2",n*x).attr("y2",18*x);const m=r.append("g").attr("class","star-points");if(o.forEach(([e,n])=>{m.append("circle").attr("class","star-point").attr("cx",e*x).attr("cy",n*x).attr("r",x/8)}),a.length>0){const e=r.append("g").attr("class","highlights");a.forEach(({x:n,y:a,intensity:r})=>{e.append("rect").attr("class","heatmap-cell").attr("x",n*x-x/2).attr("y",a*x-x/2).attr("width",x).attr("height",x).attr("fill",s.Q3(r)).attr("opacity",.7*r)})}const f=r.append("g").attr("class","stones");if(n.forEach(({x:e,y:n,color:a})=>{const r="black"===a?"stone-black":"stone-white";f.append("circle").attr("cx",e*x+2).attr("cy",n*x+2).attr("r",.45*x).attr("fill","rgba(0,0,0,0.2)"),f.append("circle").attr("class",r).attr("cx",e*x).attr("cy",n*x).attr("r",.45*x)}),l.length>0){const e=r.append("g").attr("class","labels");l.forEach(({x:a,y:r,text:s})=>{const i=n.find(e=>e.x===a&&e.y===r),t="black"===i?.color?"#fff":"#000";e.append("text").attr("x",a*x).attr("y",r*x).attr("dy","0.35em").attr("text-anchor","middle").attr("fill",t).attr("font-size",.5*x).attr("font-weight","bold").text(s)})}if(c){const n=e.append("g").attr("class","coordinates"),a="ABCDEFGHJKLMNOPQRST";for(let e=0;e<t;e++)n.append("text").attr("x",h+e*x).attr("y",h/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(a[e]);for(let e=0;e<t;e++)n.append("text").attr("x",h/2).attr("y",h+e*x).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(t-e)}d&&r.append("g").attr("class","click-targets").selectAll("rect").data(s.y17(361)).enter().append("rect").attr("x",e=>e%t*x-x/2).attr("y",e=>Math.floor(e/t)*x-x/2).attr("width",x).attr("height",x).attr("fill","transparent").attr("cursor","pointer").on("click",(e,n)=>{const a=n%t,r=Math.floor(n/t);d({x:a,y:r})})},[e,n,a,l,c,d,x,h,u]),(0,i.jsx)("div",{className:"go-board-container",children:(0,i.jsx)("svg",{ref:p,width:e,height:e,className:"go-board"})})}var d=a(42948);const c=19,p={empty:function(){const e=[];for(let n=0;n<c;n++)for(let a=0;a<c;a++)e.push({x:a,y:n,prob:1/361});return e}(),corner:function(){const e=[],n=[[3,3],[3,15],[15,3],[15,15]],a=[[2,4],[4,2],[2,14],[4,16],[14,2],[16,4],[14,16],[16,14]];for(let r=0;r<c;r++)for(let s=0;s<c;s++){let i=.001;n.some(([e,n])=>e===s&&n===r)?i=.15:a.some(([e,n])=>e===s&&n===r)?i=.05:0!==s&&18!==s&&0!==r&&18!==r||(i=5e-4),e.push({x:s,y:r,prob:i})}return h(e)}(),move37:function(){const e=[],n={x:9,y:4},a=[[3,2],[15,2],[10,10],[8,6]];for(let r=0;r<c;r++)for(let s=0;s<c;s++){let i=.001;s===n.x&&r===n.y?i=.08:a.some(([e,n])=>e===s&&n===r)?i=.12:s>=5&&s<=13&&r>=5&&r<=13&&(i=.005+.01*Math.random()),e.push({x:s,y:r,prob:i})}return h(e)}()};function h(e){const n=e.reduce((e,n)=>e+n.prob,0);return e.map(e=>({...e,prob:e.prob/n}))}function u({initialPosition:e="corner",stones:n=[],highlightMoves:a=[],size:t=450,showTopN:o=5,interactive:l=!0}){const d=(0,r.useRef)(null),h=(0,r.useRef)(null),[u,x]=(0,r.useState)(p[e]||p.corner),[m,f]=(0,r.useState)(null),j=35,b=t-70,g=b/18;(0,r.useEffect)(()=>{if(!d.current)return;const e=s.Ltv(d.current);e.selectAll("*").remove();const a=e.append("g").attr("transform","translate(35, 35)");a.append("rect").attr("x",-g/2).attr("y",-g/2).attr("width",b+g).attr("height",b+g).attr("fill","#dcb35c").attr("rx",4);const r=Math.max(...u.map(e=>e.prob)),i=s.exT(s.oKI).domain([0,r]);a.append("g").attr("class","heatmap").selectAll("rect").data(u).enter().append("rect").attr("class","heatmap-cell").attr("x",e=>e.x*g-g/2).attr("y",e=>e.y*g-g/2).attr("width",g).attr("height",g).attr("fill",e=>i(e.prob)).attr("opacity",e=>.3+e.prob/r*.6).attr("cursor",l?"pointer":"default").on("mouseover",function(e,n){if(!l)return;s.Ltv(this).attr("stroke","#333").attr("stroke-width",2);s.Ltv(h.current).style("display","block").style("left",`${e.pageX+10}px`).style("top",e.pageY-10+"px").html(`\u4f4d\u7f6e: ${String.fromCharCode(65+n.x)}${19-n.y}<br>\u6a5f\u7387: ${(100*n.prob).toFixed(2)}%`)}).on("mouseout",function(){s.Ltv(this).attr("stroke","none"),s.Ltv(h.current).style("display","none")}).on("click",function(e,n){l&&f(n)});const t=a.append("g").attr("class","grid");for(let n=0;n<c;n++)t.append("line").attr("class","grid-line").attr("x1",0).attr("y1",n*g).attr("x2",18*g).attr("y2",n*g).attr("stroke","#333").attr("stroke-width",.5).attr("opacity",.5),t.append("line").attr("class","grid-line").attr("x1",n*g).attr("y1",0).attr("x2",n*g).attr("y2",18*g).attr("stroke","#333").attr("stroke-width",.5).attr("opacity",.5);const p=a.append("g").attr("class","stones");n.forEach(({x:e,y:n,color:a})=>{p.append("circle").attr("cx",e*g).attr("cy",n*g).attr("r",.45*g).attr("fill","black"===a?"#1a1a1a":"#f5f5f5").attr("stroke","black"===a?"#000":"#333").attr("stroke-width",1)});const x=[...u].sort((e,n)=>n.prob-e.prob).slice(0,o),m=a.append("g").attr("class","top-labels");x.forEach((e,a)=>{n.some(n=>n.x===e.x&&n.y===e.y)||(m.append("circle").attr("cx",e.x*g).attr("cy",e.y*g).attr("r",.3*g).attr("fill","rgba(255,255,255,0.8)").attr("stroke","#e74c3c").attr("stroke-width",2),m.append("text").attr("x",e.x*g).attr("y",e.y*g).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#e74c3c").attr("font-size",.4*g).attr("font-weight","bold").text(a+1))});const v=e.append("g").attr("class","coordinates");for(let n=0;n<c;n++)v.append("text").attr("x",j+n*g).attr("y",17.5).attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text("ABCDEFGHJKLMNOPQRST"[n]),v.append("text").attr("x",17.5).attr("y",j+n*g).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(c-n)},[u,n,o,l,g,j,b]);const v=e=>{x(p[e]||p.corner)};return(0,i.jsxs)("div",{children:[l&&(0,i.jsxs)("div",{className:"d3-controls",children:[(0,i.jsx)("button",{className:"empty"===e?"active":"",onClick:()=>v("empty"),children:"\u5747\u52fb\u5206\u5e03"}),(0,i.jsx)("button",{className:"corner"===e?"active":"",onClick:()=>v("corner"),children:"\u958b\u5c40\u661f\u4f4d"}),(0,i.jsx)("button",{className:"move37"===e?"active":"",onClick:()=>v("move37"),children:"\u7b2c 37 \u624b"})]}),(0,i.jsx)("div",{className:"go-board-container",children:(0,i.jsx)("svg",{ref:d,width:t,height:t,className:"go-board"})}),(0,i.jsx)("div",{ref:h,className:"d3-tooltip",style:{display:"none",position:"fixed"}}),m&&(0,i.jsx)("div",{className:"d3-legend",children:(0,i.jsxs)("div",{className:"d3-legend-item",children:["\u5df2\u9078\u64c7: ",String.fromCharCode(65+m.x),19-m.y,"\u2014 \u6a5f\u7387: ",(100*m.prob).toFixed(2),"%"]})}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#ffffb2"}}),"\u4f4e\u6a5f\u7387"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#fd8d3c"}}),"\u4e2d\u6a5f\u7387"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#bd0026"}}),"\u9ad8\u6a5f\u7387"]})]})]})}function x(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(u,{...e})})}const m={name:"Root",visits:1600,value:.55,prior:1,children:[{name:"D4",visits:800,value:.62,prior:.35,selected:!0,children:[{name:"Q16",visits:400,value:.58,prior:.3},{name:"R4",visits:300,value:.65,prior:.25,selected:!0},{name:"C16",visits:100,value:.55,prior:.2}]},{name:"Q4",visits:500,value:.52,prior:.3,children:[{name:"D16",visits:300,value:.5,prior:.28},{name:"Q16",visits:200,value:.54,prior:.22}]},{name:"D16",visits:200,value:.48,prior:.2},{name:"Q16",visits:100,value:.45,prior:.15}]};function f({data:e=m,width:n=700,height:a=450,showPUCT:t=!0,cPuct:o=1.5,interactive:l=!0}){const d=(0,r.useRef)(null),c=(0,r.useRef)(null),[p,h]=(0,r.useState)(null),[u,x]=(0,r.useState)(o),f=40,j=40,b=n-j-40,g=a-f-40;return(0,r.useEffect)(()=>{if(!d.current)return;const r=s.Ltv(d.current);r.selectAll("*").remove();const i=s.B22().size([b,g-50]),o=s.Sk5(e);i(o);const p=r.append("g").attr("transform",`translate(${j}, ${f})`);p.append("g").attr("class","links").selectAll("path").data(o.links()).enter().append("path").attr("class",e=>"link "+(e.target.data.selected?"selected":"")).attr("fill","none").attr("stroke",e=>e.target.data.selected?"#4a90d9":"#999").attr("stroke-width",e=>e.target.data.selected?3:1.5).attr("d",s.vu().x(e=>e.x).y(e=>e.y));const x=p.append("g").attr("class","nodes").selectAll("g").data(o.descendants()).enter().append("g").attr("class","node").attr("transform",e=>`translate(${e.x}, ${e.y})`).attr("cursor",l?"pointer":"default").on("mouseover",function(e,n){if(!l)return;s.Ltv(this).select("circle").transition().duration(200).attr("r",30);const a=n.parent?n.parent.data.visits:n.data.visits,r=((e,n)=>{if(!n)return 0;const a=e.value,r=e.prior,s=e.visits;return a+u*r*Math.sqrt(n)/(1+s)})(n.data,a);s.Ltv(c.current).style("display","block").style("left",`${e.pageX+15}px`).style("top",e.pageY-10+"px").html(`\n            <strong>${n.data.name}</strong><br>\n            \u8a2a\u554f\u6b21\u6578 (N): ${n.data.visits}<br>\n            \u5e73\u5747\u50f9\u503c (Q): ${n.data.value.toFixed(3)}<br>\n            \u5148\u9a57\u6a5f\u7387 (P): ${(100*n.data.prior).toFixed(1)}%<br>\n            ${t?`PUCT \u5206\u6578: ${r.toFixed(3)}`:""}\n          `)}).on("mouseout",function(){s.Ltv(this).select("circle").transition().duration(200).attr("r",25),s.Ltv(c.current).style("display","none")}).on("click",function(e,n){l&&h(n.data)});x.append("circle").attr("r",25).attr("fill",e=>e.data.selected?"#4a90d9":"#fff").attr("stroke",n=>{if(n.data.selected)return"#2c5282";const a=n.data.visits/e.visits;return s.dM(.3+.5*a)}).attr("stroke-width",e=>e.data.selected?3:2),x.append("text").attr("dy",-5).attr("text-anchor","middle").attr("fill",e=>e.data.selected?"#fff":"#333").attr("font-size",11).attr("font-weight","bold").text(e=>e.data.name),x.append("text").attr("dy",10).attr("text-anchor","middle").attr("fill",e=>e.data.selected?"#fff":"#666").attr("font-size",9).text(e=>`N=${e.data.visits}`),r.append("text").attr("x",n/2).attr("y",20).attr("text-anchor","middle").attr("font-size",14).attr("font-weight","bold").attr("fill","#333").text("MCTS \u641c\u7d22\u6a39"),t&&r.append("text").attr("x",n/2).attr("y",a-10).attr("text-anchor","middle").attr("font-size",11).attr("fill","#666").text("\u85cd\u8272\u8def\u5f91\uff1aPUCT \u9078\u64c7\u7684\u6700\u4f73\u8def\u5f91")},[e,n,a,t,u,l,b,g]),(0,i.jsxs)("div",{children:[t&&l&&(0,i.jsx)("div",{className:"d3-controls",children:(0,i.jsxs)("div",{className:"d3-slider",children:[(0,i.jsxs)("label",{children:["c_puct: ",u.toFixed(1)]}),(0,i.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:u,onChange:e=>x(parseFloat(e.target.value))})]})}),(0,i.jsx)("div",{className:"mcts-tree-container",children:(0,i.jsx)("svg",{ref:d,width:n,height:a,className:"mcts-tree"})}),(0,i.jsx)("div",{ref:c,className:"d3-tooltip",style:{display:"none",position:"fixed"}}),p&&(0,i.jsxs)("div",{className:"d3-legend",style:{background:"#f5f5f5",padding:"1rem",borderRadius:"4px"},children:[(0,i.jsxs)("strong",{children:["\u5df2\u9078\u64c7\u7bc0\u9ede: ",p.name]}),(0,i.jsxs)("div",{children:["\u8a2a\u554f\u6b21\u6578: ",p.visits]}),(0,i.jsxs)("div",{children:["\u5e73\u5747\u50f9\u503c: ",p.value.toFixed(3)]}),(0,i.jsxs)("div",{children:["\u5148\u9a57\u6a5f\u7387: ",(100*p.prior).toFixed(1),"%"]})]}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#4a90d9"}}),"\u9078\u4e2d\u8def\u5f91"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#fff",border:"2px solid #999"}}),"\u5176\u4ed6\u7bc0\u9ede"]}),(0,i.jsx)("div",{className:"d3-legend-item",children:(0,i.jsx)("span",{style:{fontSize:"12px"},children:"\u7bc0\u9ede\u5927\u5c0f \u221d \u8a2a\u554f\u6b21\u6578"})})]})]})}function j(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(f,{...e})})}const b=[{hours:0,elo:0,label:"\u96a8\u6a5f"},{hours:3,elo:1e3,label:"\u767c\u73fe\u898f\u5247"},{hours:6,elo:2e3},{hours:12,elo:3e3,label:"\u767c\u73fe\u5b9a\u5f0f"},{hours:24,elo:4e3},{hours:36,elo:4500,label:"\u8d85\u8d8a Fan Hui"},{hours:48,elo:5e3},{hours:60,elo:5200,label:"\u8d85\u8d8a Lee Sedol"},{hours:72,elo:5400,label:"\u8d85\u8d8a\u539f\u7248 AlphaGo"}],g=[{elo:2700,label:"\u696d\u9918\u5f37\u8c6a"},{elo:3500,label:"Fan Hui (\u8077\u696d\u4e8c\u6bb5)"},{elo:4500,label:"Lee Sedol (\u4e16\u754c\u51a0\u8ecd)"},{elo:5e3,label:"\u539f\u7248 AlphaGo"}],v=[{epochs:0,elo:0},{epochs:10,elo:1500},{epochs:20,elo:2500},{epochs:30,elo:3e3},{epochs:40,elo:3200},{epochs:50,elo:3300}],y=[{games:0,elo:3300},{games:1e3,elo:3800},{games:5e3,elo:4200},{games:1e4,elo:4500},{games:5e4,elo:4800},{games:1e5,elo:5e3}];function _({mode:e="zero",width:n=600,height:a=400,animated:t=!0,showMilestones:o=!0}){const l=(0,r.useRef)(null),[d,c]=(0,r.useState)(e),p=40,h=70,u=n-h-100,x=a-p-60;return(0,r.useEffect)(()=>{if(!l.current)return;const e=s.Ltv(l.current);let a,r,i;e.selectAll("*").remove(),"zero"===d?(a=b,r="\u8a13\u7df4\u6642\u9593\uff08\u5c0f\u6642\uff09",i=[0,80]):"sl"===d?(a=v,r="\u8a13\u7df4\u8f2a\u6578\uff08Epochs\uff09",i=[0,60]):(a=y,r="\u81ea\u6211\u5c0d\u5f08\u5c40\u6578",i=[0,12e4]);const c="selfplay"===d?s.ZEH().domain([1,i[1]]).range([0,u]):s.m4Y().domain(i).range([0,u]),m=s.m4Y().domain([0,6e3]).range([x,0]),f=e.append("g").attr("transform",`translate(${h}, ${p})`);if(f.append("g").attr("class","grid").selectAll(".grid-line-y").data(m.ticks(6)).enter().append("line").attr("class","grid-line-y").attr("x1",0).attr("x2",u).attr("y1",e=>m(e)).attr("y2",e=>m(e)).attr("stroke","#ddd").attr("stroke-dasharray","3,3"),o&&"zero"===d){const e=f.append("g").attr("class","human-levels");g.forEach(n=>{e.append("line").attr("x1",0).attr("x2",u).attr("y1",m(n.elo)).attr("y2",m(n.elo)).attr("stroke","#e74c3c").attr("stroke-dasharray","5,5").attr("opacity",.6),e.append("text").attr("x",u+5).attr("y",m(n.elo)).attr("dy","0.35em").attr("fill","#e74c3c").attr("font-size",10).text(n.label)})}const j=s.n8j().x(e=>c("zero"===d?e.hours:"sl"===d?e.epochs:Math.max(1,e.games))).y(e=>m(e.elo)).curve(s.nVG),_=s.Wcw().x(e=>c("zero"===d?e.hours:"sl"===d?e.epochs:Math.max(1,e.games))).y0(x).y1(e=>m(e.elo)).curve(s.nVG);f.append("path").datum(a).attr("class","area").attr("fill","#4a90d9").attr("opacity",.1).attr("d",_);const C=f.append("path").datum(a).attr("class","line").attr("fill","none").attr("stroke","#4a90d9").attr("stroke-width",3).attr("d",j);if(t){const e=C.node().getTotalLength();C.attr("stroke-dasharray",`${e} ${e}`).attr("stroke-dashoffset",e).transition().duration(2e3).ease(s.yfw).attr("stroke-dashoffset",0)}if(o&&"zero"===d){const e=a.filter(e=>e.label),n=f.append("g").attr("class","milestones");n.selectAll("circle").data(e).enter().append("circle").attr("cx",e=>c(e.hours)).attr("cy",e=>m(e.elo)).attr("r",6).attr("fill","#e74c3c").attr("stroke","#fff").attr("stroke-width",2),n.selectAll("text").data(e).enter().append("text").attr("x",e=>c(e.hours)).attr("y",e=>m(e.elo)-15).attr("text-anchor","middle").attr("fill","#333").attr("font-size",10).text(e=>e.label)}const z="selfplay"===d?s.l78(c).ticks(5,"~s"):s.l78(c);f.append("g").attr("class","x-axis").attr("transform",`translate(0, ${x})`).call(z),f.append("text").attr("class","axis-label").attr("x",u/2).attr("y",x+45).attr("text-anchor","middle").attr("fill","#666").text(r),f.append("g").attr("class","y-axis").call(s.V4s(m).ticks(6)),f.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-x/2).attr("y",-50).attr("text-anchor","middle").attr("fill","#666").text("ELO \u8a55\u5206"),e.append("text").attr("x",n/2).attr("y",20).attr("text-anchor","middle").attr("font-size",14).attr("font-weight","bold").attr("fill","#333").text("zero"===d?"AlphaGo Zero \u8a13\u7df4\u66f2\u7dda":"sl"===d?"\u76e3\u7763\u5b78\u7fd2\u68cb\u529b\u6210\u9577":"\u81ea\u6211\u5c0d\u5f08\u68cb\u529b\u6210\u9577")},[d,n,a,t,o,u,x]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"d3-controls",children:[(0,i.jsx)("button",{className:"zero"===d?"active":"",onClick:()=>c("zero"),children:"AlphaGo Zero"}),(0,i.jsx)("button",{className:"sl"===d?"active":"",onClick:()=>c("sl"),children:"\u76e3\u7763\u5b78\u7fd2"}),(0,i.jsx)("button",{className:"selfplay"===d?"active":"",onClick:()=>c("selfplay"),children:"\u81ea\u6211\u5c0d\u5f08"})]}),(0,i.jsx)("div",{className:"elo-chart-container",children:(0,i.jsx)("svg",{ref:l,width:n,height:a,className:"elo-chart"})}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#4a90d9"}}),"ELO \u8a55\u5206"]}),o&&"zero"===d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#e74c3c"}}),"\u91cc\u7a0b\u7891"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#e74c3c",opacity:.3}}),"\u4eba\u985e\u6c34\u5e73\u53c3\u8003\u7dda"]})]})]})]})}function C(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(_,{...e})})}},30416(e,n,a){a.d(n,{R:()=>t,x:()=>o});var r=a(59471);const s={},i=r.createContext(s);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);