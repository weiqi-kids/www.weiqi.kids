"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[1270],{48633(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>t});const d=JSON.parse('{"id":"for-engineers/deep-dive/gpu-optimization","title":"Backend GPU y optimizaci\xf3n","description":"Comparaci\xf3n de backends CUDA, OpenCL, Metal de KataGo y gu\xeda de ajuste de rendimiento","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/for-engineers/deep-dive/gpu-optimization.md","sourceDirName":"for-engineers/deep-dive","slug":"/for-engineers/deep-dive/gpu-optimization","permalink":"/es/docs/for-engineers/deep-dive/gpu-optimization","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/for-engineers/deep-dive/gpu-optimization.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Backend GPU y optimizaci\xf3n","description":"Comparaci\xf3n de backends CUDA, OpenCL, Metal de KataGo y gu\xeda de ajuste de rendimiento"},"sidebar":"tutorialSidebar","previous":{"title":"Detalles de implementaci\xf3n de MCTS","permalink":"/es/docs/for-engineers/deep-dive/mcts-implementation"},"next":{"title":"Arquitectura de entrenamiento distribuido","permalink":"/es/docs/for-engineers/deep-dive/distributed-training"}}');var s=i(62615),r=i(30416);const a={sidebar_position:6,title:"Backend GPU y optimizaci\xf3n",description:"Comparaci\xf3n de backends CUDA, OpenCL, Metal de KataGo y gu\xeda de ajuste de rendimiento"},c="Backend GPU y optimizaci\xf3n",l={},t=[{value:"Visi\xf3n general de backends",id:"visi\xf3n-general-de-backends",level:2},{value:"Backend CUDA",id:"backend-cuda",level:2},{value:"Escenarios de uso",id:"escenarios-de-uso",level:3},{value:"Requisitos de instalaci\xf3n",id:"requisitos-de-instalaci\xf3n",level:3},{value:"Compilaci\xf3n",id:"compilaci\xf3n",level:3},{value:"Caracter\xedsticas de rendimiento",id:"caracter\xedsticas-de-rendimiento",level:3},{value:"Backend OpenCL",id:"backend-opencl",level:2},{value:"Escenarios de uso",id:"escenarios-de-uso-1",level:3},{value:"Requisitos de instalaci\xf3n",id:"requisitos-de-instalaci\xf3n-1",level:3},{value:"Compilaci\xf3n",id:"compilaci\xf3n-1",level:3},{value:"Selecci\xf3n de driver",id:"selecci\xf3n-de-driver",level:3},{value:"Ajuste de rendimiento",id:"ajuste-de-rendimiento",level:3},{value:"Backend Metal",id:"backend-metal",level:2},{value:"Escenarios de uso",id:"escenarios-de-uso-2",level:3},{value:"Compilaci\xf3n",id:"compilaci\xf3n-2",level:3},{value:"Optimizaci\xf3n para Apple Silicon",id:"optimizaci\xf3n-para-apple-silicon",level:3},{value:"Comparaci\xf3n de rendimiento",id:"comparaci\xf3n-de-rendimiento",level:3},{value:"Backend Eigen (solo CPU)",id:"backend-eigen-solo-cpu",level:2},{value:"Escenarios de uso",id:"escenarios-de-uso-3",level:3},{value:"Compilaci\xf3n",id:"compilaci\xf3n-3",level:3},{value:"Expectativa de rendimiento",id:"expectativa-de-rendimiento",level:3},{value:"Par\xe1metros de ajuste de rendimiento",id:"par\xe1metros-de-ajuste-de-rendimiento",level:2},{value:"Par\xe1metros principales",id:"par\xe1metros-principales",level:3},{value:"Gu\xeda de ajuste de par\xe1metros",id:"gu\xeda-de-ajuste-de-par\xe1metros",level:3},{value:"nnMaxBatchSize",id:"nnmaxbatchsize",level:4},{value:"numSearchThreads",id:"numsearchthreads",level:4},{value:"numNNServerThreadsPerModel",id:"numnnserverthreadspermodel",level:4},{value:"Ajuste de memoria",id:"ajuste-de-memoria",level:3},{value:"Configuraci\xf3n multi-GPU",id:"configuraci\xf3n-multi-gpu",level:2},{value:"Multi-GPU en una m\xe1quina",id:"multi-gpu-en-una-m\xe1quina",level:3},{value:"Balanceo de carga",id:"balanceo-de-carga",level:3},{value:"Benchmarking",id:"benchmarking",level:2},{value:"Ejecutar benchmark",id:"ejecutar-benchmark",level:3},{value:"Interpretaci\xf3n de salida",id:"interpretaci\xf3n-de-salida",level:3},{value:"Datos de rendimiento comunes",id:"datos-de-rendimiento-comunes",level:3},{value:"Aceleraci\xf3n TensorRT",id:"aceleraci\xf3n-tensorrt",level:2},{value:"Escenarios de uso",id:"escenarios-de-uso-4",level:3},{value:"M\xe9todo de activaci\xf3n",id:"m\xe9todo-de-activaci\xf3n",level:3},{value:"Mejora de rendimiento",id:"mejora-de-rendimiento",level:3},{value:"Notas",id:"notas",level:3},{value:"Problemas comunes",id:"problemas-comunes",level:2},{value:"GPU no detectada",id:"gpu-no-detectada",level:3},{value:"VRAM insuficiente",id:"vram-insuficiente",level:3},{value:"Rendimiento inferior a lo esperado",id:"rendimiento-inferior-a-lo-esperado",level:3},{value:"Lista de verificaci\xf3n de optimizaci\xf3n de rendimiento",id:"lista-de-verificaci\xf3n-de-optimizaci\xf3n-de-rendimiento",level:2},{value:"Lectura adicional",id:"lectura-adicional",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"backend-gpu-y-optimizaci\xf3n",children:"Backend GPU y optimizaci\xf3n"})}),"\n",(0,s.jsx)(n.p,{children:"Este art\xedculo presenta los diferentes backends GPU que soporta KataGo, las diferencias de rendimiento y c\xf3mo ajustar para obtener el mejor rendimiento."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"visi\xf3n-general-de-backends",children:"Visi\xf3n general de backends"}),"\n",(0,s.jsx)(n.p,{children:"KataGo soporta cuatro backends de c\xe1lculo:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Backend"}),(0,s.jsx)(n.th,{children:"Soporte de hardware"}),(0,s.jsx)(n.th,{children:"Rendimiento"}),(0,s.jsx)(n.th,{children:"Dificultad de instalaci\xf3n"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"CUDA"})}),(0,s.jsx)(n.td,{children:"GPU NVIDIA"}),(0,s.jsx)(n.td,{children:"\xd3ptimo"}),(0,s.jsx)(n.td,{children:"Media"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"OpenCL"})}),(0,s.jsx)(n.td,{children:"GPU NVIDIA/AMD/Intel"}),(0,s.jsx)(n.td,{children:"Bueno"}),(0,s.jsx)(n.td,{children:"F\xe1cil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Metal"})}),(0,s.jsx)(n.td,{children:"Apple Silicon"}),(0,s.jsx)(n.td,{children:"Bueno"}),(0,s.jsx)(n.td,{children:"F\xe1cil"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Eigen"})}),(0,s.jsx)(n.td,{children:"Solo CPU"}),(0,s.jsx)(n.td,{children:"M\xe1s lento"}),(0,s.jsx)(n.td,{children:"M\xe1s f\xe1cil"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"backend-cuda",children:"Backend CUDA"}),"\n",(0,s.jsx)(n.h3,{id:"escenarios-de-uso",children:"Escenarios de uso"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GPU NVIDIA (serie GTX 10 o superior)"}),"\n",(0,s.jsx)(n.li,{children:"Necesidad de m\xe1ximo rendimiento"}),"\n",(0,s.jsx)(n.li,{children:"Entorno de desarrollo CUDA disponible"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"requisitos-de-instalaci\xf3n",children:"Requisitos de instalaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Verificar versi\xf3n de CUDA\nnvcc --version\n\n# Verificar cuDNN\ncat /usr/local/cuda/include/cudnn_version.h | grep CUDNN_MAJOR\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Componente"}),(0,s.jsx)(n.th,{children:"Versi\xf3n recomendada"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CUDA"}),(0,s.jsx)(n.td,{children:"11.x o 12.x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"cuDNN"}),(0,s.jsx)(n.td,{children:"8.x"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Driver"}),(0,s.jsx)(n.td,{children:"470+"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"compilaci\xf3n",children:"Compilaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd KataGo/cpp\nmkdir build && cd build\n\ncmake .. -DUSE_BACKEND=CUDA \\\n         -DCUDNN_INCLUDE_DIR=/usr/local/cuda/include \\\n         -DCUDNN_LIBRARY=/usr/local/cuda/lib64/libcudnn.so\n\nmake -j$(nproc)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"caracter\xedsticas-de-rendimiento",children:"Caracter\xedsticas de rendimiento"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tensor Cores"}),": Soporte de aceleraci\xf3n FP16 (serie RTX)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Inferencia por lotes"}),": Mejor utilizaci\xf3n de GPU"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gesti\xf3n de memoria"}),": Control fino del uso de VRAM"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"backend-opencl",children:"Backend OpenCL"}),"\n",(0,s.jsx)(n.h3,{id:"escenarios-de-uso-1",children:"Escenarios de uso"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GPU AMD"}),"\n",(0,s.jsx)(n.li,{children:"GPU integrada Intel"}),"\n",(0,s.jsx)(n.li,{children:"GPU NVIDIA (sin entorno CUDA)"}),"\n",(0,s.jsx)(n.li,{children:"Despliegue multiplataforma"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"requisitos-de-instalaci\xf3n-1",children:"Requisitos de instalaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Linux - Instalar kit de desarrollo OpenCL\nsudo apt install ocl-icd-opencl-dev\n\n# Verificar dispositivos OpenCL disponibles\nclinfo\n"})}),"\n",(0,s.jsx)(n.h3,{id:"compilaci\xf3n-1",children:"Compilaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cmake .. -DUSE_BACKEND=OPENCL\nmake -j$(nproc)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"selecci\xf3n-de-driver",children:"Selecci\xf3n de driver"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Tipo de GPU"}),(0,s.jsx)(n.th,{children:"Driver recomendado"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AMD"}),(0,s.jsx)(n.td,{children:"ROCm o AMDGPU-PRO"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Intel"}),(0,s.jsx)(n.td,{children:"intel-opencl-icd"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"NVIDIA"}),(0,s.jsx)(n.td,{children:"nvidia-opencl-icd"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"ajuste-de-rendimiento",children:"Ajuste de rendimiento"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# config.cfg\nopenclDeviceToUse = 0          # N\xfamero de GPU\nopenclUseFP16 = auto           # Media precisi\xf3n (si es compatible)\nopenclUseFP16Storage = true    # Almacenamiento FP16\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"backend-metal",children:"Backend Metal"}),"\n",(0,s.jsx)(n.h3,{id:"escenarios-de-uso-2",children:"Escenarios de uso"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Apple Silicon (M1/M2/M3)"}),"\n",(0,s.jsx)(n.li,{children:"Sistema macOS"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compilaci\xf3n-2",children:"Compilaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cmake .. -DUSE_BACKEND=METAL\nmake -j$(sysctl -n hw.ncpu)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"optimizaci\xf3n-para-apple-silicon",children:"Optimizaci\xf3n para Apple Silicon"}),"\n",(0,s.jsx)(n.p,{children:"La arquitectura de memoria unificada de Apple Silicon tiene ventajas especiales:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Configuraci\xf3n recomendada para Apple Silicon\nnumNNServerThreadsPerModel = 1\nnnMaxBatchSize = 16\nnumSearchThreads = 4\n"})}),"\n",(0,s.jsx)(n.h3,{id:"comparaci\xf3n-de-rendimiento",children:"Comparaci\xf3n de rendimiento"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Chip"}),(0,s.jsx)(n.th,{children:"Rendimiento relativo"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M1"}),(0,s.jsx)(n.td,{children:"~RTX 2060"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M1 Pro/Max"}),(0,s.jsx)(n.td,{children:"~RTX 3060"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M2"}),(0,s.jsx)(n.td,{children:"~RTX 2070"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M3 Pro/Max"}),(0,s.jsx)(n.td,{children:"~RTX 3070"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"backend-eigen-solo-cpu",children:"Backend Eigen (solo CPU)"}),"\n",(0,s.jsx)(n.h3,{id:"escenarios-de-uso-3",children:"Escenarios de uso"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sin entorno GPU"}),"\n",(0,s.jsx)(n.li,{children:"Pruebas r\xe1pidas"}),"\n",(0,s.jsx)(n.li,{children:"Uso de baja intensidad"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"compilaci\xf3n-3",children:"Compilaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install libeigen3-dev\ncmake .. -DUSE_BACKEND=EIGEN\nmake -j$(nproc)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"expectativa-de-rendimiento",children:"Expectativa de rendimiento"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CPU un n\xfacleo: ~10-30 playouts/seg\nCPU multi-n\xfacleo: ~50-150 playouts/seg\nGPU (gama media): ~1000-3000 playouts/seg\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"par\xe1metros-de-ajuste-de-rendimiento",children:"Par\xe1metros de ajuste de rendimiento"}),"\n",(0,s.jsx)(n.h3,{id:"par\xe1metros-principales",children:"Par\xe1metros principales"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# config.cfg\n\n# === Configuraci\xf3n de red neuronal ===\n# N\xfamero de GPU (para multi-GPU)\nnnDeviceIdxs = 0\n\n# Hilos de inferencia por modelo\nnumNNServerThreadsPerModel = 2\n\n# Tama\xf1o m\xe1ximo de lote\nnnMaxBatchSize = 16\n\n# Tama\xf1o de cach\xe9 (2^N posiciones)\nnnCacheSizePowerOfTwo = 20\n\n# === Configuraci\xf3n de b\xfasqueda ===\n# N\xfamero de hilos de b\xfasqueda\nnumSearchThreads = 8\n\n# Visitas m\xe1ximas por movimiento\nmaxVisits = 800\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gu\xeda-de-ajuste-de-par\xe1metros",children:"Gu\xeda de ajuste de par\xe1metros"}),"\n",(0,s.jsx)(n.h4,{id:"nnmaxbatchsize",children:"nnMaxBatchSize"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Muy peque\xf1o: Baja utilizaci\xf3n de GPU, alta latencia de inferencia\nMuy grande: VRAM insuficiente, tiempo de espera largo\n\nValores recomendados:\n- 4GB VRAM: 8-12\n- 8GB VRAM: 16-24\n- 16GB+ VRAM: 32-64\n"})}),"\n",(0,s.jsx)(n.h4,{id:"numsearchthreads",children:"numSearchThreads"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Muy pocos: No puede alimentar la GPU\nMuchos: Cuello de botella en CPU, presi\xf3n de memoria\n\nValores recomendados:\n- 1-2 veces el n\xfamero de n\xfacleos de CPU\n- Similar a nnMaxBatchSize\n"})}),"\n",(0,s.jsx)(n.h4,{id:"numnnserverthreadspermodel",children:"numNNServerThreadsPerModel"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CUDA: 1-2\nOpenCL: 1-2\nEigen: N\xfamero de n\xfacleos de CPU\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ajuste-de-memoria",children:"Ajuste de memoria"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Reducir uso de VRAM\nnnMaxBatchSize = 8\nnnCacheSizePowerOfTwo = 18\n\n# Aumentar uso de VRAM (mejorar rendimiento)\nnnMaxBatchSize = 32\nnnCacheSizePowerOfTwo = 22\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"configuraci\xf3n-multi-gpu",children:"Configuraci\xf3n multi-GPU"}),"\n",(0,s.jsx)(n.h3,{id:"multi-gpu-en-una-m\xe1quina",children:"Multi-GPU en una m\xe1quina"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Usar GPU 0 y GPU 1\nnnDeviceIdxs = 0,1\n\n# Hilos por GPU\nnumNNServerThreadsPerModel = 2\n"})}),"\n",(0,s.jsx)(n.h3,{id:"balanceo-de-carga",children:"Balanceo de carga"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Asignar pesos seg\xfan rendimiento de GPU\n# GPU 0 m\xe1s potente, asignar m\xe1s trabajo\nnnDeviceIdxs = 0,0,1\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"benchmarking",children:"Benchmarking"}),"\n",(0,s.jsx)(n.h3,{id:"ejecutar-benchmark",children:"Ejecutar benchmark"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"katago benchmark -model model.bin.gz -config config.cfg\n"})}),"\n",(0,s.jsx)(n.h3,{id:"interpretaci\xf3n-de-salida",children:"Interpretaci\xf3n de salida"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"GPU 0: NVIDIA GeForce RTX 3080\nThreads: 8, Batch Size: 16\n\nBenchmark results:\n- Neural net evals/second: 2847.3\n- Playouts/second: 4521.8\n- Time per move (1000 visits): 0.221 sec\n\nMemory usage:\n- Peak GPU memory: 2.1 GB\n- Peak system memory: 1.3 GB\n"})}),"\n",(0,s.jsx)(n.h3,{id:"datos-de-rendimiento-comunes",children:"Datos de rendimiento comunes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"GPU"}),(0,s.jsx)(n.th,{children:"Modelo"}),(0,s.jsx)(n.th,{children:"Playouts/seg"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 3060"}),(0,s.jsx)(n.td,{children:"b18c384"}),(0,s.jsx)(n.td,{children:"~2500"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 3080"}),(0,s.jsx)(n.td,{children:"b18c384"}),(0,s.jsx)(n.td,{children:"~4500"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 4090"}),(0,s.jsx)(n.td,{children:"b18c384"}),(0,s.jsx)(n.td,{children:"~8000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M1 Pro"}),(0,s.jsx)(n.td,{children:"b18c384"}),(0,s.jsx)(n.td,{children:"~1500"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"M2 Max"}),(0,s.jsx)(n.td,{children:"b18c384"}),(0,s.jsx)(n.td,{children:"~2200"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"aceleraci\xf3n-tensorrt",children:"Aceleraci\xf3n TensorRT"}),"\n",(0,s.jsx)(n.h3,{id:"escenarios-de-uso-4",children:"Escenarios de uso"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"GPU NVIDIA"}),"\n",(0,s.jsx)(n.li,{children:"B\xfasqueda de rendimiento extremo"}),"\n",(0,s.jsx)(n.li,{children:"Aceptar tiempo de inicializaci\xf3n m\xe1s largo"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"m\xe9todo-de-activaci\xf3n",children:"M\xe9todo de activaci\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Activar al compilar\ncmake .. -DUSE_BACKEND=CUDA -DUSE_TENSORRT=ON\n\n# O usar versi\xf3n precompilada\nkatago-tensorrt\n"})}),"\n",(0,s.jsx)(n.h3,{id:"mejora-de-rendimiento",children:"Mejora de rendimiento"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"CUDA est\xe1ndar: 100%\nTensorRT FP32: +20-30%\nTensorRT FP16: +50-80% (serie RTX)\nTensorRT INT8: +100-150% (requiere calibraci\xf3n)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"notas",children:"Notas"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Primera ejecuci\xf3n necesita compilar el motor TensorRT (varios minutos)"}),"\n",(0,s.jsx)(n.li,{children:"Diferentes GPUs necesitan recompilar"}),"\n",(0,s.jsx)(n.li,{children:"FP16/INT8 pueden reducir ligeramente la precisi\xf3n"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"problemas-comunes",children:"Problemas comunes"}),"\n",(0,s.jsx)(n.h3,{id:"gpu-no-detectada",children:"GPU no detectada"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Verificar estado de GPU\nnvidia-smi  # NVIDIA\nrocm-smi    # AMD\nclinfo      # OpenCL\n\n# KataGo listar GPUs disponibles\nkatago gpuinfo\n"})}),"\n",(0,s.jsx)(n.h3,{id:"vram-insuficiente",children:"VRAM insuficiente"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# Usar modelo m\xe1s peque\xf1o\n# b18c384 \u2192 b10c128\n\n# Reducir tama\xf1o de lote\nnnMaxBatchSize = 4\n\n# Reducir cach\xe9\nnnCacheSizePowerOfTwo = 16\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rendimiento-inferior-a-lo-esperado",children:"Rendimiento inferior a lo esperado"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Confirmar que se usa el backend correcto (CUDA > OpenCL > Eigen)"}),"\n",(0,s.jsxs)(n.li,{children:["Verificar que ",(0,s.jsx)(n.code,{children:"numSearchThreads"})," sea suficiente"]}),"\n",(0,s.jsx)(n.li,{children:"Confirmar que la GPU no est\xe1 ocupada por otros programas"}),"\n",(0,s.jsxs)(n.li,{children:["Usar comando ",(0,s.jsx)(n.code,{children:"benchmark"})," para confirmar rendimiento"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"lista-de-verificaci\xf3n-de-optimizaci\xf3n-de-rendimiento",children:"Lista de verificaci\xf3n de optimizaci\xf3n de rendimiento"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Seleccionar el backend correcto (CUDA/OpenCL/Metal)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Instalar los drivers de GPU m\xe1s recientes"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ajustar ",(0,s.jsx)(n.code,{children:"nnMaxBatchSize"})," seg\xfan VRAM"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ajustar ",(0,s.jsx)(n.code,{children:"numSearchThreads"})," seg\xfan CPU"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Ejecutar ",(0,s.jsx)(n.code,{children:"benchmark"})," para confirmar rendimiento"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitorear utilizaci\xf3n de GPU (deber\xeda ser > 80%)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"lectura-adicional",children:"Lectura adicional"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../mcts-implementation",children:"Detalles de implementaci\xf3n de MCTS"})," \u2014 Origen de la necesidad de inferencia por lotes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../quantization-deploy",children:"Cuantizaci\xf3n y despliegue de modelos"})," \u2014 Optimizaci\xf3n de rendimiento adicional"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../../hands-on/setup",children:"Gu\xeda de instalaci\xf3n completa"})," \u2014 Pasos de instalaci\xf3n para cada plataforma"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},30416(e,n,i){i.d(n,{R:()=>a,x:()=>c});var d=i(59471);const s={},r=d.createContext(s);function a(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);