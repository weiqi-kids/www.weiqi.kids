"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[694],{89166(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"alphago/board-representation","title":"Board State Representation","description":"From 2D arrays to neural network feature planes, understanding how Go AI \\"sees\\" the board","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/alphago/06-board-representation.mdx","sourceDirName":"alphago","slug":"/alphago/board-representation","permalink":"/en/docs/alphago/board-representation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/alphago/06-board-representation.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Board State Representation","description":"From 2D arrays to neural network feature planes, understanding how Go AI \\"sees\\" the board","keywords":["Board Representation","Zobrist Hashing","Union-Find","Feature Encoding","AlphaGo Feature Planes"]},"sidebar":"tutorialSidebar","previous":{"title":"Limits of Traditional Methods","permalink":"/en/docs/alphago/traditional-limits"},"next":{"title":"Policy Network Deep Dive","permalink":"/en/docs/alphago/policy-network"}}');var s=t(62615),i=t(30416),a=t(45695);const o={sidebar_position:7,title:"Board State Representation",description:'From 2D arrays to neural network feature planes, understanding how Go AI "sees" the board',keywords:["Board Representation","Zobrist Hashing","Union-Find","Feature Encoding","AlphaGo Feature Planes"]},l="Board State Representation",d={},c=[{value:"2D Array Representation: The Most Intuitive Approach",id:"2d-array-representation-the-most-intuitive-approach",level:2},{value:"Basic Concept",id:"basic-concept",level:3},{value:"Coordinate Systems",id:"coordinate-systems",level:3},{value:"1. Numeric Coordinates (For Programming)",id:"1-numeric-coordinates-for-programming",level:4},{value:"2. Letter-Number Coordinates (For Game Records)",id:"2-letter-number-coordinates-for-game-records",level:4},{value:"Coordinate Conversion Functions",id:"coordinate-conversion-functions",level:3},{value:"Space Complexity Analysis",id:"space-complexity-analysis",level:3},{value:"Basic Operations",id:"basic-operations",level:3},{value:"Zobrist Hashing: Fast Position Identification",id:"zobrist-hashing-fast-position-identification",level:2},{value:"Problem Background",id:"problem-background",level:3},{value:"Zobrist Hashing Principle",id:"zobrist-hashing-principle",level:3},{value:"Random Number Table",id:"random-number-table",level:3},{value:"Properties of XOR Operation",id:"properties-of-xor-operation",level:3},{value:"Implementation",id:"implementation",level:3},{value:"Incremental Update Advantage",id:"incremental-update-advantage",level:3},{value:"Collision Probability",id:"collision-probability",level:3},{value:"String Representation (Union-Find): Connectivity Problem",id:"string-representation-union-find-connectivity-problem",level:2},{value:"Concept of Strings",id:"concept-of-strings",level:3},{value:"Why Efficient String Management is Needed",id:"why-efficient-string-management-is-needed",level:3},{value:"Union-Find Data Structure",id:"union-find-data-structure",level:3},{value:"Time Complexity",id:"time-complexity",level:3},{value:"Union-Find Application in Go",id:"union-find-application-in-go",level:3},{value:"Liberty Counting",id:"liberty-counting",level:3},{value:"Evolution of Feature Encoding",id:"evolution-of-feature-encoding",level:2},{value:"GNU Go&#39;s Hand-Crafted Features",id:"gnu-gos-hand-crafted-features",level:3},{value:"AlphaGo&#39;s 48 Feature Planes",id:"alphagos-48-feature-planes",level:3},{value:"Classification of 48 Planes",id:"classification-of-48-planes",level:3},{value:"AlphaGo Zero&#39;s 17 Feature Planes",id:"alphago-zeros-17-feature-planes",level:3},{value:"The Simplicity of 17 Planes",id:"the-simplicity-of-17-planes",level:3},{value:"Visualization of Feature Planes",id:"visualization-of-feature-planes",level:3},{value:"Symmetry Handling: 8 Transformations",id:"symmetry-handling-8-transformations",level:2},{value:"Symmetry in Go",id:"symmetry-in-go",level:3},{value:"Mathematical Representation",id:"mathematical-representation",level:3},{value:"Implementation",id:"implementation-1",level:3},{value:"Data Augmentation",id:"data-augmentation",level:3},{value:"Using Symmetry During Inference",id:"using-symmetry-during-inference",level:3},{value:"Summary of Board Representation Methods",id:"summary-of-board-representation-methods",level:2},{value:"Animation Reference",id:"animation-reference",level:2},{value:"Further Reading",id:"further-reading",level:2},{value:"References",id:"references",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"board-state-representation",children:"Board State Representation"})}),"\n",(0,s.jsxs)(n.p,{children:["Before designing a Go AI, we must first solve a fundamental question: ",(0,s.jsx)(n.strong,{children:'How do we let a computer "understand" the board?'})]}),"\n",(0,s.jsx)(n.p,{children:"This seemingly simple question involves data structures, algorithms, and neural network input design on multiple levels. This article will start from the most basic 2D array and progressively introduce various board representation methods used in Go AI, ultimately explaining how AlphaGo encodes the board into a format that neural networks can process."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2d-array-representation-the-most-intuitive-approach",children:"2D Array Representation: The Most Intuitive Approach"}),"\n",(0,s.jsx)(n.h3,{id:"basic-concept",children:"Basic Concept"}),"\n",(0,s.jsxs)(n.p,{children:["A Go board is a 19x19 grid network, and the most intuitive representation is using a ",(0,s.jsx)(n.strong,{children:"2D array"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import numpy as np\n\n# Board constants\nBOARD_SIZE = 19\nEMPTY = 0\nBLACK = 1\nWHITE = 2\n\n# Initialize empty board\nboard = np.zeros((BOARD_SIZE, BOARD_SIZE), dtype=np.int8)\n\n# Place stone: Black at D4 (3, 3)\nboard[3, 3] = BLACK\n\n# Place stone: White at Q16 (15, 3)\nboard[15, 3] = WHITE\n"})}),"\n",(0,s.jsx)(n.h3,{id:"coordinate-systems",children:"Coordinate Systems"}),"\n",(0,s.jsx)(n.p,{children:"Go uses two common coordinate systems:"}),"\n",(0,s.jsx)(n.h4,{id:"1-numeric-coordinates-for-programming",children:"1. Numeric Coordinates (For Programming)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18\n0   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n1   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n2   .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n3   .  .  .  \u25cf  .  .  .  .  .  +  .  .  .  .  .  \u25cb  .  .  .\n...\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-letter-number-coordinates-for-game-records",children:"2. Letter-Number Coordinates (For Game Records)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    A  B  C  D  E  F  G  H  J  K  L  M  N  O  P  Q  R  S  T\n19  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n18  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n17  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n16  .  .  .  \u25cf  .  .  .  .  .  +  .  .  .  .  .  \u25cb  .  .  .\n...\n"})}),"\n",(0,s.jsx)(n.p,{children:'Note: Letter coordinates skip "I" (to avoid confusion with the number 1).'}),"\n",(0,s.jsx)(n.h3,{id:"coordinate-conversion-functions",children:"Coordinate Conversion Functions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def coord_to_index(coord):\n    """\n    Convert game record coordinates to array indices\n    Example: \'D4\' -> (3, 15)\n    """\n    letters = \'ABCDEFGHJKLMNOPQRST\'  # Skip I\n    col = letters.index(coord[0].upper())\n    row = BOARD_SIZE - int(coord[1:])\n    return row, col\n\n\ndef index_to_coord(row, col):\n    """\n    Convert array indices to game record coordinates\n    Example: (3, 15) -> \'Q16\'\n    """\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    return f"{letters[col]}{BOARD_SIZE - row}"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"space-complexity-analysis",children:"Space Complexity Analysis"}),"\n",(0,s.jsx)(n.p,{children:"Space complexity of 2D array representation:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Representation"}),(0,s.jsx)(n.th,{children:"Size per Cell"}),(0,s.jsx)(n.th,{children:"Total Space"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int8"})}),(0,s.jsx)(n.td,{children:"1 byte"}),(0,s.jsx)(n.td,{children:"361 bytes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int32"})}),(0,s.jsx)(n.td,{children:"4 bytes"}),(0,s.jsx)(n.td,{children:"1.4 KB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"float64"})}),(0,s.jsx)(n.td,{children:"8 bytes"}),(0,s.jsx)(n.td,{children:"2.9 KB"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["For modern computers, this memory usage is not an issue. However, when storing large numbers of board states (such as in MCTS search trees), using ",(0,s.jsx)(n.code,{children:"int8"})," can significantly reduce memory usage."]}),"\n",(0,s.jsx)(n.h3,{id:"basic-operations",children:"Basic Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class Board:\n    def __init__(self, size=19):\n        self.size = size\n        self.board = np.zeros((size, size), dtype=np.int8)\n        self.current_player = BLACK\n        self.ko_point = None  # Ko forbidden point\n        self.move_history = []\n\n    def is_valid_move(self, row, col):\n        """Check if a move is legal"""\n        # 1. Position is within the board\n        if not (0 <= row < self.size and 0 <= col < self.size):\n            return False\n\n        # 2. Position is empty\n        if self.board[row, col] != EMPTY:\n            return False\n\n        # 3. Not a ko forbidden point\n        if self.ko_point == (row, col):\n            return False\n\n        # 4. Not suicide (unless it captures stones)\n        # ... requires more complex checking\n\n        return True\n\n    def place_stone(self, row, col):\n        """Place a stone"""\n        if not self.is_valid_move(row, col):\n            return False\n\n        self.board[row, col] = self.current_player\n        self.move_history.append((row, col))\n\n        # Handle captures\n        captures = self._remove_captured_stones(row, col)\n\n        # Update ko forbidden point\n        self._update_ko(row, col, captures)\n\n        # Switch player\n        self.current_player = WHITE if self.current_player == BLACK else BLACK\n\n        return True\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"zobrist-hashing-fast-position-identification",children:"Zobrist Hashing: Fast Position Identification"}),"\n",(0,s.jsx)(n.h3,{id:"problem-background",children:"Problem Background"}),"\n",(0,s.jsx)(n.p,{children:'In Go AI, we often need to determine "whether two positions are the same":'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ko rule"}),": Cannot return to the previous move's state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Triple ko"}),": Special rule handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Transposition Table"}),": Remember already-searched positions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Neural network cache"}),": Avoid redundant computations"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If we compare each cell every time, it takes O(361) time. Is there a faster method?"}),"\n",(0,s.jsx)(n.h3,{id:"zobrist-hashing-principle",children:"Zobrist Hashing Principle"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Zobrist Hashing"})," (also called Zobrist Keys) is a clever hashing method proposed by Albert Zobrist in 1970. The core idea is:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Pre-generate a ",(0,s.jsx)(n.strong,{children:"random number"}),' for each "position x color" combination']}),"\n",(0,s.jsxs)(n.li,{children:["Board hash value = ",(0,s.jsx)(n.strong,{children:"XOR"})," of all random numbers for positions with stones"]}),"\n",(0,s.jsx)(n.li,{children:"Placing/removing a stone only requires one XOR operation to update the hash value"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"random-number-table",children:"Random Number Table"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import numpy as np\n\n# Generate random number table\n# Use fixed seed for reproducibility\nnp.random.seed(42)\n\n# One random number for each position and color\n# zobrist[color][row][col]\nzobrist_table = np.random.randint(\n    0, 2**64,\n    size=(3, BOARD_SIZE, BOARD_SIZE),  # 3: EMPTY, BLACK, WHITE\n    dtype=np.uint64\n)\n\n# Random number for whose turn it is\nzobrist_player = np.random.randint(0, 2**64, dtype=np.uint64)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"properties-of-xor-operation",children:"Properties of XOR Operation"}),"\n",(0,s.jsx)(n.p,{children:"XOR has several important properties that make it ideal for this application:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Self-inverse"}),": A ^ A = 0 (XOR of same number equals 0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reversibility"}),": A ^ B ^ B = A (XOR twice cancels out)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Commutativity"}),": A ^ B = B ^ A"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Associativity"}),": (A ^ B) ^ C = A ^ (B ^ C)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This means:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Placing stone: ",(0,s.jsx)(n.code,{children:"hash ^= zobrist[color][row][col]"})]}),"\n",(0,s.jsxs)(n.li,{children:["Removing stone: ",(0,s.jsx)(n.code,{children:"hash ^= zobrist[color][row][col]"})," (same operation!)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class ZobristBoard:\n    def __init__(self, size=19):\n        self.size = size\n        self.board = np.zeros((size, size), dtype=np.int8)\n        self.current_player = BLACK\n        self.hash = np.uint64(0)\n\n        # Initialize random number table\n        self._init_zobrist_table()\n\n    def _init_zobrist_table(self):\n        np.random.seed(12345)\n        self.zobrist = np.random.randint(\n            0, 2**64,\n            size=(3, self.size, self.size),\n            dtype=np.uint64\n        )\n        self.zobrist_player = np.random.randint(0, 2**64, dtype=np.uint64)\n\n    def place_stone(self, row, col, color):\n        """Place stone and update hash value"""\n        # Remove old state (if there\'s a stone)\n        old_color = self.board[row, col]\n        if old_color != EMPTY:\n            self.hash ^= self.zobrist[old_color, row, col]\n\n        # Add new stone\n        self.board[row, col] = color\n        self.hash ^= self.zobrist[color, row, col]\n\n    def remove_stone(self, row, col):\n        """Remove stone and update hash value"""\n        color = self.board[row, col]\n        if color != EMPTY:\n            self.hash ^= self.zobrist[color, row, col]\n            self.board[row, col] = EMPTY\n\n    def switch_player(self):\n        """Switch player and update hash value"""\n        self.hash ^= self.zobrist_player\n        self.current_player = WHITE if self.current_player == BLACK else BLACK\n\n    def get_hash(self):\n        """Get current position\'s hash value"""\n        return self.hash\n'})}),"\n",(0,s.jsx)(n.h3,{id:"incremental-update-advantage",children:"Incremental Update Advantage"}),"\n",(0,s.jsx)(n.p,{children:"With Zobrist Hashing, updating the hash value only takes O(1) time:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operation"}),(0,s.jsx)(n.th,{children:"Traditional Comparison"}),(0,s.jsx)(n.th,{children:"Zobrist"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Compare two positions"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update after placing"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update after capture"}),(0,s.jsx)(n.td,{children:"O(361)"}),(0,s.jsx)(n.td,{children:"O(k), k is number captured"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"collision-probability",children:"Collision Probability"}),"\n",(0,s.jsx)(n.p,{children:"With 64-bit hash, collision probability is extremely low:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"P(collision) ~ n^2 / 2^65"})}),"\n",(0,s.jsx)(n.p,{children:"where n is the number of different positions. Even with 1 billion positions, collision probability is only about 10^-3."}),"\n",(0,s.jsx)(n.p,{children:"In practice, many Go programs use 64-bit Zobrist Hashing without collision checking because the probability is negligible."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"string-representation-union-find-connectivity-problem",children:"String Representation (Union-Find): Connectivity Problem"}),"\n",(0,s.jsx)(n.h3,{id:"concept-of-strings",children:"Concept of Strings"}),"\n",(0,s.jsxs)(n.p,{children:["In Go, a ",(0,s.jsx)(n.strong,{children:"string"}),' (or chain) refers to a group of connected stones of the same color. The "liberties" of a string determine its life or death.']}),"\n",(0,s.jsx)(a.tO,{size:200,stones:[{x:3,y:3,color:"black"},{x:4,y:3,color:"black"},{x:5,y:3,color:"black"},{x:4,y:4,color:"black"},{x:6,y:3,color:"white"},{x:6,y:4,color:"white"}],labels:[{x:4,y:3,text:"A"}]}),"\n",(0,s.jsx)(n.p,{children:"In the figure above, the four black stones form a string. The number of liberties of this string determines its life or death."}),"\n",(0,s.jsx)(n.h3,{id:"why-efficient-string-management-is-needed",children:"Why Efficient String Management is Needed"}),"\n",(0,s.jsx)(n.p,{children:"Each move may:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create"})," a new string"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Merge"})," multiple strings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reduce"})," the liberties of opponent's strings"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Capture"})," strings with no liberties"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These operations need to be performed efficiently because in MCTS, tens of thousands of move simulations may be performed per second."}),"\n",(0,s.jsx)(n.h3,{id:"union-find-data-structure",children:"Union-Find Data Structure"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Union-Find"}),' (also called Disjoint Set Union, DSU) is a classic data structure for handling "connectivity" problems:']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class UnionFind:\n    def __init__(self, size):\n        # parent[i] points to i\'s parent node\n        # If parent[i] = i, then i is a root node\n        self.parent = list(range(size))\n        self.rank = [0] * size\n\n    def find(self, x):\n        """\n        Find the root node of the set containing x (with path compression)\n        """\n        if self.parent[x] != x:\n            self.parent[x] = self.find(self.parent[x])  # Path compression\n        return self.parent[x]\n\n    def union(self, x, y):\n        """\n        Merge the sets containing x and y (with union by rank)\n        """\n        root_x = self.find(x)\n        root_y = self.find(y)\n\n        if root_x == root_y:\n            return  # Already in the same set\n\n        # Union by rank: attach smaller tree to larger tree\n        if self.rank[root_x] < self.rank[root_y]:\n            self.parent[root_x] = root_y\n        elif self.rank[root_x] > self.rank[root_y]:\n            self.parent[root_y] = root_x\n        else:\n            self.parent[root_y] = root_x\n            self.rank[root_x] += 1\n'})}),"\n",(0,s.jsx)(n.h3,{id:"time-complexity",children:"Time Complexity"}),"\n",(0,s.jsxs)(n.p,{children:["Union-Find's time complexity uses the ",(0,s.jsx)(n.strong,{children:"inverse Ackermann function"})," alpha(n):"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Operation"}),(0,s.jsx)(n.th,{children:"Time Complexity"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"find"}),(0,s.jsx)(n.td,{children:"O(alpha(n)) ~ O(1)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"union"}),(0,s.jsx)(n.td,{children:"O(alpha(n)) ~ O(1)"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"alpha(n) grows extremely slowly; for any practical n, alpha(n) \u2264 4. Thus it can be considered constant time."}),"\n",(0,s.jsx)(n.h3,{id:"union-find-application-in-go",children:"Union-Find Application in Go"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'class GoStringManager:\n    def __init__(self, size=19):\n        self.size = size\n        num_points = size * size\n\n        # Union-Find structure\n        self.parent = list(range(num_points))\n        self.rank = [0] * num_points\n\n        # Liberties for each string (indexed by root)\n        self.liberties = [set() for _ in range(num_points)]\n\n        # Stones for each string (indexed by root)\n        self.stones = [set() for _ in range(num_points)]\n\n    def _index(self, row, col):\n        return row * self.size + col\n\n    def _neighbors(self, row, col):\n        """Get four neighbors"""\n        neighbors = []\n        if row > 0: neighbors.append((row - 1, col))\n        if row < self.size - 1: neighbors.append((row + 1, col))\n        if col > 0: neighbors.append((row, col - 1))\n        if col < self.size - 1: neighbors.append((row, col + 1))\n        return neighbors\n\n    def find(self, idx):\n        if self.parent[idx] != idx:\n            self.parent[idx] = self.find(self.parent[idx])\n        return self.parent[idx]\n\n    def add_stone(self, row, col, color, board):\n        """\n        Add a stone, handle connections and captures\n        """\n        idx = self._index(row, col)\n\n        # Create new string\n        self.stones[idx] = {idx}\n        self.liberties[idx] = set()\n\n        # Calculate this stone\'s liberties\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == 0:  # Empty point is a liberty\n                self.liberties[idx].add(nidx)\n\n        # Merge with same-color neighbors\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == color:\n                self._merge_strings(idx, nidx)\n\n        # Reduce opponent strings\' liberties\n        opponent = 3 - color  # BLACK=1, WHITE=2\n        captured = []\n        for nr, nc in self._neighbors(row, col):\n            nidx = self._index(nr, nc)\n            if board[nr, nc] == opponent:\n                root = self.find(nidx)\n                self.liberties[root].discard(idx)\n                if len(self.liberties[root]) == 0:\n                    captured.append(root)\n\n        return captured\n\n    def _merge_strings(self, idx1, idx2):\n        """Merge two strings"""\n        root1 = self.find(idx1)\n        root2 = self.find(idx2)\n\n        if root1 == root2:\n            return\n\n        # Union by rank\n        if self.rank[root1] < self.rank[root2]:\n            root1, root2 = root2, root1\n\n        self.parent[root2] = root1\n        if self.rank[root1] == self.rank[root2]:\n            self.rank[root1] += 1\n\n        # Merge liberty and stone sets\n        self.liberties[root1] |= self.liberties[root2]\n        self.stones[root1] |= self.stones[root2]\n\n        # Remove own position from liberties (stone is not its own liberty)\n        for stone_idx in self.stones[root2]:\n            self.liberties[root1].discard(stone_idx)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"liberty-counting",children:"Liberty Counting"}),"\n",(0,s.jsx)(n.p,{children:"Counting a string's liberties is one of the most common operations in Go:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def count_liberties(self, row, col, board):\n    """Count liberties of the string containing this stone"""\n    idx = self._index(row, col)\n    root = self.find(idx)\n    return len(self.liberties[root])\n'})}),"\n",(0,s.jsx)(n.p,{children:"With Union-Find, this operation is O(1) (assuming find is O(1))."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"evolution-of-feature-encoding",children:"Evolution of Feature Encoding"}),"\n",(0,s.jsx)(n.p,{children:"From traditional hand-crafted features to AlphaGo Zero's simple features, Go AI feature encoding has undergone significant evolution."}),"\n",(0,s.jsx)(n.h3,{id:"gnu-gos-hand-crafted-features",children:"GNU Go's Hand-Crafted Features"}),"\n",(0,s.jsx)(n.p,{children:"Early Go programs (like GNU Go) used many hand-designed features:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def extract_features_gnugo(board, point):\n    \"\"\"\n    GNU Go style hand-crafted feature extraction\n    \"\"\"\n    features = {}\n\n    # 1. Pattern matching (predefined local shapes)\n    features['pattern'] = match_pattern(board, point)\n\n    # 2. Tactical features\n    features['can_capture'] = check_capture(board, point)\n    features['can_connect'] = check_connect(board, point)\n    features['creates_eye'] = check_eye_creation(board, point)\n\n    # 3. Local features\n    features['liberties_after'] = count_liberties_after_move(board, point)\n    features['enemy_liberties'] = count_enemy_liberties(board, point)\n\n    # 4. Global features\n    features['distance_to_edge'] = min(\n        point[0], point[1],\n        18 - point[0], 18 - point[1]\n    )\n\n    # ... more features\n\n    return features\n"})}),"\n",(0,s.jsx)(n.p,{children:"Problems with this approach:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Requires extensive human expert knowledge"}),"\n",(0,s.jsx)(n.li,{children:"Features may be incomplete"}),"\n",(0,s.jsx)(n.li,{children:"Difficult to discover new patterns"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"alphagos-48-feature-planes",children:"AlphaGo's 48 Feature Planes"}),"\n",(0,s.jsxs)(n.p,{children:["AlphaGo (2016 Nature version) used ",(0,s.jsx)(n.strong,{children:"48 feature planes"})," as neural network input:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def encode_alphago_features(board, player, history):\n    """\n    AlphaGo 2016\'s 48 feature planes\n\n    Returns:\n        (19, 19, 48) tensor\n    """\n    features = np.zeros((19, 19, 48), dtype=np.float32)\n\n    # Plane 1: Black stone positions\n    features[:, :, 0] = (board == BLACK)\n\n    # Plane 2: White stone positions\n    features[:, :, 1] = (board == WHITE)\n\n    # Plane 3: Empty points\n    features[:, :, 2] = (board == EMPTY)\n\n    # Plane 4: All ones (bias term)\n    features[:, :, 3] = 1\n\n    # Planes 5-12: Liberty encoding (one plane each for 1-8 liberties)\n    for i, num_libs in enumerate(range(1, 9)):\n        for r in range(19):\n            for c in range(19):\n                if board[r, c] != EMPTY:\n                    libs = count_liberties(board, r, c)\n                    if libs == num_libs:\n                        features[r, c, 4 + i] = 1\n\n    # Planes 13-20: Opponent liberties after capture\n    # ...\n\n    # Planes 21-28: Own liberties after move\n    # ...\n\n    # Planes 29-36: History of past 8 moves (one plane each)\n    for i, (r, c) in enumerate(history[-8:]):\n        features[r, c, 28 + i] = 1\n\n    # Planes 37-44: Ladder analysis\n    # ...\n\n    # Planes 45-48: Symmetry-related\n    # ...\n\n    # Plane 49: Whose turn (all 1s for Black, all 0s for White)\n    if player == BLACK:\n        features[:, :, 47] = 1\n\n    return features\n'})}),"\n",(0,s.jsx)(n.h3,{id:"classification-of-48-planes",children:"Classification of 48 Planes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Category"}),(0,s.jsx)(n.th,{children:"# Planes"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Stone positions"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"Black, white, empty"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Constant"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"All ones"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Liberties"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"1-8 liberties"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Liberties after capture"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Liberties after hypothetical move"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Liberties after move"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Liberties after hypothetical move"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"History"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Past 8 moves"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ladder"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Complex ladder analysis"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Other"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"Turn, symmetry, etc."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"alphago-zeros-17-feature-planes",children:"AlphaGo Zero's 17 Feature Planes"}),"\n",(0,s.jsxs)(n.p,{children:["AlphaGo Zero (2017) greatly simplified feature encoding, using only ",(0,s.jsx)(n.strong,{children:"17 planes"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def encode_alphago_zero_features(board_history, player):\n    """\n    AlphaGo Zero\'s 17 feature planes\n\n    Args:\n        board_history: Past 8 board states (including current)\n        player: Current player\n\n    Returns:\n        (19, 19, 17) tensor\n    """\n    features = np.zeros((19, 19, 17), dtype=np.float32)\n\n    # Planes 1-8: Black stone history (most recent 8 steps)\n    for i, board in enumerate(board_history[-8:]):\n        features[:, :, i] = (board == BLACK)\n\n    # Planes 9-16: White stone history (most recent 8 steps)\n    for i, board in enumerate(board_history[-8:]):\n        features[:, :, 8 + i] = (board == WHITE)\n\n    # Plane 17: Whose turn (all 1s for Black, all 0s for White)\n    if player == BLACK:\n        features[:, :, 16] = 1\n\n    return features\n'})}),"\n",(0,s.jsx)(n.h3,{id:"the-simplicity-of-17-planes",children:"The Simplicity of 17 Planes"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Category"}),(0,s.jsx)(n.th,{children:"# Planes"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Black history"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"Black stone positions for past 8 time steps"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"White history"}),(0,s.jsx)(n.td,{children:"8"}),(0,s.jsx)(n.td,{children:"White stone positions for past 8 time steps"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Current player"}),(0,s.jsx)(n.td,{children:"1"}),(0,s.jsx)(n.td,{children:"All 1s or all 0s"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Why can it be this simple?"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key insight: Let the neural network learn features on its own."})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"AlphaGo Zero proved that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No need to manually calculate liberties (network can infer from stone positions)"}),"\n",(0,s.jsx)(n.li,{children:"No need for ladder analysis (network can learn to recognize ladders)"}),"\n",(0,s.jsx)(n.li,{children:"No need for complex capture prediction (network can understand move consequences)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This embodies the core advantage of deep learning: ",(0,s.jsx)(n.strong,{children:"end-to-end learning"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"visualization-of-feature-planes",children:"Visualization of Feature Planes"}),"\n",(0,s.jsx)(n.p,{children:"Let's see what these feature planes actually look like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Original board:              Black stone plane:          White stone plane:\n. . . . . .            0 0 0 0 0 0            0 0 0 0 0 0\n. \u25cf \u25cb . . .            0 1 0 0 0 0            0 0 1 0 0 0\n. . \u25cf \u25cb . .    ->      0 0 1 0 0 0     +      0 0 0 1 0 0\n. . . \u25cf . .            0 0 0 1 0 0            0 0 0 0 0 0\n. . . . . .            0 0 0 0 0 0            0 0 0 0 0 0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Each plane is a binary matrix (0 or 1), and neural networks can extract patterns from these planes through convolution operations."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"symmetry-handling-8-transformations",children:"Symmetry Handling: 8 Transformations"}),"\n",(0,s.jsx)(n.h3,{id:"symmetry-in-go",children:"Symmetry in Go"}),"\n",(0,s.jsxs)(n.p,{children:["The Go board has ",(0,s.jsx)(n.strong,{children:"8 symmetries"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 rotations"}),": 0, 90, 180, 270 degrees"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"4 flipped rotations"}),": Horizontal flip + 4 rotations"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This forms a ",(0,s.jsx)(n.strong,{children:"dihedral group D4"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"mathematical-representation",children:"Mathematical Representation"}),"\n",(0,s.jsx)(n.p,{children:"Let (x, y) be coordinates on the board (centered at (9, 9)), the 8 transformations can be represented as:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Transformation"}),(0,s.jsx)(n.th,{children:"Formula"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Identity"}),(0,s.jsx)(n.td,{children:"(x, y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotate 90"}),(0,s.jsx)(n.td,{children:"(-y, x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotate 180"}),(0,s.jsx)(n.td,{children:"(-x, -y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rotate 270"}),(0,s.jsx)(n.td,{children:"(y, -x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Horizontal flip"}),(0,s.jsx)(n.td,{children:"(-x, y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Vertical flip"}),(0,s.jsx)(n.td,{children:"(x, -y)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Diagonal flip"}),(0,s.jsx)(n.td,{children:"(y, x)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Anti-diagonal flip"}),(0,s.jsx)(n.td,{children:"(-y, -x)"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"implementation-1",children:"Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def get_symmetries(board):\n    """\n    Get 8 symmetric transformations of the board\n\n    Returns:\n        List of 8 boards\n    """\n    symmetries = []\n\n    # Original\n    symmetries.append(board.copy())\n\n    # Rotate 90\n    symmetries.append(np.rot90(board, k=1))\n\n    # Rotate 180\n    symmetries.append(np.rot90(board, k=2))\n\n    # Rotate 270\n    symmetries.append(np.rot90(board, k=3))\n\n    # Horizontal flip\n    symmetries.append(np.fliplr(board))\n\n    # Vertical flip\n    symmetries.append(np.flipud(board))\n\n    # Diagonal flip\n    symmetries.append(board.T)\n\n    # Anti-diagonal flip\n    symmetries.append(np.rot90(board.T, k=2))\n\n    return symmetries\n\n\ndef apply_symmetry(board, sym_index):\n    """\n    Apply the sym_index-th symmetric transformation\n    """\n    return get_symmetries(board)[sym_index]\n\n\ndef inverse_symmetry(move, sym_index, board_size=19):\n    """\n    Transform move coordinates back to original coordinates\n    """\n    row, col = move\n\n    if sym_index == 0:  # Identity\n        return row, col\n    elif sym_index == 1:  # Rotate 90\n        return col, board_size - 1 - row\n    elif sym_index == 2:  # Rotate 180\n        return board_size - 1 - row, board_size - 1 - col\n    elif sym_index == 3:  # Rotate 270\n        return board_size - 1 - col, row\n    elif sym_index == 4:  # Horizontal flip\n        return row, board_size - 1 - col\n    elif sym_index == 5:  # Vertical flip\n        return board_size - 1 - row, col\n    elif sym_index == 6:  # Diagonal flip\n        return col, row\n    elif sym_index == 7:  # Anti-diagonal flip\n        return board_size - 1 - col, board_size - 1 - row\n'})}),"\n",(0,s.jsx)(n.h3,{id:"data-augmentation",children:"Data Augmentation"}),"\n",(0,s.jsxs)(n.p,{children:["When training neural networks, symmetry can be used for ",(0,s.jsx)(n.strong,{children:"data augmentation"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def augment_training_data(board, policy, value):\n    """\n    Expand one training sample to 8\n    """\n    augmented = []\n\n    for sym_index in range(8):\n        # Transform board\n        aug_board = apply_symmetry(board, sym_index)\n\n        # Transform policy (361-dim vector)\n        policy_2d = policy.reshape(19, 19)\n        aug_policy_2d = apply_symmetry(policy_2d, sym_index)\n        aug_policy = aug_policy_2d.flatten()\n\n        # Value unchanged\n        aug_value = value\n\n        augmented.append((aug_board, aug_policy, aug_value))\n\n    return augmented\n'})}),"\n",(0,s.jsx)(n.p,{children:"This increases training data 8x completely free (no need to collect new data)."}),"\n",(0,s.jsx)(n.h3,{id:"using-symmetry-during-inference",children:"Using Symmetry During Inference"}),"\n",(0,s.jsx)(n.p,{children:"AlphaGo also uses symmetry during actual play:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def predict_with_symmetry(model, board):\n    """\n    Enhance prediction using symmetry\n    """\n    policies = []\n    values = []\n\n    for sym_index in range(8):\n        # Transform input\n        aug_board = apply_symmetry(board, sym_index)\n\n        # Neural network prediction\n        policy, value = model.predict(aug_board)\n\n        # Transform policy back to original coordinate system\n        policy_2d = policy.reshape(19, 19)\n        original_policy = inverse_symmetry_2d(policy_2d, sym_index)\n        policies.append(original_policy.flatten())\n\n        values.append(value)\n\n    # Average all predictions\n    avg_policy = np.mean(policies, axis=0)\n    avg_value = np.mean(values)\n\n    return avg_policy, avg_value\n'})}),"\n",(0,s.jsx)(n.p,{children:"This approach can slightly improve prediction accuracy and stability."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary-of-board-representation-methods",children:"Summary of Board Representation Methods"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Purpose"}),(0,s.jsx)(n.th,{children:"Complexity"}),(0,s.jsx)(n.th,{children:"Features"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"2D Array"})}),(0,s.jsx)(n.td,{children:"Basic storage"}),(0,s.jsx)(n.td,{children:"O(361) space"}),(0,s.jsx)(n.td,{children:"Simple and intuitive"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Zobrist Hashing"})}),(0,s.jsx)(n.td,{children:"Position identification"}),(0,s.jsx)(n.td,{children:"O(1) lookup"}),(0,s.jsx)(n.td,{children:"Efficient hashing"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Union-Find"})}),(0,s.jsx)(n.td,{children:"String management"}),(0,s.jsx)(n.td,{children:"O(alpha(n)) operations"}),(0,s.jsx)(n.td,{children:"Handles connectivity"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Feature Planes"})}),(0,s.jsx)(n.td,{children:"Neural network input"}),(0,s.jsx)(n.td,{children:"O(361 x # planes)"}),(0,s.jsx)(n.td,{children:"Rich information encoding"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Symmetry Transformations"})}),(0,s.jsx)(n.td,{children:"Data augmentation"}),(0,s.jsx)(n.td,{children:"8x data volume"}),(0,s.jsx)(n.td,{children:"Free augmentation"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"These techniques work together to form the infrastructure of modern Go AI."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"animation-reference",children:"Animation Reference"}),"\n",(0,s.jsx)(n.p,{children:"Core concepts covered in this article and their animation numbers:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Number"}),(0,s.jsx)(n.th,{children:"Concept"}),(0,s.jsx)(n.th,{children:"Physics/Math Correspondence"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"A1"}),(0,s.jsx)(n.td,{children:"2D array representation"}),(0,s.jsx)(n.td,{children:"Matrices, sparse data"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"A2"}),(0,s.jsx)(n.td,{children:"Zobrist Hashing"}),(0,s.jsx)(n.td,{children:"Hash functions, XOR operations"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"A8"}),(0,s.jsx)(n.td,{children:"Feature plane encoding"}),(0,s.jsx)(n.td,{children:"Tensors, multi-channel input"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"A5"}),(0,s.jsx)(n.td,{children:"Symmetry handling"}),(0,s.jsx)(n.td,{children:"Group theory, dihedral groups"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Previous"}),": ",(0,s.jsx)(n.a,{href:"../traditional-limits",children:"Limits of Traditional Methods"})," - From Minimax to MCTS"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Next"}),": ",(0,s.jsx)(n.a,{href:"../policy-network",children:"Policy Network Explained"})," - How neural networks predict moves"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hands-on"}),": ",(0,s.jsx)(n.a,{href:"/docs/tech/hands-on/",children:"Run Your First Go AI in 30 Minutes"})," - Try it yourself"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Zobrist, A. L. (1970). "A new hashing method with application for game playing." ICCA journal.'}),"\n",(0,s.jsx)(n.li,{children:'Tarjan, R. E. (1975). "Efficiency of a Good But Not Linear Set Union Algorithm." Journal of the ACM, 22(2), 215-225.'}),"\n",(0,s.jsx)(n.li,{children:'Silver, D., et al. (2016). "Mastering the game of Go with deep neural networks and tree search." Nature, 529, 484-489. - AlphaGo\'s 48 feature planes'}),"\n",(0,s.jsx)(n.li,{children:'Silver, D., et al. (2017). "Mastering the game of Go without human knowledge." Nature, 550, 354-359. - AlphaGo Zero\'s 17 feature planes'}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},42948(e,n,t){t.d(n,{A:()=>i});t(59471);var r=t(61785),s=t(62615);function i({children:e,fallback:n}){return(0,r.A)()?(0,s.jsx)(s.Fragment,{children:e?.()}):n??null}},45695(e,n,t){t.d(n,{$W:()=>w,tO:()=>l,u8:()=>g,dW:()=>u});var r=t(59471),s=t(90989),i=t(62615);const a=19,o=[[3,3],[3,9],[3,15],[9,3],[9,9],[9,15],[15,3],[15,9],[15,15]];function l({size:e=400,stones:n=[],highlights:t=[],labels:l=[],onCellClick:d=null,showCoordinates:c=!0}){const h=(0,r.useRef)(null),p=c?30:15,x=e-2*p,u=x/18;return(0,r.useEffect)(()=>{if(!h.current)return;const e=s.Ltv(h.current);e.selectAll("*").remove();const r=e.append("g").attr("transform",`translate(${p}, ${p})`);r.append("rect").attr("x",-u/2).attr("y",-u/2).attr("width",x+u).attr("height",x+u).attr("fill","#dcb35c").attr("rx",4);const i=r.append("g").attr("class","grid");for(let n=0;n<a;n++)i.append("line").attr("class","grid-line").attr("x1",0).attr("y1",n*u).attr("x2",18*u).attr("y2",n*u);for(let n=0;n<a;n++)i.append("line").attr("class","grid-line").attr("x1",n*u).attr("y1",0).attr("x2",n*u).attr("y2",18*u);const f=r.append("g").attr("class","star-points");if(o.forEach(([e,n])=>{f.append("circle").attr("class","star-point").attr("cx",e*u).attr("cy",n*u).attr("r",u/8)}),t.length>0){const e=r.append("g").attr("class","highlights");t.forEach(({x:n,y:t,intensity:r})=>{e.append("rect").attr("class","heatmap-cell").attr("x",n*u-u/2).attr("y",t*u-u/2).attr("width",u).attr("height",u).attr("fill",s.Q3(r)).attr("opacity",.7*r)})}const m=r.append("g").attr("class","stones");if(n.forEach(({x:e,y:n,color:t})=>{const r="black"===t?"stone-black":"stone-white";m.append("circle").attr("cx",e*u+2).attr("cy",n*u+2).attr("r",.45*u).attr("fill","rgba(0,0,0,0.2)"),m.append("circle").attr("class",r).attr("cx",e*u).attr("cy",n*u).attr("r",.45*u)}),l.length>0){const e=r.append("g").attr("class","labels");l.forEach(({x:t,y:r,text:s})=>{const i=n.find(e=>e.x===t&&e.y===r),a="black"===i?.color?"#fff":"#000";e.append("text").attr("x",t*u).attr("y",r*u).attr("dy","0.35em").attr("text-anchor","middle").attr("fill",a).attr("font-size",.5*u).attr("font-weight","bold").text(s)})}if(c){const n=e.append("g").attr("class","coordinates"),t="ABCDEFGHJKLMNOPQRST";for(let e=0;e<a;e++)n.append("text").attr("x",p+e*u).attr("y",p/2).attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(t[e]);for(let e=0;e<a;e++)n.append("text").attr("x",p/2).attr("y",p+e*u).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(a-e)}d&&r.append("g").attr("class","click-targets").selectAll("rect").data(s.y17(361)).enter().append("rect").attr("x",e=>e%a*u-u/2).attr("y",e=>Math.floor(e/a)*u-u/2).attr("width",u).attr("height",u).attr("fill","transparent").attr("cursor","pointer").on("click",(e,n)=>{const t=n%a,r=Math.floor(n/a);d({x:t,y:r})})},[e,n,t,l,c,d,u,p,x]),(0,i.jsx)("div",{className:"go-board-container",children:(0,i.jsx)("svg",{ref:h,width:e,height:e,className:"go-board"})})}var d=t(42948);const c=19,h={empty:function(){const e=[];for(let n=0;n<c;n++)for(let t=0;t<c;t++)e.push({x:t,y:n,prob:1/361});return e}(),corner:function(){const e=[],n=[[3,3],[3,15],[15,3],[15,15]],t=[[2,4],[4,2],[2,14],[4,16],[14,2],[16,4],[14,16],[16,14]];for(let r=0;r<c;r++)for(let s=0;s<c;s++){let i=.001;n.some(([e,n])=>e===s&&n===r)?i=.15:t.some(([e,n])=>e===s&&n===r)?i=.05:0!==s&&18!==s&&0!==r&&18!==r||(i=5e-4),e.push({x:s,y:r,prob:i})}return p(e)}(),move37:function(){const e=[],n={x:9,y:4},t=[[3,2],[15,2],[10,10],[8,6]];for(let r=0;r<c;r++)for(let s=0;s<c;s++){let i=.001;s===n.x&&r===n.y?i=.08:t.some(([e,n])=>e===s&&n===r)?i=.12:s>=5&&s<=13&&r>=5&&r<=13&&(i=.005+.01*Math.random()),e.push({x:s,y:r,prob:i})}return p(e)}()};function p(e){const n=e.reduce((e,n)=>e+n.prob,0);return e.map(e=>({...e,prob:e.prob/n}))}function x({initialPosition:e="corner",stones:n=[],highlightMoves:t=[],size:a=450,showTopN:o=5,interactive:l=!0}){const d=(0,r.useRef)(null),p=(0,r.useRef)(null),[x,u]=(0,r.useState)(h[e]||h.corner),[f,m]=(0,r.useState)(null),g=35,j=a-70,y=j/18;(0,r.useEffect)(()=>{if(!d.current)return;const e=s.Ltv(d.current);e.selectAll("*").remove();const t=e.append("g").attr("transform","translate(35, 35)");t.append("rect").attr("x",-y/2).attr("y",-y/2).attr("width",j+y).attr("height",j+y).attr("fill","#dcb35c").attr("rx",4);const r=Math.max(...x.map(e=>e.prob)),i=s.exT(s.oKI).domain([0,r]);t.append("g").attr("class","heatmap").selectAll("rect").data(x).enter().append("rect").attr("class","heatmap-cell").attr("x",e=>e.x*y-y/2).attr("y",e=>e.y*y-y/2).attr("width",y).attr("height",y).attr("fill",e=>i(e.prob)).attr("opacity",e=>.3+e.prob/r*.6).attr("cursor",l?"pointer":"default").on("mouseover",function(e,n){if(!l)return;s.Ltv(this).attr("stroke","#333").attr("stroke-width",2);s.Ltv(p.current).style("display","block").style("left",`${e.pageX+10}px`).style("top",e.pageY-10+"px").html(`\u4f4d\u7f6e: ${String.fromCharCode(65+n.x)}${19-n.y}<br>\u6a5f\u7387: ${(100*n.prob).toFixed(2)}%`)}).on("mouseout",function(){s.Ltv(this).attr("stroke","none"),s.Ltv(p.current).style("display","none")}).on("click",function(e,n){l&&m(n)});const a=t.append("g").attr("class","grid");for(let n=0;n<c;n++)a.append("line").attr("class","grid-line").attr("x1",0).attr("y1",n*y).attr("x2",18*y).attr("y2",n*y).attr("stroke","#333").attr("stroke-width",.5).attr("opacity",.5),a.append("line").attr("class","grid-line").attr("x1",n*y).attr("y1",0).attr("x2",n*y).attr("y2",18*y).attr("stroke","#333").attr("stroke-width",.5).attr("opacity",.5);const h=t.append("g").attr("class","stones");n.forEach(({x:e,y:n,color:t})=>{h.append("circle").attr("cx",e*y).attr("cy",n*y).attr("r",.45*y).attr("fill","black"===t?"#1a1a1a":"#f5f5f5").attr("stroke","black"===t?"#000":"#333").attr("stroke-width",1)});const u=[...x].sort((e,n)=>n.prob-e.prob).slice(0,o),f=t.append("g").attr("class","top-labels");u.forEach((e,t)=>{n.some(n=>n.x===e.x&&n.y===e.y)||(f.append("circle").attr("cx",e.x*y).attr("cy",e.y*y).attr("r",.3*y).attr("fill","rgba(255,255,255,0.8)").attr("stroke","#e74c3c").attr("stroke-width",2),f.append("text").attr("x",e.x*y).attr("y",e.y*y).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#e74c3c").attr("font-size",.4*y).attr("font-weight","bold").text(t+1))});const b=e.append("g").attr("class","coordinates");for(let n=0;n<c;n++)b.append("text").attr("x",g+n*y).attr("y",17.5).attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text("ABCDEFGHJKLMNOPQRST"[n]),b.append("text").attr("x",17.5).attr("y",g+n*y).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#666").attr("font-size",10).text(c-n)},[x,n,o,l,y,g,j]);const b=e=>{u(h[e]||h.corner)};return(0,i.jsxs)("div",{children:[l&&(0,i.jsxs)("div",{className:"d3-controls",children:[(0,i.jsx)("button",{className:"empty"===e?"active":"",onClick:()=>b("empty"),children:"\u5747\u52fb\u5206\u5e03"}),(0,i.jsx)("button",{className:"corner"===e?"active":"",onClick:()=>b("corner"),children:"\u958b\u5c40\u661f\u4f4d"}),(0,i.jsx)("button",{className:"move37"===e?"active":"",onClick:()=>b("move37"),children:"\u7b2c 37 \u624b"})]}),(0,i.jsx)("div",{className:"go-board-container",children:(0,i.jsx)("svg",{ref:d,width:a,height:a,className:"go-board"})}),(0,i.jsx)("div",{ref:p,className:"d3-tooltip",style:{display:"none",position:"fixed"}}),f&&(0,i.jsx)("div",{className:"d3-legend",children:(0,i.jsxs)("div",{className:"d3-legend-item",children:["\u5df2\u9078\u64c7: ",String.fromCharCode(65+f.x),19-f.y,"\u2014 \u6a5f\u7387: ",(100*f.prob).toFixed(2),"%"]})}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#ffffb2"}}),"\u4f4e\u6a5f\u7387"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#fd8d3c"}}),"\u4e2d\u6a5f\u7387"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#bd0026"}}),"\u9ad8\u6a5f\u7387"]})]})]})}function u(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(x,{...e})})}const f={name:"Root",visits:1600,value:.55,prior:1,children:[{name:"D4",visits:800,value:.62,prior:.35,selected:!0,children:[{name:"Q16",visits:400,value:.58,prior:.3},{name:"R4",visits:300,value:.65,prior:.25,selected:!0},{name:"C16",visits:100,value:.55,prior:.2}]},{name:"Q4",visits:500,value:.52,prior:.3,children:[{name:"D16",visits:300,value:.5,prior:.28},{name:"Q16",visits:200,value:.54,prior:.22}]},{name:"D16",visits:200,value:.48,prior:.2},{name:"Q16",visits:100,value:.45,prior:.15}]};function m({data:e=f,width:n=700,height:t=450,showPUCT:a=!0,cPuct:o=1.5,interactive:l=!0}){const d=(0,r.useRef)(null),c=(0,r.useRef)(null),[h,p]=(0,r.useState)(null),[x,u]=(0,r.useState)(o),m=40,g=40,j=n-g-40,y=t-m-40;return(0,r.useEffect)(()=>{if(!d.current)return;const r=s.Ltv(d.current);r.selectAll("*").remove();const i=s.B22().size([j,y-50]),o=s.Sk5(e);i(o);const h=r.append("g").attr("transform",`translate(${g}, ${m})`);h.append("g").attr("class","links").selectAll("path").data(o.links()).enter().append("path").attr("class",e=>"link "+(e.target.data.selected?"selected":"")).attr("fill","none").attr("stroke",e=>e.target.data.selected?"#4a90d9":"#999").attr("stroke-width",e=>e.target.data.selected?3:1.5).attr("d",s.vu().x(e=>e.x).y(e=>e.y));const u=h.append("g").attr("class","nodes").selectAll("g").data(o.descendants()).enter().append("g").attr("class","node").attr("transform",e=>`translate(${e.x}, ${e.y})`).attr("cursor",l?"pointer":"default").on("mouseover",function(e,n){if(!l)return;s.Ltv(this).select("circle").transition().duration(200).attr("r",30);const t=n.parent?n.parent.data.visits:n.data.visits,r=((e,n)=>{if(!n)return 0;const t=e.value,r=e.prior,s=e.visits;return t+x*r*Math.sqrt(n)/(1+s)})(n.data,t);s.Ltv(c.current).style("display","block").style("left",`${e.pageX+15}px`).style("top",e.pageY-10+"px").html(`\n            <strong>${n.data.name}</strong><br>\n            \u8a2a\u554f\u6b21\u6578 (N): ${n.data.visits}<br>\n            \u5e73\u5747\u50f9\u503c (Q): ${n.data.value.toFixed(3)}<br>\n            \u5148\u9a57\u6a5f\u7387 (P): ${(100*n.data.prior).toFixed(1)}%<br>\n            ${a?`PUCT \u5206\u6578: ${r.toFixed(3)}`:""}\n          `)}).on("mouseout",function(){s.Ltv(this).select("circle").transition().duration(200).attr("r",25),s.Ltv(c.current).style("display","none")}).on("click",function(e,n){l&&p(n.data)});u.append("circle").attr("r",25).attr("fill",e=>e.data.selected?"#4a90d9":"#fff").attr("stroke",n=>{if(n.data.selected)return"#2c5282";const t=n.data.visits/e.visits;return s.dM(.3+.5*t)}).attr("stroke-width",e=>e.data.selected?3:2),u.append("text").attr("dy",-5).attr("text-anchor","middle").attr("fill",e=>e.data.selected?"#fff":"#333").attr("font-size",11).attr("font-weight","bold").text(e=>e.data.name),u.append("text").attr("dy",10).attr("text-anchor","middle").attr("fill",e=>e.data.selected?"#fff":"#666").attr("font-size",9).text(e=>`N=${e.data.visits}`),r.append("text").attr("x",n/2).attr("y",20).attr("text-anchor","middle").attr("font-size",14).attr("font-weight","bold").attr("fill","#333").text("MCTS \u641c\u7d22\u6a39"),a&&r.append("text").attr("x",n/2).attr("y",t-10).attr("text-anchor","middle").attr("font-size",11).attr("fill","#666").text("\u85cd\u8272\u8def\u5f91\uff1aPUCT \u9078\u64c7\u7684\u6700\u4f73\u8def\u5f91")},[e,n,t,a,x,l,j,y]),(0,i.jsxs)("div",{children:[a&&l&&(0,i.jsx)("div",{className:"d3-controls",children:(0,i.jsxs)("div",{className:"d3-slider",children:[(0,i.jsxs)("label",{children:["c_puct: ",x.toFixed(1)]}),(0,i.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:x,onChange:e=>u(parseFloat(e.target.value))})]})}),(0,i.jsx)("div",{className:"mcts-tree-container",children:(0,i.jsx)("svg",{ref:d,width:n,height:t,className:"mcts-tree"})}),(0,i.jsx)("div",{ref:c,className:"d3-tooltip",style:{display:"none",position:"fixed"}}),h&&(0,i.jsxs)("div",{className:"d3-legend",style:{background:"#f5f5f5",padding:"1rem",borderRadius:"4px"},children:[(0,i.jsxs)("strong",{children:["\u5df2\u9078\u64c7\u7bc0\u9ede: ",h.name]}),(0,i.jsxs)("div",{children:["\u8a2a\u554f\u6b21\u6578: ",h.visits]}),(0,i.jsxs)("div",{children:["\u5e73\u5747\u50f9\u503c: ",h.value.toFixed(3)]}),(0,i.jsxs)("div",{children:["\u5148\u9a57\u6a5f\u7387: ",(100*h.prior).toFixed(1),"%"]})]}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#4a90d9"}}),"\u9078\u4e2d\u8def\u5f91"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#fff",border:"2px solid #999"}}),"\u5176\u4ed6\u7bc0\u9ede"]}),(0,i.jsx)("div",{className:"d3-legend-item",children:(0,i.jsx)("span",{style:{fontSize:"12px"},children:"\u7bc0\u9ede\u5927\u5c0f \u221d \u8a2a\u554f\u6b21\u6578"})})]})]})}function g(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(m,{...e})})}const j=[{hours:0,elo:0,label:"\u96a8\u6a5f"},{hours:3,elo:1e3,label:"\u767c\u73fe\u898f\u5247"},{hours:6,elo:2e3},{hours:12,elo:3e3,label:"\u767c\u73fe\u5b9a\u5f0f"},{hours:24,elo:4e3},{hours:36,elo:4500,label:"\u8d85\u8d8a Fan Hui"},{hours:48,elo:5e3},{hours:60,elo:5200,label:"\u8d85\u8d8a Lee Sedol"},{hours:72,elo:5400,label:"\u8d85\u8d8a\u539f\u7248 AlphaGo"}],y=[{elo:2700,label:"\u696d\u9918\u5f37\u8c6a"},{elo:3500,label:"Fan Hui (\u8077\u696d\u4e8c\u6bb5)"},{elo:4500,label:"Lee Sedol (\u4e16\u754c\u51a0\u8ecd)"},{elo:5e3,label:"\u539f\u7248 AlphaGo"}],b=[{epochs:0,elo:0},{epochs:10,elo:1500},{epochs:20,elo:2500},{epochs:30,elo:3e3},{epochs:40,elo:3200},{epochs:50,elo:3300}],v=[{games:0,elo:3300},{games:1e3,elo:3800},{games:5e3,elo:4200},{games:1e4,elo:4500},{games:5e4,elo:4800},{games:1e5,elo:5e3}];function _({mode:e="zero",width:n=600,height:t=400,animated:a=!0,showMilestones:o=!0}){const l=(0,r.useRef)(null),[d,c]=(0,r.useState)(e),h=40,p=70,x=n-p-100,u=t-h-60;return(0,r.useEffect)(()=>{if(!l.current)return;const e=s.Ltv(l.current);let t,r,i;e.selectAll("*").remove(),"zero"===d?(t=j,r="\u8a13\u7df4\u6642\u9593\uff08\u5c0f\u6642\uff09",i=[0,80]):"sl"===d?(t=b,r="\u8a13\u7df4\u8f2a\u6578\uff08Epochs\uff09",i=[0,60]):(t=v,r="\u81ea\u6211\u5c0d\u5f08\u5c40\u6578",i=[0,12e4]);const c="selfplay"===d?s.ZEH().domain([1,i[1]]).range([0,x]):s.m4Y().domain(i).range([0,x]),f=s.m4Y().domain([0,6e3]).range([u,0]),m=e.append("g").attr("transform",`translate(${p}, ${h})`);if(m.append("g").attr("class","grid").selectAll(".grid-line-y").data(f.ticks(6)).enter().append("line").attr("class","grid-line-y").attr("x1",0).attr("x2",x).attr("y1",e=>f(e)).attr("y2",e=>f(e)).attr("stroke","#ddd").attr("stroke-dasharray","3,3"),o&&"zero"===d){const e=m.append("g").attr("class","human-levels");y.forEach(n=>{e.append("line").attr("x1",0).attr("x2",x).attr("y1",f(n.elo)).attr("y2",f(n.elo)).attr("stroke","#e74c3c").attr("stroke-dasharray","5,5").attr("opacity",.6),e.append("text").attr("x",x+5).attr("y",f(n.elo)).attr("dy","0.35em").attr("fill","#e74c3c").attr("font-size",10).text(n.label)})}const g=s.n8j().x(e=>c("zero"===d?e.hours:"sl"===d?e.epochs:Math.max(1,e.games))).y(e=>f(e.elo)).curve(s.nVG),_=s.Wcw().x(e=>c("zero"===d?e.hours:"sl"===d?e.epochs:Math.max(1,e.games))).y0(u).y1(e=>f(e.elo)).curve(s.nVG);m.append("path").datum(t).attr("class","area").attr("fill","#4a90d9").attr("opacity",.1).attr("d",_);const w=m.append("path").datum(t).attr("class","line").attr("fill","none").attr("stroke","#4a90d9").attr("stroke-width",3).attr("d",g);if(a){const e=w.node().getTotalLength();w.attr("stroke-dasharray",`${e} ${e}`).attr("stroke-dashoffset",e).transition().duration(2e3).ease(s.yfw).attr("stroke-dashoffset",0)}if(o&&"zero"===d){const e=t.filter(e=>e.label),n=m.append("g").attr("class","milestones");n.selectAll("circle").data(e).enter().append("circle").attr("cx",e=>c(e.hours)).attr("cy",e=>f(e.elo)).attr("r",6).attr("fill","#e74c3c").attr("stroke","#fff").attr("stroke-width",2),n.selectAll("text").data(e).enter().append("text").attr("x",e=>c(e.hours)).attr("y",e=>f(e.elo)-15).attr("text-anchor","middle").attr("fill","#333").attr("font-size",10).text(e=>e.label)}const k="selfplay"===d?s.l78(c).ticks(5,"~s"):s.l78(c);m.append("g").attr("class","x-axis").attr("transform",`translate(0, ${u})`).call(k),m.append("text").attr("class","axis-label").attr("x",x/2).attr("y",u+45).attr("text-anchor","middle").attr("fill","#666").text(r),m.append("g").attr("class","y-axis").call(s.V4s(f).ticks(6)),m.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-u/2).attr("y",-50).attr("text-anchor","middle").attr("fill","#666").text("ELO \u8a55\u5206"),e.append("text").attr("x",n/2).attr("y",20).attr("text-anchor","middle").attr("font-size",14).attr("font-weight","bold").attr("fill","#333").text("zero"===d?"AlphaGo Zero \u8a13\u7df4\u66f2\u7dda":"sl"===d?"\u76e3\u7763\u5b78\u7fd2\u68cb\u529b\u6210\u9577":"\u81ea\u6211\u5c0d\u5f08\u68cb\u529b\u6210\u9577")},[d,n,t,a,o,x,u]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"d3-controls",children:[(0,i.jsx)("button",{className:"zero"===d?"active":"",onClick:()=>c("zero"),children:"AlphaGo Zero"}),(0,i.jsx)("button",{className:"sl"===d?"active":"",onClick:()=>c("sl"),children:"\u76e3\u7763\u5b78\u7fd2"}),(0,i.jsx)("button",{className:"selfplay"===d?"active":"",onClick:()=>c("selfplay"),children:"\u81ea\u6211\u5c0d\u5f08"})]}),(0,i.jsx)("div",{className:"elo-chart-container",children:(0,i.jsx)("svg",{ref:l,width:n,height:t,className:"elo-chart"})}),(0,i.jsxs)("div",{className:"d3-legend",children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#4a90d9"}}),"ELO \u8a55\u5206"]}),o&&"zero"===d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#e74c3c"}}),"\u91cc\u7a0b\u7891"]}),(0,i.jsxs)("div",{className:"d3-legend-item",children:[(0,i.jsx)("div",{className:"d3-legend-color",style:{background:"#e74c3c",opacity:.3}}),"\u4eba\u985e\u6c34\u5e73\u53c3\u8003\u7dda"]})]})]})]})}function w(e){return(0,i.jsx)(d.A,{fallback:(0,i.jsx)("div",{children:"\u8f09\u5165\u4e2d..."}),children:()=>(0,i.jsx)(_,{...e})})}},30416(e,n,t){t.d(n,{R:()=>a,x:()=>o});var r=t(59471);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);