"use strict";(self.webpackChunktemp_docusaurus=self.webpackChunktemp_docusaurus||[]).push([[255],{5521:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>o});var i=s(6672);const r={},t=i.createContext(r);function d(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}},9675:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"for-engineers/katago-source/commands","title":"Common Commands","description":"This article introduces KataGo\'s two main operation modes: GTP protocol and Analysis Engine, along with detailed explanations of common commands.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/for-engineers/katago-source/commands.md","sourceDirName":"for-engineers/katago-source","slug":"/for-engineers/katago-source/commands","permalink":"/www.weiqi.kids/en/docs/for-engineers/katago-source/commands","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/for-engineers/katago-source/commands.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Common Commands"},"sidebar":"tutorialSidebar","previous":{"title":"Installation and Setup","permalink":"/www.weiqi.kids/en/docs/for-engineers/katago-source/setup"},"next":{"title":"Source Code Architecture","permalink":"/www.weiqi.kids/en/docs/for-engineers/katago-source/architecture"}}');var r=s(3420),t=s(5521);const d={sidebar_position:2,title:"Common Commands"},o="KataGo Common Commands",a={},l=[{value:"GTP Protocol Introduction",id:"gtp-protocol-introduction",level:2},{value:"Start GTP Mode",id:"start-gtp-mode",level:3},{value:"GTP Protocol Basic Format",id:"gtp-protocol-basic-format",level:3},{value:"Basic Example",id:"basic-example",level:3},{value:"Common GTP Commands",id:"common-gtp-commands",level:2},{value:"Program Information",id:"program-information",level:3},{value:"Board Setup",id:"board-setup",level:3},{value:"Playing",id:"playing",level:3},{value:"Position Query",id:"position-query",level:3},{value:"Rules Related",id:"rules-related",level:3},{value:"KataGo Extension Commands",id:"katago-extension-commands",level:2},{value:"kata-analyze",id:"kata-analyze",level:3},{value:"kata-raw-nn",id:"kata-raw-nn",level:3},{value:"kata-debug-print",id:"kata-debug-print",level:3},{value:"Strength Adjustment",id:"strength-adjustment",level:3},{value:"Analysis Engine Usage",id:"analysis-engine-usage",level:2},{value:"Start Analysis Engine",id:"start-analysis-engine",level:3},{value:"Basic Usage Flow",id:"basic-usage-flow",level:3},{value:"Request Format",id:"request-format",level:3},{value:"Request Field Explanations",id:"request-field-explanations",level:3},{value:"Response Format",id:"response-format",level:3},{value:"Response Field Explanations",id:"response-field-explanations",level:3},{value:"moveInfos Fields",id:"moveinfos-fields",level:4},{value:"rootInfo Fields",id:"rootinfo-fields",level:4},{value:"ownership Field",id:"ownership-field",level:4},{value:"Advanced Query Options",id:"advanced-query-options",level:3},{value:"Get Ownership Map",id:"get-ownership-map",level:4},{value:"Get Policy Distribution",id:"get-policy-distribution",level:4},{value:"Limit Reported Moves",id:"limit-reported-moves",level:4},{value:"Analyze Specific Moves",id:"analyze-specific-moves",level:4},{value:"Complete Example: Python Integration",id:"complete-example-python-integration",level:3},{value:"Complete Example: Node.js Integration",id:"complete-example-nodejs-integration",level:3},{value:"Coordinate System",id:"coordinate-system",level:2},{value:"Letter Coordinates",id:"letter-coordinates",level:3},{value:"Coordinate Conversion",id:"coordinate-conversion",level:3},{value:"Common Usage Patterns",id:"common-usage-patterns",level:2},{value:"Playing Mode",id:"playing-mode",level:3},{value:"Batch Analysis Mode",id:"batch-analysis-mode",level:3},{value:"Real-time Analysis Mode",id:"real-time-analysis-mode",level:3},{value:"Performance Tuning",id:"performance-tuning",level:2},{value:"Search Settings",id:"search-settings",level:3},{value:"Multi-threading Settings",id:"multi-threading-settings",level:3},{value:"Memory Settings",id:"memory-settings",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"katago-common-commands",children:"KataGo Common Commands"})}),"\n",(0,r.jsx)(n.p,{children:"This article introduces KataGo's two main operation modes: GTP protocol and Analysis Engine, along with detailed explanations of common commands."}),"\n",(0,r.jsx)(n.h2,{id:"gtp-protocol-introduction",children:"GTP Protocol Introduction"}),"\n",(0,r.jsx)(n.p,{children:"GTP (Go Text Protocol) is the standard protocol for communication between Go programs. Most Go GUIs (like Sabaki, Lizzie) use GTP to communicate with AI engines."}),"\n",(0,r.jsx)(n.h3,{id:"start-gtp-mode",children:"Start GTP Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"katago gtp -model /path/to/model.bin.gz -config /path/to/config.cfg\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gtp-protocol-basic-format",children:"GTP Protocol Basic Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[id] command_name [arguments]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": Optional command number for tracking responses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"command_name"}),": Command name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"arguments"}),": Command parameters"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Response format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"=[id] response_data     # Success\n?[id] error_message     # Failure\n"})}),"\n",(0,r.jsx)(n.h3,{id:"basic-example",children:"Basic Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"1 name\n=1 KataGo\n\n2 version\n=2 1.15.3\n\n3 boardsize 19\n=3\n\n4 komi 7.5\n=4\n\n5 play black Q16\n=5\n\n6 genmove white\n=6 D4\n"})}),"\n",(0,r.jsx)(n.h2,{id:"common-gtp-commands",children:"Common GTP Commands"}),"\n",(0,r.jsx)(n.h3,{id:"program-information",children:"Program Information"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Command"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"name"})}),(0,r.jsx)(n.td,{children:"Get program name"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"name"})," \u2192 ",(0,r.jsx)(n.code,{children:"= KataGo"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"version"})}),(0,r.jsx)(n.td,{children:"Get version number"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"version"})," \u2192 ",(0,r.jsx)(n.code,{children:"= 1.15.3"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"list_commands"})}),(0,r.jsx)(n.td,{children:"List all supported commands"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"list_commands"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"protocol_version"})}),(0,r.jsx)(n.td,{children:"GTP protocol version"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"protocol_version"})," \u2192 ",(0,r.jsx)(n.code,{children:"= 2"})]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"board-setup",children:"Board Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Set board size (9, 13, 19)\nboardsize 19\n\n# Set komi\nkomi 7.5\n\n# Clear board\nclear_board\n\n# Set rules (KataGo extension)\nkata-set-rules chinese    # Chinese rules\nkata-set-rules japanese   # Japanese rules\nkata-set-rules tromp-taylor\n"})}),"\n",(0,r.jsx)(n.h3,{id:"playing",children:"Playing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Play a move\nplay black Q16    # Black plays at Q16\nplay white D4     # White plays at D4\nplay black pass   # Black passes\n\n# Have AI generate a move\ngenmove black     # Generate Black's move\ngenmove white     # Generate White's move\n\n# Undo\nundo              # Undo one move\n\n# Set visit limit\nkata-set-param maxVisits 1000    # Set maximum search visits\n"})}),"\n",(0,r.jsx)(n.h3,{id:"position-query",children:"Position Query"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Show board\nshowboard\n\n# Get current player\nkata-get-player\n\n# Get analysis results\nkata-analyze black 100    # Analyze for Black, 100 visits\n"})}),"\n",(0,r.jsx)(n.h3,{id:"rules-related",children:"Rules Related"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Get current rules\nkata-get-rules\n\n# Set rules\nkata-set-rules chinese\n\n# Set handicap\nfixed_handicap 4     # Standard 4-stone handicap positions\nplace_free_handicap 4  # Free handicap placement\n"})}),"\n",(0,r.jsx)(n.h2,{id:"katago-extension-commands",children:"KataGo Extension Commands"}),"\n",(0,r.jsx)(n.p,{children:"KataGo provides many extension commands beyond standard GTP:"}),"\n",(0,r.jsx)(n.h3,{id:"kata-analyze",children:"kata-analyze"}),"\n",(0,r.jsx)(n.p,{children:"Real-time analysis of current position:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kata-analyze [player] [visits] [interval]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"player"}),": Which side to analyze (black/white)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"visits"}),": Number of search visits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"interval"}),": Report interval (centiseconds, 1/100 second)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kata-analyze black 1000 100\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"info move Q3 visits 523 winrate 0.5432 scoreMean 2.31 scoreSelfplay 2.45 prior 0.1234 order 0 pv Q3 R4 Q5 ...\ninfo move D4 visits 312 winrate 0.5123 scoreMean 1.82 scoreSelfplay 1.95 prior 0.0987 order 1 pv D4 C6 E3 ...\n...\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output field explanations:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"move"})}),(0,r.jsx)(n.td,{children:"Move location"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"visits"})}),(0,r.jsx)(n.td,{children:"Search visit count"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"winrate"})}),(0,r.jsx)(n.td,{children:"Win rate (0-1)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreMean"})}),(0,r.jsx)(n.td,{children:"Expected score difference"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreSelfplay"})}),(0,r.jsx)(n.td,{children:"Self-play expected score"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prior"})}),(0,r.jsx)(n.td,{children:"Neural network prior probability"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"order"})}),(0,r.jsx)(n.td,{children:"Ranking order"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pv"})}),(0,r.jsx)(n.td,{children:"Principal Variation"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"kata-raw-nn",children:"kata-raw-nn"}),"\n",(0,r.jsx)(n.p,{children:"Get raw neural network output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kata-raw-nn [symmetry]\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Policy probability distribution"}),"\n",(0,r.jsx)(n.li,{children:"Value prediction"}),"\n",(0,r.jsx)(n.li,{children:"Territory prediction, etc."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"kata-debug-print",children:"kata-debug-print"}),"\n",(0,r.jsx)(n.p,{children:"Display detailed search information for debugging:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kata-debug-print move Q16\n"})}),"\n",(0,r.jsx)(n.h3,{id:"strength-adjustment",children:"Strength Adjustment"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Set maximum visits\nkata-set-param maxVisits 100      # Weaker\nkata-set-param maxVisits 10000    # Stronger\n\n# Set thinking time\nkata-time-settings main 60 0      # 60 seconds per side\nkata-time-settings byoyomi 30 5   # 30 second byo-yomi, 5 periods\n"})}),"\n",(0,r.jsx)(n.h2,{id:"analysis-engine-usage",children:"Analysis Engine Usage"}),"\n",(0,r.jsx)(n.p,{children:"Analysis Engine is another operation mode KataGo provides, using JSON format communication, more suitable for programmatic use."}),"\n",(0,r.jsx)(n.h3,{id:"start-analysis-engine",children:"Start Analysis Engine"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"katago analysis -model /path/to/model.bin.gz -config /path/to/config.cfg\n"})}),"\n",(0,r.jsx)(n.h3,{id:"basic-usage-flow",children:"Basic Usage Flow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Your program \u2500\u2500JSON request\u2500\u2500> KataGo Analysis Engine \u2500\u2500JSON response\u2500\u2500> Your program\n"})}),"\n",(0,r.jsx)(n.h3,{id:"request-format",children:"Request Format"}),"\n",(0,r.jsx)(n.p,{children:"Each request is a JSON object that must be on one line:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "query1",\n  "moves": [["B","Q16"],["W","D4"],["B","Q4"]],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [2]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"request-field-explanations",children:"Request Field Explanations"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"id"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Query identifier for matching responses"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"moves"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsxs)(n.td,{children:["Move sequence ",(0,r.jsx)(n.code,{children:'[["B","Q16"],["W","D4"]]'})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"initialStones"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsxs)(n.td,{children:["Initial stones ",(0,r.jsx)(n.code,{children:'[["B","Q16"],["W","D4"]]'})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"rules"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Rule name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"komi"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Komi"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boardXSize"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Board width"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boardYSize"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Board height"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"analyzeTurns"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Which turns to analyze (0-indexed)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"maxVisits"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Override config's maxVisits"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "query1",\n  "turnNumber": 2,\n  "moveInfos": [\n    {\n      "move": "D16",\n      "visits": 1234,\n      "winrate": 0.5678,\n      "scoreMean": 3.21,\n      "scoreStdev": 15.4,\n      "scoreLead": 3.21,\n      "prior": 0.0892,\n      "order": 0,\n      "pv": ["D16", "Q10", "R14"]\n    }\n  ],\n  "rootInfo": {\n    "visits": 5000,\n    "winrate": 0.5234,\n    "scoreLead": 2.1,\n    "scoreSelfplay": 2.3\n  },\n  "ownership": [...],\n  "policy": [...]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-field-explanations",children:"Response Field Explanations"}),"\n",(0,r.jsx)(n.h4,{id:"moveinfos-fields",children:"moveInfos Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"move"})}),(0,r.jsx)(n.td,{children:"Move coordinate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"visits"})}),(0,r.jsx)(n.td,{children:"Search visit count for this move"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"winrate"})}),(0,r.jsx)(n.td,{children:"Win rate (0-1, for current player)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreMean"})}),(0,r.jsx)(n.td,{children:"Expected final score difference"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreStdev"})}),(0,r.jsx)(n.td,{children:"Score standard deviation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreLead"})}),(0,r.jsx)(n.td,{children:"Current point lead"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prior"})}),(0,r.jsx)(n.td,{children:"Neural network prior probability"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"order"})}),(0,r.jsx)(n.td,{children:"Rank (0 = best)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pv"})}),(0,r.jsx)(n.td,{children:"Principal variation sequence"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"rootinfo-fields",children:"rootInfo Fields"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"visits"})}),(0,r.jsx)(n.td,{children:"Total search visits"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"winrate"})}),(0,r.jsx)(n.td,{children:"Current position win rate"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreLead"})}),(0,r.jsx)(n.td,{children:"Current point lead"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scoreSelfplay"})}),(0,r.jsx)(n.td,{children:"Self-play expected score"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"ownership-field",children:"ownership Field"}),"\n",(0,r.jsx)(n.p,{children:"1D array, length boardXSize \xd7 boardYSize, each value between -1 and 1:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"-1: Predicted White territory"}),"\n",(0,r.jsx)(n.li,{children:"+1: Predicted Black territory"}),"\n",(0,r.jsx)(n.li,{children:"0: Undetermined/border"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"advanced-query-options",children:"Advanced Query Options"}),"\n",(0,r.jsx)(n.h4,{id:"get-ownership-map",children:"Get Ownership Map"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "ownership_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "includeOwnership": true\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"get-policy-distribution",children:"Get Policy Distribution"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "policy_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "includePolicy": true\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"limit-reported-moves",children:"Limit Reported Moves"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "limited_query",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "maxMoves": 5\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"analyze-specific-moves",children:"Analyze Specific Moves"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "specific_moves",\n  "moves": [...],\n  "rules": "chinese",\n  "komi": 7.5,\n  "boardXSize": 19,\n  "boardYSize": 19,\n  "analyzeTurns": [10],\n  "allowMoves": [["B","Q16"],["B","D4"],["B","Q4"]]\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"complete-example-python-integration",children:"Complete Example: Python Integration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import subprocess\nimport json\n\nclass KataGoEngine:\n    def __init__(self, katago_path, model_path, config_path):\n        self.process = subprocess.Popen(\n            [katago_path, 'analysis', '-model', model_path, '-config', config_path],\n            stdin=subprocess.PIPE,\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE,\n            text=True\n        )\n        self.query_id = 0\n\n    def analyze(self, moves, rules='chinese', komi=7.5):\n        self.query_id += 1\n\n        query = {\n            'id': f'query_{self.query_id}',\n            'moves': moves,\n            'rules': rules,\n            'komi': komi,\n            'boardXSize': 19,\n            'boardYSize': 19,\n            'analyzeTurns': [len(moves)],\n            'maxVisits': 500,\n            'includeOwnership': True\n        }\n\n        # Send query\n        self.process.stdin.write(json.dumps(query) + '\\n')\n        self.process.stdin.flush()\n\n        # Read response\n        response_line = self.process.stdout.readline()\n        return json.loads(response_line)\n\n    def close(self):\n        self.process.terminate()\n\n\n# Usage example\nengine = KataGoEngine(\n    '/usr/local/bin/katago',\n    '/path/to/model.bin.gz',\n    '/path/to/config.cfg'\n)\n\n# Analyze a position\nresult = engine.analyze([\n    ['B', 'Q16'],\n    ['W', 'D4'],\n    ['B', 'Q4'],\n    ['W', 'D16']\n])\n\n# Print best move\nbest_move = result['moveInfos'][0]\nprint(f\"Best move: {best_move['move']}\")\nprint(f\"Win rate: {best_move['winrate']:.1%}\")\nprint(f\"Score lead: {best_move['scoreLead']:.1f}\")\n\nengine.close()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"complete-example-nodejs-integration",children:"Complete Example: Node.js Integration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const { spawn } = require('child_process');\nconst readline = require('readline');\n\nclass KataGoEngine {\n  constructor(katagoPath, modelPath, configPath) {\n    this.process = spawn(katagoPath, [\n      'analysis',\n      '-model', modelPath,\n      '-config', configPath\n    ]);\n\n    this.rl = readline.createInterface({\n      input: this.process.stdout,\n      crlfDelay: Infinity\n    });\n\n    this.queryId = 0;\n    this.callbacks = new Map();\n\n    this.rl.on('line', (line) => {\n      try {\n        const response = JSON.parse(line);\n        const callback = this.callbacks.get(response.id);\n        if (callback) {\n          callback(response);\n          this.callbacks.delete(response.id);\n        }\n      } catch (e) {\n        console.error('Parse error:', e);\n      }\n    });\n  }\n\n  analyze(moves, options = {}) {\n    return new Promise((resolve) => {\n      this.queryId++;\n      const id = `query_${this.queryId}`;\n\n      const query = {\n        id,\n        moves,\n        rules: options.rules || 'chinese',\n        komi: options.komi || 7.5,\n        boardXSize: 19,\n        boardYSize: 19,\n        analyzeTurns: [moves.length],\n        maxVisits: options.maxVisits || 500,\n        includeOwnership: true\n      };\n\n      this.callbacks.set(id, resolve);\n      this.process.stdin.write(JSON.stringify(query) + '\\n');\n    });\n  }\n\n  close() {\n    this.process.kill();\n  }\n}\n\n// Usage example\nasync function main() {\n  const engine = new KataGoEngine(\n    '/usr/local/bin/katago',\n    '/path/to/model.bin.gz',\n    '/path/to/config.cfg'\n  );\n\n  const result = await engine.analyze([\n    ['B', 'Q16'],\n    ['W', 'D4'],\n    ['B', 'Q4']\n  ]);\n\n  console.log('Best move:', result.moveInfos[0].move);\n  console.log('Win rate:', (result.moveInfos[0].winrate * 100).toFixed(1) + '%');\n\n  engine.close();\n}\n\nmain();\n"})}),"\n",(0,r.jsx)(n.h2,{id:"coordinate-system",children:"Coordinate System"}),"\n",(0,r.jsx)(n.p,{children:"KataGo uses the standard Go coordinate system:"}),"\n",(0,r.jsx)(n.h3,{id:"letter-coordinates",children:"Letter Coordinates"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"   A B C D E F G H J K L M N O P Q R S T\n19 . . . . . . . . . . . . . . . . . . . 19\n18 . . . . . . . . . . . . . . . . . . . 18\n17 . . . . . . . . . . . . . . . . . . . 17\n16 . . . + . . . . . + . . . . . + . . . 16\n15 . . . . . . . . . . . . . . . . . . . 15\n...\n 4 . . . + . . . . . + . . . . . + . . .  4\n 3 . . . . . . . . . . . . . . . . . . .  3\n 2 . . . . . . . . . . . . . . . . . . .  2\n 1 . . . . . . . . . . . . . . . . . . .  1\n   A B C D E F G H J K L M N O P Q R S T\n"})}),"\n",(0,r.jsx)(n.p,{children:"Note: There's no letter I (to avoid confusion with number 1)."}),"\n",(0,r.jsx)(n.h3,{id:"coordinate-conversion",children:"Coordinate Conversion"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'def coord_to_gtp(x, y, board_size=19):\n    """Convert (x, y) coordinates to GTP format"""\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    return f"{letters[x]}{board_size - y}"\n\ndef gtp_to_coord(gtp_coord, board_size=19):\n    """Convert GTP coordinates to (x, y)"""\n    letters = \'ABCDEFGHJKLMNOPQRST\'\n    x = letters.index(gtp_coord[0].upper())\n    y = board_size - int(gtp_coord[1:])\n    return (x, y)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"common-usage-patterns",children:"Common Usage Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"playing-mode",children:"Playing Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Start GTP mode\nkatago gtp -model model.bin.gz -config gtp.cfg\n\n# GTP command sequence\nboardsize 19\nkomi 7.5\nplay black Q16\ngenmove white\nplay black Q4\ngenmove white\n...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"batch-analysis-mode",children:"Batch Analysis Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# Analyze all moves of a game\nsgf_moves = parse_sgf('game.sgf')\n\nfor i in range(len(sgf_moves)):\n    result = engine.analyze(sgf_moves[:i+1])\n    winrate = result['rootInfo']['winrate']\n    print(f\"Move {i+1}: Win rate {winrate:.1%}\")\n"})}),"\n",(0,r.jsx)(n.h3,{id:"real-time-analysis-mode",children:"Real-time Analysis Mode"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"kata-analyze"})," for real-time analysis:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"kata-analyze black 1000 50\n"})}),"\n",(0,r.jsx)(n.p,{children:"Outputs analysis results every 0.5 seconds until reaching 1000 visits."}),"\n",(0,r.jsx)(n.h2,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,r.jsx)(n.h3,{id:"search-settings",children:"Search Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# Increase search amount for better accuracy\nmaxVisits = 1000\n\n# Or use time control\nmaxTime = 10  # Max 10 seconds thinking per move\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multi-threading-settings",children:"Multi-threading Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# CPU thread count\nnumSearchThreads = 8\n\n# GPU batch processing\nnumNNServerThreadsPerModel = 2\nnnMaxBatchSize = 16\n"})}),"\n",(0,r.jsx)(n.h3,{id:"memory-settings",children:"Memory Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# Reduce memory usage\nnnCacheSizePowerOfTwo = 20  # Default 23\n"})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["After understanding command usage, if you want to study KataGo's implementation in depth, continue reading ",(0,r.jsx)(n.a,{href:"/www.weiqi.kids/en/docs/for-engineers/katago-source/architecture",children:"Source Code Architecture"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);