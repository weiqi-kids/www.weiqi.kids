"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[5834],{38763(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"tech/deep-dive/quantization-deploy","title":"\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ubc30\ud3ec","description":"KataGo \ubaa8\ub378\uc758 \uc591\uc790\ud654 \uae30\uc220, \ub0b4\ubcf4\ub0b4\uae30 \ud615\uc2dd \ubc0f \uac01 \ud50c\ub7ab\ud3fc \ubc30\ud3ec \ubc29\uc548","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/tech/deep-dive/quantization-deploy.md","sourceDirName":"tech/deep-dive","slug":"/tech/deep-dive/quantization-deploy","permalink":"/ko/docs/tech/deep-dive/quantization-deploy","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tech/deep-dive/quantization-deploy.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ubc30\ud3ec","description":"KataGo \ubaa8\ub378\uc758 \uc591\uc790\ud654 \uae30\uc220, \ub0b4\ubcf4\ub0b4\uae30 \ud615\uc2dd \ubc0f \uac01 \ud50c\ub7ab\ud3fc \ubc30\ud3ec \ubc29\uc548"},"sidebar":"tutorialSidebar","previous":{"title":"\ubd84\uc0b0 \ud559\uc2b5 \uc544\ud0a4\ud14d\ucc98","permalink":"/ko/docs/tech/deep-dive/distributed-training"},"next":{"title":"\ud3c9\uac00 \ubc0f \ubca4\uce58\ub9c8\ud06c \ud14c\uc2a4\ud2b8","permalink":"/ko/docs/tech/deep-dive/evaluation"}}');var s=i(62615),d=i(30416);const r={sidebar_position:8,title:"\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ubc30\ud3ec",description:"KataGo \ubaa8\ub378\uc758 \uc591\uc790\ud654 \uae30\uc220, \ub0b4\ubcf4\ub0b4\uae30 \ud615\uc2dd \ubc0f \uac01 \ud50c\ub7ab\ud3fc \ubc30\ud3ec \ubc29\uc548"},l="\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ubc30\ud3ec",a={},o=[{value:"\uc591\uc790\ud654 \uae30\uc220 \uac1c\uc694",id:"\uc591\uc790\ud654-\uae30\uc220-\uac1c\uc694",level:2},{value:"\uc65c \uc591\uc790\ud654\uac00 \ud544\uc694\ud55c\uac00?",id:"\uc65c-\uc591\uc790\ud654\uac00-\ud544\uc694\ud55c\uac00",level:3},{value:"\uc591\uc790\ud654 \uc720\ud615",id:"\uc591\uc790\ud654-\uc720\ud615",level:3},{value:"FP16 \ubc18\uc815\ubc00\ub3c4",id:"fp16-\ubc18\uc815\ubc00\ub3c4",level:2},{value:"\uac1c\ub150",id:"\uac1c\ub150",level:3},{value:"KataGo \uc124\uc815",id:"katago-\uc124\uc815",level:3},{value:"\uc131\ub2a5 \uc601\ud5a5",id:"\uc131\ub2a5-\uc601\ud5a5",level:3},{value:"INT8 \uc591\uc790\ud654",id:"int8-\uc591\uc790\ud654",level:2},{value:"\uc591\uc790\ud654 \ud504\ub85c\uc138\uc2a4",id:"\uc591\uc790\ud654-\ud504\ub85c\uc138\uc2a4",level:3},{value:"\uad50\uc815 \ub370\uc774\ud130",id:"\uad50\uc815-\ub370\uc774\ud130",level:3},{value:"\uc8fc\uc758\uc0ac\ud56d",id:"\uc8fc\uc758\uc0ac\ud56d",level:3},{value:"TensorRT \ubc30\ud3ec",id:"tensorrt-\ubc30\ud3ec",level:2},{value:"\ubcc0\ud658 \ud504\ub85c\uc138\uc2a4",id:"\ubcc0\ud658-\ud504\ub85c\uc138\uc2a4",level:3},{value:"TensorRT \uc5d4\uc9c4 \uc0ac\uc6a9",id:"tensorrt-\uc5d4\uc9c4-\uc0ac\uc6a9",level:3},{value:"ONNX \ub0b4\ubcf4\ub0b4\uae30",id:"onnx-\ub0b4\ubcf4\ub0b4\uae30",level:2},{value:"PyTorch \u2192 ONNX",id:"pytorch--onnx",level:3},{value:"ONNX \ubaa8\ub378 \uac80\uc99d",id:"onnx-\ubaa8\ub378-\uac80\uc99d",level:3},{value:"\uac01 \ud50c\ub7ab\ud3fc \ubc30\ud3ec",id:"\uac01-\ud50c\ub7ab\ud3fc-\ubc30\ud3ec",level:2},{value:"\uc11c\ubc84 \ubc30\ud3ec",id:"\uc11c\ubc84-\ubc30\ud3ec",level:3},{value:"\ub370\uc2a4\ud06c\ud1b1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud1b5\ud569",id:"\ub370\uc2a4\ud06c\ud1b1-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ud1b5\ud569",level:3},{value:"\ubaa8\ubc14\uc77c \uae30\uae30 \ubc30\ud3ec",id:"\ubaa8\ubc14\uc77c-\uae30\uae30-\ubc30\ud3ec",level:3},{value:"iOS (Core ML)",id:"ios-core-ml",level:4},{value:"Android (TensorFlow Lite)",id:"android-tensorflow-lite",level:4},{value:"\uc784\ubca0\ub514\ub4dc \uc2dc\uc2a4\ud15c",id:"\uc784\ubca0\ub514\ub4dc-\uc2dc\uc2a4\ud15c",level:3},{value:"Raspberry Pi",id:"raspberry-pi",level:4},{value:"NVIDIA Jetson",id:"nvidia-jetson",level:4},{value:"\uc131\ub2a5 \ube44\uad50",id:"\uc131\ub2a5-\ube44\uad50",level:2},{value:"\ub2e4\uc591\ud55c \ubc30\ud3ec \ubc29\uc2dd\uc758 \uc131\ub2a5",id:"\ub2e4\uc591\ud55c-\ubc30\ud3ec-\ubc29\uc2dd\uc758-\uc131\ub2a5",level:3},{value:"\ubaa8\ub378 \ud06c\uae30 \ube44\uad50",id:"\ubaa8\ub378-\ud06c\uae30-\ube44\uad50",level:3},{value:"\ubc30\ud3ec \uccb4\ud06c\ub9ac\uc2a4\ud2b8",id:"\ubc30\ud3ec-\uccb4\ud06c\ub9ac\uc2a4\ud2b8",level:2},{value:"\ucd94\uac00 \uc77d\uae30",id:"\ucd94\uac00-\uc77d\uae30",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\ubaa8\ub378-\uc591\uc790\ud654\uc640-\ubc30\ud3ec",children:"\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ubc30\ud3ec"})}),"\n",(0,s.jsx)(n.p,{children:"\uc774 \ubb38\uc11c\ub294 KataGo \ubaa8\ub378\uc744 \uc591\uc790\ud654\ud558\uc5ec \ub9ac\uc18c\uc2a4 \uc694\uad6c\uc0ac\ud56d\uc744 \uc904\uc774\ub294 \ubc29\ubc95\uacfc \ub2e4\uc591\ud55c \ud50c\ub7ab\ud3fc\uc5d0\uc11c\uc758 \ubc30\ud3ec \ubc29\uc548\uc744 \uc18c\uac1c\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\uc591\uc790\ud654-\uae30\uc220-\uac1c\uc694",children:"\uc591\uc790\ud654 \uae30\uc220 \uac1c\uc694"}),"\n",(0,s.jsx)(n.h3,{id:"\uc65c-\uc591\uc790\ud654\uac00-\ud544\uc694\ud55c\uac00",children:"\uc65c \uc591\uc790\ud654\uac00 \ud544\uc694\ud55c\uac00?"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\uc815\ubc00\ub3c4"}),(0,s.jsx)(n.th,{children:"\ud06c\uae30"}),(0,s.jsx)(n.th,{children:"\uc18d\ub3c4"}),(0,s.jsx)(n.th,{children:"\uc815\ubc00\ub3c4 \uc190\uc2e4"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FP32"}),(0,s.jsx)(n.td,{children:"100%"}),(0,s.jsx)(n.td,{children:"\uae30\uc900"}),(0,s.jsx)(n.td,{children:"0%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FP16"}),(0,s.jsx)(n.td,{children:"50%"}),(0,s.jsx)(n.td,{children:"+50%"}),(0,s.jsx)(n.td,{children:"~0%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"INT8"}),(0,s.jsx)(n.td,{children:"25%"}),(0,s.jsx)(n.td,{children:"+100%"}),(0,s.jsx)(n.td,{children:"<1%"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\uc591\uc790\ud654-\uc720\ud615",children:"\uc591\uc790\ud654 \uc720\ud615"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\ud6c8\ub828 \ud6c4 \uc591\uc790\ud654 (PTQ)\n\u251c\u2500\u2500 \uac04\ub2e8\ud558\uace0 \ube60\ub984\n\u251c\u2500\u2500 \uc7ac\ud559\uc2b5 \ubd88\ud544\uc694\n\u2514\u2500\u2500 \uc815\ubc00\ub3c4 \uc190\uc2e4 \uac00\ub2a5\uc131\n\n\uc591\uc790\ud654 \uc778\uc2dd \ud6c8\ub828 (QAT)\n\u251c\u2500\u2500 \ub354 \ub192\uc740 \uc815\ubc00\ub3c4\n\u251c\u2500\u2500 \uc7ac\ud559\uc2b5 \ud544\uc694\n\u2514\u2500\u2500 \ube44\uad50\uc801 \ubcf5\uc7a1\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"fp16-\ubc18\uc815\ubc00\ub3c4",children:"FP16 \ubc18\uc815\ubc00\ub3c4"}),"\n",(0,s.jsx)(n.h3,{id:"\uac1c\ub150",children:"\uac1c\ub150"}),"\n",(0,s.jsx)(n.p,{children:"32\ube44\ud2b8 \ubd80\ub3d9\uc18c\uc218\uc810\uc744 16\ube44\ud2b8\ub85c \ubcc0\ud658:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# FP32 \u2192 FP16 \ubcc0\ud658\nmodel_fp16 = model.half()\n\n# \ucd94\ub860\nwith torch.cuda.amp.autocast():\n    output = model_fp16(input.half())\n"})}),"\n",(0,s.jsx)(n.h3,{id:"katago-\uc124\uc815",children:"KataGo \uc124\uc815"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# config.cfg\nuseFP16 = true           # FP16 \ucd94\ub860 \ud65c\uc131\ud654\nuseFP16Storage = true    # FP16 \uc911\uac04 \uacb0\uacfc \uc800\uc7a5\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\uc131\ub2a5-\uc601\ud5a5",children:"\uc131\ub2a5 \uc601\ud5a5"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"GPU \uc2dc\ub9ac\uc988"}),(0,s.jsx)(n.th,{children:"FP16 \uac00\uc18d"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GTX 10xx"}),(0,s.jsx)(n.td,{children:"\uc5c6\uc74c (Tensor Core \uc5c6\uc74c)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 20xx"}),(0,s.jsx)(n.td,{children:"+30-50%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 30xx"}),(0,s.jsx)(n.td,{children:"+50-80%"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RTX 40xx"}),(0,s.jsx)(n.td,{children:"+80-100%"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"int8-\uc591\uc790\ud654",children:"INT8 \uc591\uc790\ud654"}),"\n",(0,s.jsx)(n.h3,{id:"\uc591\uc790\ud654-\ud504\ub85c\uc138\uc2a4",children:"\uc591\uc790\ud654 \ud504\ub85c\uc138\uc2a4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import torch.quantization as quant\n\n# 1. \ubaa8\ub378 \uc900\ube44\nmodel.eval()\nmodel.qconfig = quant.get_default_qconfig('fbgemm')\n\n# 2. \uc591\uc790\ud654 \uc900\ube44\nmodel_prepared = quant.prepare(model)\n\n# 3. \uad50\uc815 (\ub300\ud45c \ub370\uc774\ud130 \uc0ac\uc6a9)\nwith torch.no_grad():\n    for data in calibration_loader:\n        model_prepared(data)\n\n# 4. \uc591\uc790\ud654 \ubaa8\ub378\ub85c \ubcc0\ud658\nmodel_quantized = quant.convert(model_prepared)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\uad50\uc815-\ub370\uc774\ud130",children:"\uad50\uc815 \ub370\uc774\ud130"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def create_calibration_dataset(num_samples=1000):\n    """\uad50\uc815 \ub370\uc774\ud130\uc14b \uc0dd\uc131"""\n    samples = []\n\n    # \uc2e4\uc81c \ub300\uad6d\uc5d0\uc11c \uc0d8\ud50c\ub9c1\n    for game in random_games(num_samples):\n        position = random_position(game)\n        features = encode_state(position)\n        samples.append(features)\n\n    return samples\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\uc8fc\uc758\uc0ac\ud56d",children:"\uc8fc\uc758\uc0ac\ud56d"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"INT8 \uc591\uc790\ud654\ub294 \uad50\uc815 \ub370\uc774\ud130 \ud544\uc694"}),"\n",(0,s.jsx)(n.li,{children:"\uc77c\ubd80 \ub808\uc774\uc5b4\ub294 \uc591\uc790\ud654\uc5d0 \uc801\ud569\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uc74c"}),"\n",(0,s.jsx)(n.li,{children:"\uc815\ubc00\ub3c4 \uc190\uc2e4 \ud14c\uc2a4\ud2b8 \ud544\uc694"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tensorrt-\ubc30\ud3ec",children:"TensorRT \ubc30\ud3ec"}),"\n",(0,s.jsx)(n.h3,{id:"\ubcc0\ud658-\ud504\ub85c\uc138\uc2a4",children:"\ubcc0\ud658 \ud504\ub85c\uc138\uc2a4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import tensorrt as trt\n\ndef convert_to_tensorrt(onnx_path, engine_path):\n    logger = trt.Logger(trt.Logger.WARNING)\n    builder = trt.Builder(logger)\n    network = builder.create_network(\n        1 << int(trt.NetworkDefinitionCreationFlag.EXPLICIT_BATCH)\n    )\n    parser = trt.OnnxParser(network, logger)\n\n    # ONNX \ubaa8\ub378 \ud30c\uc2f1\n    with open(onnx_path, 'rb') as f:\n        parser.parse(f.read())\n\n    # \ucd5c\uc801\ud654 \uc635\uc158 \uc124\uc815\n    config = builder.create_builder_config()\n    config.max_workspace_size = 1 << 30  # 1GB\n\n    # FP16 \ud65c\uc131\ud654\n    config.set_flag(trt.BuilderFlag.FP16)\n\n    # \uc5d4\uc9c4 \ube4c\ub4dc\n    engine = builder.build_engine(network, config)\n\n    # \uc800\uc7a5\n    with open(engine_path, 'wb') as f:\n        f.write(engine.serialize())\n"})}),"\n",(0,s.jsx)(n.h3,{id:"tensorrt-\uc5d4\uc9c4-\uc0ac\uc6a9",children:"TensorRT \uc5d4\uc9c4 \uc0ac\uc6a9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"def inference_with_tensorrt(engine_path, input_data):\n    # \uc5d4\uc9c4 \ub85c\ub4dc\n    with open(engine_path, 'rb') as f:\n        engine = trt.Runtime(logger).deserialize_cuda_engine(f.read())\n\n    context = engine.create_execution_context()\n\n    # \uba54\ubaa8\ub9ac \ud560\ub2f9\n    d_input = cuda.mem_alloc(input_data.nbytes)\n    d_output = cuda.mem_alloc(output_size)\n\n    # \uc785\ub825 \ubcf5\uc0ac\n    cuda.memcpy_htod(d_input, input_data)\n\n    # \ucd94\ub860 \uc2e4\ud589\n    context.execute_v2([int(d_input), int(d_output)])\n\n    # \ucd9c\ub825 \uac00\uc838\uc624\uae30\n    output = np.empty(output_shape, dtype=np.float32)\n    cuda.memcpy_dtoh(output, d_output)\n\n    return output\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"onnx-\ub0b4\ubcf4\ub0b4\uae30",children:"ONNX \ub0b4\ubcf4\ub0b4\uae30"}),"\n",(0,s.jsx)(n.h3,{id:"pytorch--onnx",children:"PyTorch \u2192 ONNX"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import torch.onnx\n\ndef export_to_onnx(model, output_path):\n    model.eval()\n\n    # \uc608\uc81c \uc785\ub825 \uc0dd\uc131\n    dummy_input = torch.randn(1, 22, 19, 19)\n\n    # \ub0b4\ubcf4\ub0b4\uae30\n    torch.onnx.export(\n        model,\n        dummy_input,\n        output_path,\n        input_names=['input'],\n        output_names=['policy', 'value', 'ownership'],\n        dynamic_axes={\n            'input': {0: 'batch_size'},\n            'policy': {0: 'batch_size'},\n            'value': {0: 'batch_size'},\n            'ownership': {0: 'batch_size'}\n        },\n        opset_version=13\n    )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"onnx-\ubaa8\ub378-\uac80\uc99d",children:"ONNX \ubaa8\ub378 \uac80\uc99d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import onnx\nimport onnxruntime as ort\n\n# \ubaa8\ub378 \uad6c\uc870 \uac80\uc99d\nmodel = onnx.load("model.onnx")\nonnx.checker.check_model(model)\n\n# \ucd94\ub860 \ud14c\uc2a4\ud2b8\nsession = ort.InferenceSession("model.onnx")\noutput = session.run(None, {\'input\': input_data})\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\uac01-\ud50c\ub7ab\ud3fc-\ubc30\ud3ec",children:"\uac01 \ud50c\ub7ab\ud3fc \ubc30\ud3ec"}),"\n",(0,s.jsx)(n.h3,{id:"\uc11c\ubc84-\ubc30\ud3ec",children:"\uc11c\ubc84 \ubc30\ud3ec"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\nservices:\n  katago:\n    image: katago/katago:latest\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: 1\n              capabilities: [gpu]\n    volumes:\n      - ./models:/models\n      - ./config:/config\n    command: >\n      katago analysis\n      -model /models/kata-b18c384.bin.gz\n      -config /config/analysis.cfg\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\ub370\uc2a4\ud06c\ud1b1-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ud1b5\ud569",children:"\ub370\uc2a4\ud06c\ud1b1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud1b5\ud569"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# KataGo\ub97c Python \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc784\ubca0\ub4dc\nimport subprocess\nimport json\n\nclass KataGoProcess:\n    def __init__(self, katago_path, model_path):\n        self.process = subprocess.Popen(\n            [katago_path, 'analysis', '-model', model_path],\n            stdin=subprocess.PIPE,\n            stdout=subprocess.PIPE,\n            text=True\n        )\n\n    def analyze(self, moves):\n        query = {\n            'id': 'query1',\n            'moves': moves,\n            'rules': 'chinese',\n            'komi': 7.5,\n            'boardXSize': 19,\n            'boardYSize': 19\n        }\n        self.process.stdin.write(json.dumps(query) + '\\n')\n        self.process.stdin.flush()\n\n        response = self.process.stdout.readline()\n        return json.loads(response)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\ubaa8\ubc14\uc77c-\uae30\uae30-\ubc30\ud3ec",children:"\ubaa8\ubc14\uc77c \uae30\uae30 \ubc30\ud3ec"}),"\n",(0,s.jsx)(n.h4,{id:"ios-core-ml",children:"iOS (Core ML)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import coremltools as ct\n\n# Core ML\ub85c \ubcc0\ud658\nmlmodel = ct.convert(\n    model,\n    inputs=[ct.TensorType(shape=(1, 22, 19, 19))],\n    minimum_deployment_target=ct.target.iOS15\n)\n\nmlmodel.save("KataGo.mlmodel")\n'})}),"\n",(0,s.jsx)(n.h4,{id:"android-tensorflow-lite",children:"Android (TensorFlow Lite)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import tensorflow as tf\n\n# TFLite\ub85c \ubcc0\ud658\nconverter = tf.lite.TFLiteConverter.from_saved_model(model_path)\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\nconverter.target_spec.supported_types = [tf.float16]\n\ntflite_model = converter.convert()\n\nwith open('katago.tflite', 'wb') as f:\n    f.write(tflite_model)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\uc784\ubca0\ub514\ub4dc-\uc2dc\uc2a4\ud15c",children:"\uc784\ubca0\ub514\ub4dc \uc2dc\uc2a4\ud15c"}),"\n",(0,s.jsx)(n.h4,{id:"raspberry-pi",children:"Raspberry Pi"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Eigen \ubc31\uc5d4\ub4dc \uc0ac\uc6a9 (\uc21c\uc218 CPU)\n./katago gtp -model kata-b10c128.bin.gz -config rpi.cfg\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# rpi.cfg - Raspberry Pi \ucd5c\uc801\ud654 \uc124\uc815\nnumSearchThreads = 4\nmaxVisits = 100\nnnMaxBatchSize = 1\n"})}),"\n",(0,s.jsx)(n.h4,{id:"nvidia-jetson",children:"NVIDIA Jetson"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# CUDA \ubc31\uc5d4\ub4dc \uc0ac\uc6a9\n./katago gtp -model kata-b18c384.bin.gz -config jetson.cfg\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\uc131\ub2a5-\ube44\uad50",children:"\uc131\ub2a5 \ube44\uad50"}),"\n",(0,s.jsx)(n.h3,{id:"\ub2e4\uc591\ud55c-\ubc30\ud3ec-\ubc29\uc2dd\uc758-\uc131\ub2a5",children:"\ub2e4\uc591\ud55c \ubc30\ud3ec \ubc29\uc2dd\uc758 \uc131\ub2a5"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\ubc30\ud3ec \ubc29\uc2dd"}),(0,s.jsx)(n.th,{children:"\ud558\ub4dc\uc6e8\uc5b4"}),(0,s.jsx)(n.th,{children:"Playouts/\ucd08"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CUDA FP32"}),(0,s.jsx)(n.td,{children:"RTX 3080"}),(0,s.jsx)(n.td,{children:"~3000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"CUDA FP16"}),(0,s.jsx)(n.td,{children:"RTX 3080"}),(0,s.jsx)(n.td,{children:"~5000"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TensorRT FP16"}),(0,s.jsx)(n.td,{children:"RTX 3080"}),(0,s.jsx)(n.td,{children:"~6500"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpenCL"}),(0,s.jsx)(n.td,{children:"M1 Pro"}),(0,s.jsx)(n.td,{children:"~1500"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Core ML"}),(0,s.jsx)(n.td,{children:"M1 Pro"}),(0,s.jsx)(n.td,{children:"~1800"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TFLite"}),(0,s.jsx)(n.td,{children:"Pixel 7"}),(0,s.jsx)(n.td,{children:"~50"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Eigen"}),(0,s.jsx)(n.td,{children:"RPi 4"}),(0,s.jsx)(n.td,{children:"~15"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\ubaa8\ub378-\ud06c\uae30-\ube44\uad50",children:"\ubaa8\ub378 \ud06c\uae30 \ube44\uad50"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\ud615\uc2dd"}),(0,s.jsx)(n.th,{children:"b18c384 \ud06c\uae30"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\uc6d0\ubcf8 (.bin.gz)"}),(0,s.jsx)(n.td,{children:"~140 MB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ONNX FP32"}),(0,s.jsx)(n.td,{children:"~280 MB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ONNX FP16"}),(0,s.jsx)(n.td,{children:"~140 MB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TensorRT FP16"}),(0,s.jsx)(n.td,{children:"~100 MB"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TFLite FP16"}),(0,s.jsx)(n.td,{children:"~140 MB"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ubc30\ud3ec-\uccb4\ud06c\ub9ac\uc2a4\ud2b8",children:"\ubc30\ud3ec \uccb4\ud06c\ub9ac\uc2a4\ud2b8"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\uc801\ud569\ud55c \uc591\uc790\ud654 \uc815\ubc00\ub3c4 \uc120\ud0dd"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\uad50\uc815 \ub370\uc774\ud130 \uc900\ube44 (INT8)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\ub300\uc0c1 \ud615\uc2dd\uc73c\ub85c \ub0b4\ubcf4\ub0b4\uae30"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\uc815\ubc00\ub3c4 \uc190\uc2e4\uc774 \ud5c8\uc6a9 \uac00\ub2a5\ud55c\uc9c0 \uac80\uc99d"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\ub300\uc0c1 \ud50c\ub7ab\ud3fc \uc131\ub2a5 \ud14c\uc2a4\ud2b8"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ucd5c\uc801\ud654"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\uc790\ub3d9\ud654 \ubc30\ud3ec \ud504\ub85c\uc138\uc2a4 \uad6c\ucd95"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\ucd94\uac00-\uc77d\uae30",children:"\ucd94\uac00 \uc77d\uae30"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../gpu-optimization",children:"GPU \ubc31\uc5d4\ub4dc\uc640 \ucd5c\uc801\ud654"})," \u2014 \uae30\ubcf8 \uc131\ub2a5 \ucd5c\uc801\ud654"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../evaluation",children:"\ud3c9\uac00 \ubc0f \ubca4\uce58\ub9c8\ud06c \ud14c\uc2a4\ud2b8"})," \u2014 \ubc30\ud3ec \ud6c4 \uc131\ub2a5 \uac80\uc99d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../../hands-on/integration",children:"\ud504\ub85c\uc81d\ud2b8\uc5d0 \ud1b5\ud569\ud558\uae30"})," \u2014 API \ud1b5\ud569 \uc608\uc81c"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},30416(e,n,i){i.d(n,{R:()=>r,x:()=>l});var t=i(59471);const s={},d=t.createContext(s);function r(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);