"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[2227],{89385(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"tech/deep-dive/evaluation","title":"\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66","description":"\u570d\u68cb AI \u5605 Elo \u8a55\u5206\u7cfb\u7d71\u3001\u5c0d\u5c40\u6e2c\u8a66\u540c\u6548\u80fd\u57fa\u6e96\u6e2c\u8a66\u65b9\u6cd5","source":"@site/i18n/zh-hk/docusaurus-plugin-content-docs/current/tech/deep-dive/evaluation.md","sourceDirName":"tech/deep-dive","slug":"/tech/deep-dive/evaluation","permalink":"/zh-hk/docs/tech/deep-dive/evaluation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tech/deep-dive/evaluation.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66","description":"\u570d\u68cb AI \u5605 Elo \u8a55\u5206\u7cfb\u7d71\u3001\u5c0d\u5c40\u6e2c\u8a66\u540c\u6548\u80fd\u57fa\u6e96\u6e2c\u8a66\u65b9\u6cd5"},"sidebar":"tutorialSidebar","previous":{"title":"\u6a21\u578b\u91cf\u5316\u8207\u90e8\u7f72","permalink":"/zh-hk/docs/tech/deep-dive/quantization-deploy"},"next":{"title":"\u81ea\u8a02\u898f\u5247\u8207\u8b8a\u9ad4","permalink":"/zh-hk/docs/tech/deep-dive/custom-rules"}}');var i=s(62615),r=s(30416);const t={sidebar_position:9,title:"\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66",description:"\u570d\u68cb AI \u5605 Elo \u8a55\u5206\u7cfb\u7d71\u3001\u5c0d\u5c40\u6e2c\u8a66\u540c\u6548\u80fd\u57fa\u6e96\u6e2c\u8a66\u65b9\u6cd5"},d="\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66",c={},a=[{value:"Elo \u8a55\u5206\u7cfb\u7d71",id:"elo-\u8a55\u5206\u7cfb\u7d71",level:2},{value:"\u57fa\u672c\u6982\u5ff5",id:"\u57fa\u672c\u6982\u5ff5",level:3},{value:"Elo \u5dee\u8ddd\u540c\u52dd\u7387\u5c0d\u7167",id:"elo-\u5dee\u8ddd\u540c\u52dd\u7387\u5c0d\u7167",level:3},{value:"\u5be6\u4f5c",id:"\u5be6\u4f5c",level:3},{value:"\u5c0d\u5c40\u6e2c\u8a66",id:"\u5c0d\u5c40\u6e2c\u8a66",level:2},{value:"\u6e2c\u8a66\u6846\u67b6",id:"\u6e2c\u8a66\u6846\u67b6",level:3},{value:"\u7d71\u8a08\u986f\u8457\u6027",id:"\u7d71\u8a08\u986f\u8457\u6027",level:3},{value:"\u5efa\u8b70\u6e2c\u8a66\u5c40\u6578",id:"\u5efa\u8b70\u6e2c\u8a66\u5c40\u6578",level:3},{value:"SPRT\uff08\u5e8f\u8cab\u6a5f\u7387\u6bd4\u6aa2\u5b9a\uff09",id:"sprt\u5e8f\u8cab\u6a5f\u7387\u6bd4\u6aa2\u5b9a",level:2},{value:"\u6982\u5ff5",id:"\u6982\u5ff5",level:3},{value:"KataGo \u57fa\u6e96\u6e2c\u8a66",id:"katago-\u57fa\u6e96\u6e2c\u8a66",level:2},{value:"\u57f7\u884c\u57fa\u6e96\u6e2c\u8a66",id:"\u57f7\u884c\u57fa\u6e96\u6e2c\u8a66",level:3},{value:"\u8f38\u51fa\u89e3\u8b80",id:"\u8f38\u51fa\u89e3\u8b80",level:3},{value:"\u95dc\u9375\u6307\u6a19",id:"\u95dc\u9375\u6307\u6a19",level:3},{value:"\u68cb\u529b\u8a55\u4f30",id:"\u68cb\u529b\u8a55\u4f30",level:2},{value:"\u4eba\u985e\u68cb\u529b\u5c0d\u7167",id:"\u4eba\u985e\u68cb\u529b\u5c0d\u7167",level:3},{value:"\u4e3b\u8981 AI \u5605 Elo",id:"\u4e3b\u8981-ai-\u5605-elo",level:3},{value:"\u6e2c\u8a66\u5c0d\u7167",id:"\u6e2c\u8a66\u5c0d\u7167",level:3},{value:"\u6548\u80fd\u76e3\u63a7",id:"\u6548\u80fd\u76e3\u63a7",level:2},{value:"\u6301\u7e8c\u76e3\u63a7",id:"\u6301\u7e8c\u76e3\u63a7",level:3},{value:"\u6548\u80fd\u74f6\u9838\u8a3a\u65b7",id:"\u6548\u80fd\u74f6\u9838\u8a3a\u65b7",level:3},{value:"\u81ea\u52d5\u5316\u6e2c\u8a66",id:"\u81ea\u52d5\u5316\u6e2c\u8a66",level:2},{value:"CI/CD \u6574\u5408",id:"cicd-\u6574\u5408",level:3},{value:"\u56de\u6b78\u6e2c\u8a66",id:"\u56de\u6b78\u6e2c\u8a66",level:3},{value:"\u5ef6\u4f38\u95b1\u8b80",id:"\u5ef6\u4f38\u95b1\u8b80",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66",children:"\u8a55\u4f30\u8207\u57fa\u6e96\u6e2c\u8a66"})}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7d39\u9ede\u6a23\u8a55\u4f30\u570d\u68cb AI \u5605\u68cb\u529b\u540c\u6548\u80fd\uff0c\u5305\u62ec Elo \u8a55\u5206\u7cfb\u7d71\u3001\u5c0d\u5c40\u6e2c\u8a66\u65b9\u6cd5\u540c\u6a19\u6e96\u57fa\u6e96\u6e2c\u8a66\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"elo-\u8a55\u5206\u7cfb\u7d71",children:"Elo \u8a55\u5206\u7cfb\u7d71"}),"\n",(0,i.jsx)(n.h3,{id:"\u57fa\u672c\u6982\u5ff5",children:"\u57fa\u672c\u6982\u5ff5"}),"\n",(0,i.jsx)(n.p,{children:"Elo \u8a55\u5206\u4fc2\u8861\u91cf\u76f8\u5c0d\u68cb\u529b\u5605\u6a19\u6e96\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u9810\u671f\u52dd\u7387 E_A = 1 / (1 + 10^((R_B - R_A) / 400))\n\n\u65b0 Elo = \u820a Elo + K \xd7 (\u5be6\u969b\u7d50\u679c - \u9810\u671f\u7d50\u679c)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"elo-\u5dee\u8ddd\u540c\u52dd\u7387\u5c0d\u7167",children:"Elo \u5dee\u8ddd\u540c\u52dd\u7387\u5c0d\u7167"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Elo \u5dee\u8ddd"}),(0,i.jsx)(n.th,{children:"\u5f37\u8005\u52dd\u7387"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"50%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"100"}),(0,i.jsx)(n.td,{children:"64%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"200"}),(0,i.jsx)(n.td,{children:"76%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"400"}),(0,i.jsx)(n.td,{children:"91%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"800"}),(0,i.jsx)(n.td,{children:"99%"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u5be6\u4f5c",children:"\u5be6\u4f5c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def expected_score(rating_a, rating_b):\n    """\u8a08\u7b97 A \u5c0d B \u5605\u9810\u671f\u5f97\u5206"""\n    return 1 / (1 + 10 ** ((rating_b - rating_a) / 400))\n\ndef update_elo(rating, expected, actual, k=32):\n    """\u66f4\u65b0 Elo \u8a55\u5206"""\n    return rating + k * (actual - expected)\n\ndef calculate_elo_diff(wins, losses, draws):\n    """\u7531\u5c0d\u6230\u7d50\u679c\u8a08\u7b97 Elo \u5dee\u8ddd"""\n    total = wins + losses + draws\n    win_rate = (wins + 0.5 * draws) / total\n\n    if win_rate <= 0 or win_rate >= 1:\n        return float(\'inf\') if win_rate >= 1 else float(\'-inf\')\n\n    return 400 * math.log10(win_rate / (1 - win_rate))\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u5c0d\u5c40\u6e2c\u8a66",children:"\u5c0d\u5c40\u6e2c\u8a66"}),"\n",(0,i.jsx)(n.h3,{id:"\u6e2c\u8a66\u6846\u67b6",children:"\u6e2c\u8a66\u6846\u67b6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"class MatchTester:\n    def __init__(self, engine_a, engine_b):\n        self.engine_a = engine_a\n        self.engine_b = engine_b\n        self.results = {'a_wins': 0, 'b_wins': 0, 'draws': 0}\n\n    def run_match(self, num_games=400):\n        \"\"\"\u57f7\u884c\u5c0d\u6230\u6e2c\u8a66\"\"\"\n        for i in range(num_games):\n            # \u4ea4\u66ff\u5148\u5f8c\u624b\n            if i % 2 == 0:\n                black, white = self.engine_a, self.engine_b\n                a_is_black = True\n            else:\n                black, white = self.engine_b, self.engine_a\n                a_is_black = False\n\n            # \u9032\u884c\u5c0d\u5c40\n            result = self.play_game(black, white)\n\n            # \u8a18\u9304\u7d50\u679c\n            if result == 'black':\n                if a_is_black:\n                    self.results['a_wins'] += 1\n                else:\n                    self.results['b_wins'] += 1\n            elif result == 'white':\n                if a_is_black:\n                    self.results['b_wins'] += 1\n                else:\n                    self.results['a_wins'] += 1\n            else:\n                self.results['draws'] += 1\n\n        return self.results\n\n    def play_game(self, black_engine, white_engine):\n        \"\"\"\u9032\u884c\u4e00\u5c40\u5c0d\u5c40\"\"\"\n        game = Game()\n\n        while not game.is_terminal():\n            if game.current_player == 'black':\n                move = black_engine.get_move(game.state)\n            else:\n                move = white_engine.get_move(game.state)\n\n            game.play(move)\n\n        return game.get_winner()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u7d71\u8a08\u986f\u8457\u6027",children:"\u7d71\u8a08\u986f\u8457\u6027"}),"\n",(0,i.jsx)(n.p,{children:"\u78ba\u4fdd\u6e2c\u8a66\u7d50\u679c\u6709\u7d71\u8a08\u610f\u7fa9\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from scipy import stats\n\ndef calculate_confidence_interval(wins, total, confidence=0.95):\n    """\u8a08\u7b97\u52dd\u7387\u5605\u4fe1\u8cf4\u5340\u9593"""\n    p = wins / total\n    z = stats.norm.ppf((1 + confidence) / 2)\n    margin = z * math.sqrt(p * (1 - p) / total)\n\n    return (p - margin, p + margin)\n\n# \u7bc4\u4f8b\nwins, total = 220, 400\nci_low, ci_high = calculate_confidence_interval(wins, total)\nprint(f"\u52dd\u7387: {wins/total:.1%}, 95% CI: [{ci_low:.1%}, {ci_high:.1%}]")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u5efa\u8b70\u6e2c\u8a66\u5c40\u6578",children:"\u5efa\u8b70\u6e2c\u8a66\u5c40\u6578"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9810\u671f Elo \u5dee"}),(0,i.jsx)(n.th,{children:"\u5efa\u8b70\u5c40\u6578"}),(0,i.jsx)(n.th,{children:"\u4fe1\u8cf4\u5ea6"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:">100"}),(0,i.jsx)(n.td,{children:"100"}),(0,i.jsx)(n.td,{children:"95%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"50-100"}),(0,i.jsx)(n.td,{children:"200"}),(0,i.jsx)(n.td,{children:"95%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"20-50"}),(0,i.jsx)(n.td,{children:"400"}),(0,i.jsx)(n.td,{children:"95%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"<20"}),(0,i.jsx)(n.td,{children:"1000+"}),(0,i.jsx)(n.td,{children:"95%"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"sprt\u5e8f\u8cab\u6a5f\u7387\u6bd4\u6aa2\u5b9a",children:"SPRT\uff08\u5e8f\u8cab\u6a5f\u7387\u6bd4\u6aa2\u5b9a\uff09"}),"\n",(0,i.jsx)(n.h3,{id:"\u6982\u5ff5",children:"\u6982\u5ff5"}),"\n",(0,i.jsx)(n.p,{children:"\u5514\u4f7f\u56fa\u5b9a\u5c40\u6578\uff0c\u6839\u64da\u7d2f\u7a4d\u7d50\u679c\u52d5\u614b\u6c7a\u5b9a\u4fc2\u54aa\u505c\u6b62\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def sprt(wins, losses, elo0=0, elo1=10, alpha=0.05, beta=0.05):\n    \"\"\"\n    \u5e8f\u8cab\u6a5f\u7387\u6bd4\u6aa2\u5b9a\n\n    elo0: \u865b\u7121\u5047\u8a2d\u5605 Elo \u5dee\uff08\u901a\u5e38\u70ba 0\uff09\n    elo1: \u5c0d\u7acb\u5047\u8a2d\u5605 Elo \u5dee\uff08\u901a\u5e38\u70ba 5-20\uff09\n    alpha: \u5047\u967d\u6027\u7387\n    beta: \u5047\u9670\u6027\u7387\n    \"\"\"\n    if wins + losses == 0:\n        return 'continue'\n\n    # \u8a08\u7b97\u5c0d\u6578\u4f3c\u7136\u6bd4\n    p0 = expected_score(elo1, 0)  # H1 \u4e0b\u5605\u9810\u671f\u52dd\u7387\n    p1 = expected_score(elo0, 0)  # H0 \u4e0b\u5605\u9810\u671f\u52dd\u7387\n\n    llr = (\n        wins * math.log(p0 / p1) +\n        losses * math.log((1 - p0) / (1 - p1))\n    )\n\n    # \u6c7a\u7b56\u908a\u754c\n    lower = math.log(beta / (1 - alpha))\n    upper = math.log((1 - beta) / alpha)\n\n    if llr <= lower:\n        return 'reject'  # H0 \u88ab\u62d2\u7d55\uff0c\u65b0\u6a21\u578b\u8f03\u5dee\n    elif llr >= upper:\n        return 'accept'  # H0 \u88ab\u63a5\u53d7\uff0c\u65b0\u6a21\u578b\u8f03\u597d\n    else:\n        return 'continue'  # \u7e7c\u7e8c\u6e2c\u8a66\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"katago-\u57fa\u6e96\u6e2c\u8a66",children:"KataGo \u57fa\u6e96\u6e2c\u8a66"}),"\n",(0,i.jsx)(n.h3,{id:"\u57f7\u884c\u57fa\u6e96\u6e2c\u8a66",children:"\u57f7\u884c\u57fa\u6e96\u6e2c\u8a66"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u57fa\u672c\u6e2c\u8a66\nkatago benchmark -model model.bin.gz\n\n# \u6307\u5b9a\u8a2a\u554f\u6b21\u6578\nkatago benchmark -model model.bin.gz -v 1000\n\n# \u8a73\u7d30\u8f38\u51fa\nkatago benchmark -model model.bin.gz -v 1000 -t 8\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u8f38\u51fa\u89e3\u8b80",children:"\u8f38\u51fa\u89e3\u8b80"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"KataGo Benchmark Results\n========================\n\nConfiguration:\n  Model: kata-b18c384.bin.gz\n  Backend: CUDA\n  Threads: 8\n  Visits: 1000\n\nPerformance:\n  NN evals/second: 2847.3\n  Playouts/second: 4521.8\n  Avg time per move: 0.221 seconds\n\nMemory:\n  GPU memory usage: 2.1 GB\n  System memory: 1.3 GB\n\nQuality metrics:\n  Policy accuracy: 0.612\n  Value accuracy: 0.891\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u95dc\u9375\u6307\u6a19",children:"\u95dc\u9375\u6307\u6a19"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6307\u6a19"}),(0,i.jsx)(n.th,{children:"\u8aaa\u660e"}),(0,i.jsx)(n.th,{children:"\u597d\u5605\u6578\u503c"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"NN evals/sec"}),(0,i.jsx)(n.td,{children:"\u795e\u7d93\u7db2\u7d61\u8a55\u4f30\u901f\u5ea6"}),(0,i.jsx)(n.td,{children:">1000"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Playouts/sec"}),(0,i.jsx)(n.td,{children:"MCTS \u6a21\u64ec\u901f\u5ea6"}),(0,i.jsx)(n.td,{children:">2000"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"GPU \u5229\u7528\u7387"}),(0,i.jsx)(n.td,{children:"GPU \u4f7f\u7528\u6548\u7387"}),(0,i.jsx)(n.td,{children:">80%"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u68cb\u529b\u8a55\u4f30",children:"\u68cb\u529b\u8a55\u4f30"}),"\n",(0,i.jsx)(n.h3,{id:"\u4eba\u985e\u68cb\u529b\u5c0d\u7167",children:"\u4eba\u985e\u68cb\u529b\u5c0d\u7167"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"AI Elo"}),(0,i.jsx)(n.th,{children:"\u4eba\u985e\u68cb\u529b"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~1500"}),(0,i.jsx)(n.td,{children:"\u696d\u9918 1 \u6bb5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~2000"}),(0,i.jsx)(n.td,{children:"\u696d\u9918 5 \u6bb5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~2500"}),(0,i.jsx)(n.td,{children:"\u8077\u696d\u521d\u6bb5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~3000"}),(0,i.jsx)(n.td,{children:"\u8077\u696d\u4e94\u6bb5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~3500"}),(0,i.jsx)(n.td,{children:"\u4e16\u754c\u51a0\u8ecd\u7d1a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"~4000+"}),(0,i.jsx)(n.td,{children:"\u8d85\u8d8a\u4eba\u985e"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u4e3b\u8981-ai-\u5605-elo",children:"\u4e3b\u8981 AI \u5605 Elo"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"AI"}),(0,i.jsx)(n.th,{children:"Elo\uff08\u4f30\u8a08\uff09"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"KataGo (\u6700\u65b0)"}),(0,i.jsx)(n.td,{children:"~5000"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"AlphaGo Zero"}),(0,i.jsx)(n.td,{children:"~5000"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Leela Zero"}),(0,i.jsx)(n.td,{children:"~4500"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7d55\u85dd"}),(0,i.jsx)(n.td,{children:"~4800"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u6e2c\u8a66\u5c0d\u7167",children:"\u6e2c\u8a66\u5c0d\u7167"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def estimate_human_rank(ai_model, test_positions):\n    """\u4f30\u8a08 AI \u76f8\u7576\u65bc\u5605\u4eba\u985e\u68cb\u529b"""\n    # \u7528\u6a19\u6e96\u6e2c\u8a66\u984c\u76ee\n    correct = 0\n    for pos in test_positions:\n        ai_move = ai_model.get_best_move(pos[\'state\'])\n        if ai_move == pos[\'best_move\']:\n            correct += 1\n\n    accuracy = correct / len(test_positions)\n\n    # \u6e96\u78ba\u7387\u5c0d\u7167\u8868\n    if accuracy > 0.9:\n        return "\u8077\u696d\u7d1a"\n    elif accuracy > 0.7:\n        return "\u696d\u9918 5 \u6bb5+"\n    elif accuracy > 0.5:\n        return "\u696d\u9918 1-5 \u6bb5"\n    else:\n        return "\u696d\u9918\u7d1a\u4ee5\u4e0b"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u6548\u80fd\u76e3\u63a7",children:"\u6548\u80fd\u76e3\u63a7"}),"\n",(0,i.jsx)(n.h3,{id:"\u6301\u7e8c\u76e3\u63a7",children:"\u6301\u7e8c\u76e3\u63a7"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import time\nimport psutil\nimport GPUtil\n\nclass PerformanceMonitor:\n    def __init__(self):\n        self.metrics = []\n\n    def sample(self):\n        """\u53d6\u6a23\u7576\u524d\u6548\u80fd\u6307\u6a19"""\n        gpus = GPUtil.getGPUs()\n\n        self.metrics.append({\n            \'timestamp\': time.time(),\n            \'cpu_percent\': psutil.cpu_percent(),\n            \'memory_percent\': psutil.virtual_memory().percent,\n            \'gpu_util\': gpus[0].load * 100 if gpus else 0,\n            \'gpu_memory\': gpus[0].memoryUsed if gpus else 0,\n        })\n\n    def report(self):\n        """\u7522\u751f\u5831\u544a"""\n        if not self.metrics:\n            return\n\n        avg_cpu = sum(m[\'cpu_percent\'] for m in self.metrics) / len(self.metrics)\n        avg_gpu = sum(m[\'gpu_util\'] for m in self.metrics) / len(self.metrics)\n\n        print(f"\u5e73\u5747 CPU \u4f7f\u7528\u7387: {avg_cpu:.1f}%")\n        print(f"\u5e73\u5747 GPU \u4f7f\u7528\u7387: {avg_gpu:.1f}%")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u6548\u80fd\u74f6\u9838\u8a3a\u65b7",children:"\u6548\u80fd\u74f6\u9838\u8a3a\u65b7"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u75c7\u72c0"}),(0,i.jsx)(n.th,{children:"\u53ef\u80fd\u539f\u56e0"}),(0,i.jsx)(n.th,{children:"\u89e3\u6c7a\u65b9\u6848"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CPU 100%\uff0cGPU \u4f4e"}),(0,i.jsx)(n.td,{children:"\u641c\u7d22\u57f7\u884c\u7dd2\u5514\u5920"}),(0,i.jsx)(n.td,{children:"\u589e\u52a0 numSearchThreads"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"GPU 100%\uff0c\u8f38\u51fa\u6162"}),(0,i.jsx)(n.td,{children:"\u6279\u6b21\u592a\u7d30"}),(0,i.jsx)(n.td,{children:"\u589e\u52a0 nnMaxBatchSize"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u8a18\u61b6\u9ad4\u5514\u5920"}),(0,i.jsx)(n.td,{children:"\u6a21\u578b\u592a\u5927"}),(0,i.jsx)(n.td,{children:"\u7528\u8f03\u7d30\u6a21\u578b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u901f\u5ea6\u5514\u7a69\u5b9a"}),(0,i.jsx)(n.td,{children:"\u6eab\u5ea6\u904e\u9ad8"}),(0,i.jsx)(n.td,{children:"\u6539\u5584\u6563\u71b1"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u81ea\u52d5\u5316\u6e2c\u8a66",children:"\u81ea\u52d5\u5316\u6e2c\u8a66"}),"\n",(0,i.jsx)(n.h3,{id:"cicd-\u6574\u5408",children:"CI/CD \u6574\u5408"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# .github/workflows/benchmark.yml\nname: Benchmark\n\non:\n  push:\n    branches: [main]\n\njobs:\n  benchmark:\n    runs-on: ubuntu-latest\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Run benchmark\n        run: |\n          ./katago benchmark -model model.bin.gz -v 500 > results.txt\n\n      - name: Check performance\n        run: |\n          playouts=$(grep "Playouts/second" results.txt | awk \'{print $2}\')\n          if (( $(echo "$playouts < 1000" | bc -l) )); then\n            echo "Performance regression detected!"\n            exit 1\n          fi\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u56de\u6b78\u6e2c\u8a66",children:"\u56de\u6b78\u6e2c\u8a66"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def regression_test(new_model, baseline_model, threshold=0.95):\n    """\u6aa2\u67e5\u65b0\u6a21\u578b\u4fc2\u54aa\u6709\u6548\u80fd\u56de\u6b78"""\n    # \u6e2c\u8a66\u6e96\u78ba\u7387\n    new_accuracy = test_accuracy(new_model)\n    baseline_accuracy = test_accuracy(baseline_model)\n\n    if new_accuracy < baseline_accuracy * threshold:\n        raise Exception(f"\u6e96\u78ba\u7387\u56de\u6b78: {new_accuracy:.3f} < {baseline_accuracy:.3f}")\n\n    # \u6e2c\u8a66\u901f\u5ea6\n    new_speed = benchmark_speed(new_model)\n    baseline_speed = benchmark_speed(baseline_model)\n\n    if new_speed < baseline_speed * threshold:\n        raise Exception(f"\u901f\u5ea6\u56de\u6b78: {new_speed:.1f} < {baseline_speed:.1f}")\n\n    print("\u56de\u6b78\u6e2c\u8a66\u901a\u904e")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\u5ef6\u4f38\u95b1\u8b80",children:"\u5ef6\u4f38\u95b1\u8b80"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../training",children:"KataGo \u8a13\u7df4\u6a5f\u5236\u89e3\u6790"})," \u2014 \u6a21\u578b\u4fc2\u9ede\u6a23\u8a13\u7df4\u5605"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../distributed-training",children:"\u5206\u6563\u5f0f\u8a13\u7df4\u67b6\u69cb"})," \u2014 \u5927\u898f\u6a21\u8a55\u4f30"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../gpu-optimization",children:"GPU \u5f8c\u7aef\u8207\u512a\u5316"})," \u2014 \u6548\u80fd\u8abf\u6821"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},30416(e,n,s){s.d(n,{R:()=>t,x:()=>d});var l=s(59471);const i={},r=l.createContext(i);function t(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);